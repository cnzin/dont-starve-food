(function(){var N,fa,qa=30,r=16*qa,qa=r/16,ga=3*r,m=6*r,k=10*r,v=15*r,O=20*r,ra=40*r,Da=2*r,Ya=0.6666*qa,h={butter:{name:"Butter",fat:1,dairy:1,health:40,hunger:25,perish:ra,stack:40},butterflywings:{name:"Butterfly Wings",isveggie:!0,decoration:2,health:8,hunger:9.375,perish:m,stack:40},deerclopseyeball:{name:"Deerclops Eyeball",uncookable:!0,health:60,hunger:75,sanity:-15},bird_egg:{name:"Egg",egg:1,health:0,hunger:9.375,sanity:0,perish:k,stack:40,rot:"rottenegg"},bird_egg_cooked:{name:"Cooked Egg",
egg:1,precook:1,health:0,hunger:12.5,sanity:0,perish:m,stack:40},rottenegg:{name:"Rotten Egg",uncookable:!0,health:-1,hunger:-10,stack:40},fish:{name:"Fish",ismeat:!0,fish:1,health:1,hunger:12.5,perish:ga,stack:40},fish_cooked:{name:"Cooked Fish",ismeat:!0,fish:1,precook:1,health:1,hunger:12.5,perish:m,stack:40},froglegs:{name:"Frog Legs",ismeat:!0,meat:0.5,health:1,hunger:12.5,perish:m,sanity:-10,stack:40},froglegs_cooked:{name:"Cooked Frog Legs",ismeat:!0,meat:0.5,precook:1,health:3,hunger:12.5,
perish:k,sanity:0,stack:40},flowerhat:{name:"Garland",health:3,hunger:0,sanity:10,perish:m,stack:1,uncookable:!0},hambat:{name:"Ham Bat",health:-8,hunger:25,sanity:-15,perish:k,stack:1,uncookable:!0},honey:{name:"Honey",sweetener:!0,health:3,hunger:9.375,perish:ra,stack:40},honeycomb:{name:"Honeycomb",sweetener:!0},lightbulb:{name:"Light Bulb",health:1,hunger:0,perish:m,stack:40,uncookable:!0},mandrake:{name:"Mandrake",veggie:1,magic:1,health:60,hunger:75,stack:40},mandrake_cooked:{name:"Cooked Mandrake",
uncookable:!0,veggie:1,magic:1,precook:1,health:100,hunger:150,stack:40},monstermeat:{name:"Monster Meat",ismeat:!0,meat:1,monster:!0,health:-20,hunger:18.75,sanity:-15,perish:m,stack:20,dry:"monstermeat_dried",drytime:r},monstermeat_cooked:{name:"Cooked Monster Meat",ismeat:!0,meat:1,monster:!0,precook:1,health:-3,hunger:18.75,sanity:-10,perish:v,stack:20},monstermeat_dried:{name:"Monster Jerky",ismeat:!0,meat:1,monster:!0,dried:1,health:-3,hunger:18.75,sanity:-5,perish:O,stack:20},meat:{name:"Meat",
ismeat:!0,meat:1,health:1,hunger:25,sanity:-10,perish:m,stack:20,dry:"meat_dried",drytime:Da},meat_cooked:{name:"Cooked Meat",ismeat:!0,meat:1,precook:1,health:3,hunger:25,sanity:0,perish:k,stack:20},meat_dried:{name:"Jerky",ismeat:!0,meat:1,dried:1,health:20,hunger:25,sanity:15,perish:O,stack:20},morsel:{name:"Morsel",ismeat:!0,meat:0.5,health:0,hunger:12.5,sanity:-10,perish:m,stack:40,drytime:r,dry:"smallmeat_dried"},morsel_cooked:{name:"Cooked Morsel",ismeat:!0,meat:0.5,precook:1,health:1,hunger:12.5,
sanity:0,perish:k,stack:40},smallmeat_dried:{name:"Small Jerky",ismeat:!0,meat:0.5,dried:1,health:8,hunger:12.5,sanity:10,perish:O,stack:40},drumstick:{name:"Drumstick",ismeat:!0,ideal:!0,meat:0.5,health:0,hunger:12.5,sanity:-10,perish:m,stack:20,drytime:r,dry:"smallmeat_dried"},drumstick_cooked:{name:"Fried Drumstick",ismeat:!0,meat:0.5,precook:1,health:1,hunger:12.5,perish:k,stack:20},batwing:{name:"Batilisk Wing",ismeat:!0,health:3,hunger:12.5,sanity:-10,perish:m,stack:40,drytime:Da,dry:"smallmeat_dried",
uncookable:!0},batwing_cooked:{name:"Cooked Batilisk Wing",ismeat:!0,health:8,hunger:18.75,sanity:0,perish:k,uncookable:!0},red_mushroom:{name:"Red Cap",veggie:0.5,ideal:!0,health:-20,hunger:12.5,sanity:0,perish:k,stack:40},red_mushroom_cooked:{name:"Cooked Red Cap",veggie:0.5,health:1,hunger:0,sanity:-10,perish:k,stack:40},green_mushroom:{name:"Green Cap",veggie:0.5,ideal:!0,health:0,hunger:12.5,sanity:-50,perish:k,stack:40},green_mushroom_cooked:{name:"Cooked Green Cap",veggie:0.5,health:-1,hunger:0,
sanity:15,perish:k,stack:40},blue_mushroom:{name:"Blue Cap",veggie:0.5,ideal:!0,health:20,hunger:12.5,sanity:-15,perish:k,stack:40},blue_mushroom_cooked:{name:"Cooked Blue Cap",veggie:0.5,health:-3,hunger:0,sanity:10,perish:k,stack:40},petals:{name:"Petals",uncookable:!0,health:1,hunger:0,sanity:-2.5,perish:m,stack:40},petals_evil:{name:"Dark Petals",uncookable:!0,health:0,hunger:0,sanity:-5,perish:m,stack:40},seeds:{name:"Seeds",uncookable:!0,health:0,hunger:4.6875,perish:ra,stack:40},seeds_cooked:{name:"Toasted Seeds",
uncookable:!0,health:1,hunger:4.6875,perish:k,stack:40},spoiled_food:{name:"Rot",uncookable:!0,health:-1,hunger:-10,stack:40},tallbirdegg:{name:"Tallbird Egg",egg:4,health:3,hunger:25},tallbirdegg_cooked:{name:"Fried Tallbird Egg",egg:4,precook:1,health:0,hunger:37.5,perish:m},trunk_summer:{name:"Koalefant Trunk",uncookable:!0,ismeat:!0,health:30,hunger:37.5,perish:m,stack:20},trunk_summer_cooked:{name:"Koalefant Trunk Steak",uncookable:!0,ismeat:!0,health:40,hunger:75,perish:v,stack:20},twigs:{name:"Twigs",
inedible:1},carrot:{name:"Carrot",isveggie:!0,veggie:1,health:1,hunger:12.5,perish:k,sanity:0,stack:40},carrot_cooked:{name:"Roasted Carrot",isveggie:!0,veggie:1,precook:1,health:3,hunger:12.5,perish:m,sanity:0,stack:40},corn:{name:"Corn",ideal:!0,isveggie:!0,veggie:1,health:3,hunger:25,perish:k,sanity:0,stack:40},corn_cooked:{name:"Popcorn",isveggie:!0,veggie:1,precook:1,health:3,hunger:12.5,perish:v,sanity:0,stack:40},pumpkin:{name:"Pumpkin",isveggie:!0,veggie:1,health:3,hunger:37.5,perish:k,sanity:0,
stack:20},pumpkin_cooked:{name:"Hot Pumpkin",isveggie:!0,veggie:1,precook:1,health:8,hunger:37.5,perish:m,sanity:0,stack:20},eggplant:{name:"Eggplant",isveggie:!0,veggie:1,health:8,hunger:25,perish:k,sanity:0,stack:20},eggplant_cooked:{name:"Braised Eggplant",isveggie:!0,veggie:1,precook:1,health:20,hunger:25,perish:m,sanity:0,stack:20},durian:{name:"Durian",isfruit:!0,monster:1,fruit:1,health:-3,hunger:25,perish:k,sanity:-5,stack:20},durian_cooked:{name:"Extra Smelly Durian",isfruit:!0,monster:1,
fruit:1,precook:1,health:0,hunger:25,perish:m,sanity:-5,stack:20},pomegranate:{name:"Pomegranate",isfruit:!0,fruit:1,health:3,hunger:9.375,perish:m,sanity:0,stack:40},pomegranate_cooked:{name:"Sliced Pomegranate",isfruit:!0,fruit:1,precook:1,health:20,hunger:12.5,perish:ga,sanity:0,stack:40},dragonfruit:{name:"Dragon Fruit",isfruit:!0,fruit:1,health:3,hunger:9.375,perish:m,sanity:0,stack:40},dragonfruit_cooked:{name:"Prepared Dragon Fruit",isfruit:!0,fruit:1,precook:1,health:20,hunger:12.5,perish:ga,
sanity:0,stack:40},berries:{name:"Berries",isfruit:!0,fruit:0.5,health:0,hunger:9.375,perish:m,sanity:0,stack:40},berries_cooked:{name:"Roasted Berries",isfruit:!0,fruit:0.5,precook:1,health:1,hunger:12.5,perish:ga,sanity:0,stack:40}},Za=function(){return this.op+this.qty},$a={"=":function(a){return a===this.qty},">":function(a){return a>this.qty},"<":function(a){return a<this.qty},">=":function(a){return a>=this.qty},"<=":function(a){return a<=this.qty}},sa={test:function(a){return!!a},toString:function(){return""}},
u=function(a,b){return{op:a,qty:b,test:$a[a],toString:Za}},ab=function(a,b,c){return this.item1.test(a,b,c)||this.item2.test(a,b,c)},bb=function(){return this.item1+" or "+this.item2},Ea=function(a,b){return{item1:a,item2:b,test:ab,toString:bb,cancel:a.cancel||b.cancel}},cb=function(a,b,c){return!this.item.test(a,b,c)},db=function(){return this.item.toString().substring(0,this.item.toString().length-1)+"|strike]"},p=function(a){return{item:a,test:cb,toString:db,cancel:!0}},eb=function(a,b){return(b[this.name]||
0)+(b[this.name+"_cooked"]||0)},fb=function(){return"[*"+h[this.name].name+"|"+h[this.name].img+" "+h[this.name].name+"]"+(h[this.name].cook?"[*"+h[this.name].cook.name+"|"+h[this.name].cook.img+"]":"")+(h[this.name].raw?"[*"+h[this.name].raw.name+"|"+h[this.name].raw.img+"]":"")+(this.qty?this.qty:"")},C=function(a,b){return{name:a,qty:b||sa,test:eb,toString:fb}},gb=function(a,b){return b[this.name]},hb=function(){return"[*"+h[this.name].name+"|"+h[this.name].img+" "+h[this.name].name+"]"+(this.qty?
this.qty:"")},F=function(a,b){return{name:a,qty:b||sa,test:gb,toString:hb}},ib=function(a,b,c){return c[this.tag]},jb=function(){return"[tag:"+this.tag+"|"+this.tag+"]"+(this.qty?this.qty:"")},e=function(a,b){return{tag:a,qty:b||sa,test:ib,toString:jb}},f={butterflymuffin:{name:"Butter Muffin",test:function(a,b,c){return b.butterflywings&&!c.meat&&c.veggie},requires:"Butterfly Wings, veggie",requirements:[C("butterflywings"),p(e("meat")),e("veggie")],priority:1,weight:1,foodtype:"veggie",health:20,
hunger:37.5,perish:v,sanity:5,cooktime:2},frogglebunwich:{name:"Froggle Bunwich",test:function(a,b,c){return(b.froglegs||b.froglegs_cooked)&&c.veggie},requirements:[C("froglegs"),e("veggie")],priority:1,foodtype:"meat",health:20,hunger:37.5,perish:v,sanity:5,cooktime:2},taffy:{name:"Taffy",test:function(a,b,c){return c.sweetener&&3<=c.sweetener&&!c.meat},requirements:[e("sweetener",u(">=",3)),p(e("meat"))],priority:10,foodtype:"veggie",health:-3,hunger:25,perish:v,sanity:15,cooktime:2},pumpkincookie:{name:"Pumpkin Cookie",
test:function(a,b,c){return(b.pumpkin||b.pumpkin_cooked)&&c.sweetener&&2<=c.sweetener},requirements:[C("pumpkin"),e("sweetener",u(">=",2))],priority:10,foodtype:"veggie",health:0,hunger:37.5,perish:k,sanity:15,cooktime:2},stuffedeggplant:{name:"Stuffed Eggplant",test:function(a,b,c){return(b.eggplant||b.eggplant_cooked)&&c.veggie&&1<c.veggie},requirements:[C("eggplant"),e("veggie",u(">",1))],priority:1,foodtype:"veggie",health:3,hunger:37.5,perish:v,sanity:5,cooktime:2},fishsticks:{name:"Fishsticks",
test:function(a,b,c){return c.fish&&b.twigs&&c.inedible&&1>=c.inedible},requirements:[e("fish"),F("twigs"),e("inedible"),e("inedible",u("<=",1))],priority:10,foodtype:"meat",health:40,hunger:37.5,perish:k,sanity:5,cooktime:2},honeynuggets:{name:"Honey Nuggets",test:function(a,b,c){return b.honey&&c.meat&&1.5>=c.meat&&!c.inedible},requirements:[F("honey"),e("meat",u("<=",1.5)),p(e("inedible"))],priority:2,foodtype:"meat",health:20,hunger:37.5,perish:v,sanity:5,cooktime:2},honeyham:{name:"Honey Ham",
test:function(a,b,c){return b.honey&&c.meat&&1.5<c.meat&&!c.inedible},requirements:[F("honey"),e("meat",u(">",1.5)),p(e("inedible"))],priority:2,foodtype:"meat",health:30,hunger:75,perish:v,sanity:5,cooktime:2},dragonpie:{name:"Dragonpie",test:function(a,b,c){return(b.dragonfruit||b.dragonfruit_cooked)&&!c.meat},requirements:[C("dragonfruit"),p(e("meat"))],priority:1,foodtype:"veggie",health:40,hunger:75,perish:v,sanity:5,cooktime:2},kabobs:{name:"Kabobs",test:function(a,b,c){return c.meat&&b.twigs&&
(!c.monster||1>=c.monster)&&c.inedible&&1>=c.inedible},requirements:[e("meat"),F("twigs"),Ea(p(e("monster")),e("monster",u("<=",1))),e("inedible"),e("inedible",u("<=",1))],priority:5,foodtype:"meat",health:3,hunger:37.5,perish:v,sanity:5,cooktime:2},mandrakesoup:{name:"Mandrake Soup",test:function(a,b){return b.mandrake},requirements:[F("mandrake")],priority:10,foodtype:"veggie",health:100,hunger:150,perish:m,sanity:5,cooktime:3},baconeggs:{name:"Bacon and Eggs",test:function(a,b,c){return c.egg&&
1<c.egg&&c.meat&&1<c.meat&&!c.veggie},requirements:[e("egg",u(">",1)),e("meat",u(">",1)),p(e("veggie"))],priority:10,foodtype:"meat",health:20,hunger:75,perish:O,sanity:5,cooktime:2},meatballs:{name:"Meatballs",test:function(a,b,c){return c.meat&&!c.inedible},requirements:[e("meat"),p(e("inedible"))],priority:-1,foodtype:"meat",health:3,hunger:62.5,perish:k,sanity:5,cooktime:0.75},bonestew:{name:"Meaty Stew",test:function(a,b,c){return c.meat&&3<=c.meat&&!c.inedible},requirements:[e("meat",u(">=",
3)),p(e("inedible"))],priority:0,foodtype:"meat",health:12,hunger:150,perish:k,sanity:5,cooktime:0.75},perogies:{name:"Pierogi",test:function(a,b,c){return c.egg&&c.meat&&c.veggie&&!c.inedible},requirements:[e("egg"),e("meat"),e("veggie"),p(e("inedible"))],priority:5,foodtype:"meat",health:40,hunger:37.5,perish:O,sanity:5,cooktime:1},turkeydinner:{name:"Turkey Dinner",test:function(a,b,c){return b.drumstick&&1<b.drumstick&&c.meat&&1<c.meat&&(c.veggie||c.fruit)},requirements:[F("drumstick",u(">",1)),
e("meat",u(">",1)),Ea(e("veggie"),e("fruit"))],priority:10,foodtype:"meat",health:20,hunger:75,perish:m,sanity:5,cooktime:3},ratatouille:{name:"Ratatouille",test:function(a,b,c){return!c.meat&&c.veggie&&!c.inedible},requirements:[p(e("meat")),e("veggie"),p(e("inedible"))],priority:0,foodtype:"veggie",health:3,hunger:25,perish:v,sanity:5,cooktime:1},jammypreserves:{name:"Fist Full of Jam",test:function(a,b,c){return c.fruit&&!c.meat&&!c.veggie&&!c.inedible},requirements:[e("fruit"),p(e("meat")),p(e("veggie")),
p(e("inedible"))],priority:0,foodtype:"veggie",health:3,hunger:37.5,perish:v,sanity:5,cooktime:0.5},fruitmedley:{name:"Fruit Medley",test:function(a,b,c){return c.fruit&&3<=c.fruit&&!c.meat&&!c.veggie},requirements:[e("fruit",u(">=",3)),p(e("meat")),p(e("veggie"))],priority:0,foodtype:"veggie",health:20,hunger:25,perish:m,sanity:5,cooktime:0.5},fishtacos:{name:"Fish Tacos",test:function(a,b,c){return c.fish&&(b.corn||b.corn_cooked)},requirements:[e("fish"),C("corn")],priority:10,foodtype:"meat",health:20,
hunger:37.5,perish:m,sanity:5,cooktime:0.5},waffles:{name:"Waffles",test:function(a,b,c){return b.butter&&(b.berries||b.berries_cooked)&&c.egg},requirements:[F("butter"),C("berries"),e("egg")],priority:10,foodtype:"veggie",health:60,hunger:37.5,perish:m,sanity:5,cooktime:0.5},monsterlasagna:{name:"Monster Lasagna",test:function(a,b,c){return c.monster&&2<=c.monster&&!c.inedible},requirements:[e("monster",u(">=",2)),p(e("inedible"))],priority:10,foodtype:"meat",health:-20,hunger:37.5,perish:m,sanity:-20,
cooktime:0.5},powcake:{name:"Powdercake",test:function(a,b){return b.twigs&&b.honey&&(b.corn||b.corn_cooked)},requirements:[F("twigs"),F("honey"),C("corn")],priority:10,foodtype:"veggie",health:-3,hunger:0,perishtime:9E6,sanity:0,cooktime:0.5},wetgoop:{name:"Wet Goop",test:function(){return!0},requirements:[],trash:!0,priority:-2,health:0,hunger:0,perish:m,sanity:0,cooktime:0.25}},Q,n,Fa,kb=/^tag[: ]/,lb=/^tag:? */,H,mb=/^recipe[: ]/,nb=/^recipe:? */,ta,ob=/^ingredient[: ]/,pb=/^ingredient:? */,Ga,
Ha,Ia=!1,qb=function(a){a.match=!Ia&&a.uncookable?0:0===a.lowerName.indexOf(n)||a.raw&&0===a.raw.lowerName.indexOf(n)?3:0===Ha.test(a.lowerName)?2:Ga.test(a.lowerName)?1:0;return a.match},rb=function(a){return a.match=a[Fa]+0||0},sb=function(a){for(var b=0,c,l=!0;b<H.length;){c=H[b].test(null,a.nameObject,a);if(H[b].cancel){if(!c){l=!0;break}}else c&&(l=!1);b++}return a.match=l?0:1},tb=function(a){for(var b=0,c,l=!0;b<a.requirements.length;){c=a.requirements[b].test(null,ta.nameObject,ta);if(a.requirements[b].cancel){if(!c){l=
!0;break}}else c&&(l=!1);b++}return a.match=l?0:1},ub=function(a){return a.match=a.lowerName===n?1:0},vb=function(a){return a.match=a.lowerName===n||a.raw&&a.raw.lowerName===n||a.cook&&a.cook.lowerName===n?1:0},J=function(a,b){var c,l;return a.match===b.match?(c=a.raw?a.raw.name:a.name,l=b.raw?b.raw.name:b.name,c!==l?c>l?1:c<l?-1:0:a.name===b.name?0:a.raw===b?1:-1):b.match-a.match};Q=function(a,b,c){Ia=!!c;n=b.toLowerCase();if(kb.test(n))return Fa=n.split(lb)[1],a.filter(rb).sort(J);if(mb.test(n))return(H=
f.byName(n.split(nb)[1].toLowerCase()))?(H=H.requirements,a.filter(sb).sort(J)):[];if(ob.test(n))return(ta=h.byName(n.split(pb)[1].toLowerCase()))?a.filter(tb).sort(J):[];if(0===n.indexOf("*"))return n=n.substring(1),a.filter(ub).sort(J);if(0===n.indexOf("~"))return n=n.substring(1),a.filter(vb).sort(J);Ha=RegExp("\\b"+n+".*");Ga=RegExp("\\b"+n.split("").join(".*")+".*");return a.filter(qb).sort(J)};var ua=function(a,b,c){var l,d,e;for(l=0;l<a.length;l++)if(e=a[l],null!==e)for(d in b[e.id]=1+(b[e.id]||
0),e)e.hasOwnProperty(d)&&"perish"!==d&&!isNaN(e[d])?c[d]=e[d]+(c[d]||0):"perish"===d&&(c[d]=Math.min(c[d]||O,e[d]))},va,wa,T;va=function(a,b,c,l){var d,e;a.length=0;wa={};T={};ua(b,wa,T);for(b=0;b<f.length;b++){e=!1;for(d=0;d<f[b].requirements.length;d++)if(f[b].requirements[d].test(null,wa,T))f[b].requirements[d].cancel||(e=!0);else if(!l&&f[b].requirements[d].cancel){e=!1;break}else if(l&&!f[b].requirements[d].cancel){e=!1;break}e&&(!c||-1===c.indexOf(f[b]))&&a.push(f[b])}T.img="";T.name="Combined";
return a};var Ja,X=[],xa,R;Ja=function(a){X.length=0;xa={};R={};ua(a,xa,R);for(a=0;a<f.length;a++)f[a].test(null,xa,R)&&X.push(f[a]);X.sort(function(a,c){return c.priority-a.priority});R.img="";R.name="Combined";X.unshift(R);return X};var S=document.createElement("canvas"),ya=S.getContext&&S.toDataURL&&S.getContext("2d"),Y=document.createElement("canvas"),Ka=Y.getContext&&Y.getContext("2d"),K={},za={},La=!!ya,ha=[],wb=function(a){return function(b){b=b.target;ya.clearRect(0,0,64,64);ya.drawImage(b,
0,0,64,64);Ka.clearRect(0,0,32,32);Ka.drawImage(b,0,0,32,32);try{K[a]=S.toDataURL(),za[a]=Y.toDataURL()}catch(c){La=!1}ha.filter(function(b){return b.url===a}).forEach(function(b){b.url===a&&(delete b.img.dataset.pending,ia&&b.img.removeAttribute("data-pending"),b.img.src=32===b.d?za[a]||a:K[a]||a)});ha=ha.filter(function(b){return b.url!==a})}},Ma=function(a,b,c){a.dataset.pending=b;ia&&a.setAttribute("data-pending",b);ha.push({url:b,img:a,d:c})},U=function(a,b){var c=new Image,l;La?K[a]?c.src=32===
b?za[a]:K[a]:(null!==K[a]&&(K[a]=null,l=new Image,l.addEventListener("load",wb(a),!1),l.src=a),Ma(c,a,b)):c.src=a;return c};S.width=64;S.height=64;Y.width=32;Y.height=32;U.queue=Ma;var ja,xb=/\[([^\|]*)\|([^\|\]]*)\|?([^\|\]]*)\]/,Na=/([^\|]\]\[[^\|]+\|[^\|\]]+)\|?([^\|\](?:left)]*)(?=\])/g,yb=/(\[[^\|]+\|[^\|\]]+)\|?([^\|\]]*)(?=\]\[)(?!\]\[\|)/g,Oa=function(a,b,c){return b+"|"+(0===c.length?"left":c+" left")},zb=function(a,b,c){return b+"|"+(0===c.length?"right":c+" right")},Ab=/_(\w)/g,Bb=function(a,
b){return" "+b.toUpperCase()};ja=function(a){var b=a&&a.replace(Na,Oa).replace(Na,Oa).replace(yb,zb);a=b&&b.split(xb);var c,l,d,e;if(!a||1===a.length)return b;b=document.createDocumentFragment();b.appendChild(document.createTextNode(a[0]));for(c=1;c<a.length;c+=4)""===a[c]&&""===a[c+1]?b.appendChild(document.createElement("br")):(l=document.createElement("span"),l.className=""===a[c+2]?"link":"link "+a[c+2],l.dataset.link=a[c],ia&&l.setAttribute("data-link",a[c]),a[c+1]&&0===a[c+1].indexOf("img/")?
(l.appendChild(document.createTextNode(a[c+1].split(" ").slice(1).join(" "))),d=a[c+1].split(" ")[0],e=U(d,32),e.title=(d.substr(4,1).toUpperCase()+d.substr(5).replace(Ab,Bb)).split(".")[0],l.appendChild(e)):l.appendChild(document.createTextNode(a[c+1]?a[c+1]:a[c])),b.appendChild(l)),b.appendChild(document.createTextNode(a[c+3]));return b};var g,ca=0,Pa=document.getElementById("main"),Cb=document.getElementById("food"),Db=document.getElementById("recipes"),Eb=document.getElementById("navbar"),ia=
!1;document.documentElement.dataset||(ia=!0,Object.defineProperty(Element.prototype,"dataset",{get:function(){this.ds||(this.ds={},Array.prototype.forEach.call(this.attributes,function(a){0===a.name.indexOf("data-")&&(this.ds[a.name.substring(5)]=a.value)},this));return this.ds}}));document.getElementById("stalehealth").appendChild(document.createTextNode(Math.round(333)/10+"%"));document.getElementById("stalehunger").appendChild(document.createTextNode(Math.round(667)/10+"%"));document.getElementById("spoiledhunger").appendChild(document.createTextNode(Math.round(500)/
10+"%"));document.getElementById("spoiledsanity").appendChild(document.createTextNode(10));document.getElementById("perishground").appendChild(document.createTextNode(Math.round(1500)/10+"%"));document.getElementById("perishwinter").appendChild(document.createTextNode(Math.round(750)/10+"%"));document.getElementById("perishfridge").appendChild(document.createTextNode(Math.round(500)/10+"%"));var q,x=function(a,b){return"[tag:"+a+"|"+(b||a)+"]"};for(g in h)if(h.hasOwnProperty(g)){var d=h[g];d.match=
0;d.lowerName=d.name.toLowerCase();d.id=g;d.nameObject={};d.nameObject[g]=1;d.img="img/"+d.name.replace(/ /g,"_").toLowerCase()+".png";-1!==g.indexOf("_cooked")&&(d.cooked=!0);h[g+"_cooked"]&&(d.cook=h[g+"_cooked"],h[g+"_cooked"].raw=d);d.info=[];q=d.info;d.fruit&&q.push(x("fruit")+(1===d.fruit?"":"\u00d7"+d.fruit));d.veggie&&q.push(x("veggie","vegetable")+(1===d.veggie?"":"\u00d7"+d.veggie));d.meat&&q.push(x("meat")+(1===d.meat?"":"\u00d7"+d.meat));d.egg&&q.push(x("egg")+(1===d.egg?"":"\u00d7"+d.egg));
d.fish&&q.push(x("fish"));d.magic&&q.push(x("magic"));d.decoration&&q.push(x("decoration"));d.inedible&&q.push(x("inedible"));d.monster&&q.push(x("monster","monster food"));d.sweetener&&q.push(x("sweetener"));d.fat&&q.push(x("fat"));d.dairy&&q.push(x("dairy"));d.comment&&q.push(d.comment);h[ca++]=d}h.length=ca;ca=0;for(g in f)f.hasOwnProperty(g)&&(f[g].match=0,f[g].name=f[g].name||g,f[g].id=g,f[g].lowerName=f[g].name.toLowerCase(),f[g].weight=f[g].weight||1,f[g].priority=f[g].priority||0,f[g].img=
"img/"+f[g].name.replace(/ /g,"_").toLowerCase()+".png",f[g].requirements&&(f[g].requires=ja(f[g].requirements.join("; "))),f[ca++]=f[g]);f.length=ca;f.forEach=Array.prototype.forEach;f.filter=Array.prototype.filter;f.sort=Array.prototype.sort;f.byName=function(a){for(var b=this.length;b--;)if(this[b].lowerName===a)return this[b]};var Fb=function(a,b){return a+"[recipe:"+b.name+"|"+b.img+"]"};for(g in h)h.hasOwnProperty(g)&&(isNaN(g)&&isNaN(h[g]))&&(d=h[g],q=d.info,d.cooked&&q.push("from [*"+d.raw.name+
"|"+d.raw.img+"]"),d.cook&&q.push("cook: [*"+d.cook.name+"|"+d.cook.img+"]"),d.dry&&(d.dry instanceof Object||(d.dry=h[d.dry]),q.push("dry in "+d.drytime/r+" "+(1===d.drytime/r?"day":"days")+": [*"+d.dry.name+"|"+d.dry.img+"]")),d.info=q.join("; "),d.uncookable?d.info+="[|]cannot be added to crock pot":(d.recipes=[],f.forEach(function(a){for(var b=!1,c=a.requirements,l=c.length;l--;)if(c[l].test(null,d.nameObject,d))!c[l].cancel&&!b&&(b=!0);else if(c[l].cancel){b=!1;break}b&&d.recipes.push(a)}),0<
d.recipes.length&&(d.ingredient=!0,d.info+=d.recipes.reduce(Fb,"[|][ingredient:"+d.name+"|Recipes] "))),d.info=ja(d.info));h.forEach=Array.prototype.forEach;h.filter=Array.prototype.filter;h.sort=Array.prototype.forEach;h.byName=function(a){for(var b=this.length;b--;)if(this[b].lowerName===a)return this[b]};var ka="id health hunger fruit veggie meat egg fish magic decoration inedible monster sweetener fat dairy".split(" ");fa=N=void 0;h.filter(function(a){return!a.uncookable&&!a.skip&&(a.ideal||!a.cook&&
(!a.raw||!a.raw.ideal))}).map(function(a){for(var b={},c=ka.length;c--;)a.hasOwnProperty(ka[c])&&(b[ka[c]]=a[ka[c]]);return b});N=f.filter(function(a){return!a.trash}).sort(function(a,b){return b.priority-a.priority});fa=N.map(function(a){return a.test});N.map(function(a){return a.test.toString()});N.map(function(a){return a.priority});var la,Qa=Eb.getElementsByTagName("li"),da={},ea={},y,P,G,Gb=function(a){la(a.target.dataset.tab)},D;la=function(a){G.className="";G=da[a];P.style.display="none";P=
ea[a];G.className="selected";P.style.display="block"};for(g=0;g<Qa.length;g++)D=Qa[g],D.dataset.tab&&(da[D.dataset.tab]=D,ea[D.dataset.tab]=document.getElementById(D.dataset.tab),ea[D.dataset.tab].style.display="none",D.addEventListener("selectstart",function(a){a.preventDefault()},!1),D.addEventListener("click",Gb,!1));G=da.simulator;P=ea.simulator;window.localStorage&&localStorage.foodGuideState&&("["===localStorage.foodGuideState[0]?(y={},y.pickers=JSON.parse(localStorage.foodGuideState),localStorage.foodGuideState=
JSON.stringify(y)):y=JSON.parse(localStorage.foodGuideState),y.activeTab&&da[y.activeTab]&&(G=da[y.activeTab],P=ea[y.activeTab]));G.className="selected";P.style.display="block";window.addEventListener("beforeunload",function(){var a;window.localStorage&&(localStorage.foodGuideState||(localStorage.foodGuideState="{}"),a=JSON.parse(localStorage.foodGuideState),a.activeTab=G.dataset.tab,localStorage.foodGuideState=JSON.stringify(a))});var Hb=function(a){a.dataset.pending&&U.queue(a,a.dataset.pending,
32)},Aa=function(a){var b,c,d,e=document.createElement("tr"),h;for(b=1;b<arguments.length;b++)c=document.createElement(a),h=(d=arguments[b])&&d.indexOf?d:d.toString(),d instanceof DocumentFragment?(c.appendChild(d.cloneNode(!0)),Array.prototype.forEach.call(c.getElementsByTagName("img"),Hb)):0===h.indexOf("img/")?(d=U(h),c.appendChild(d)):c.appendChild(document.createTextNode(h)),e.appendChild(c);return e},Z=function(a,b,c,d,e,h,f,g,m,k){var s,W,t,n=!1,q,p,j,r=function(a){var b;if((!k||j<k)&&(!g||
g(a)))b=c(a),f&&f(a)&&(b.className="highlighted",q||(q=b),p=b),s.appendChild(b),j++},z=function(c,d,l){var f,g;if(d||c&&""!==c.target.dataset.sort||t){f=d||c&&c.target.dataset.sort||t;e&&(g=b.shift());"name"===f?b.sort(function(a,b){var c=a.raw?a.raw.name:a.name,d=b.raw?b.raw.name:b.name;return c!==d?c>d?1:c<d?-1:0:a.name===b.name?0:a.raw===b?1:-1}):b.sort(function(a,b){var c=a[f],d=b[f];return!isNaN(c)&&!isNaN(d)?d-c:isNaN(c)&&isNaN(d)?0:isNaN(c)?1:-1});if(d||c)t===f?n=!n:(t=f,n=!1);n&&b.reverse();
e&&b.unshift(g)}c=document.createElement("tr");for(W in a)d=document.createElement("th"),-1===W.indexOf(":")?d.appendChild(document.createTextNode(W)):(d.appendChild(document.createTextNode(W.split(":")[0])),d.title=W.split(":")[1]),a[W]&&(a[W]===t&&(d.style.background=n?"#555":"#ccc",d.style.color=n?"#ccc":"#555",d.style.borderRadius="4px"),d.style.cursor="pointer",d.dataset.sort=a[W],d.addEventListener("click",z,!1)),c.appendChild(d);d=s;s=document.createElement("table");s.appendChild(c);p=q=null;
j=0;b.forEach(r);h&&(s.className="links",Array.prototype.forEach.call(s.getElementsByClassName("link"),function(a){a.addEventListener("click",h,!1)}));d&&d.parentNode.replaceChild(s,d);l&&(q&&q.offsetTop+s.offsetTop+Pa.offsetTop+q.offsetHeight>window.scrollY+window.innerHeight?q.scrollIntoView(!0):p&&p.offsetTop+s.offsetTop+Pa.offsetTop<window.scrollY&&p.scrollIntoView(!1))};d?z(null,d):z();s.update=function(a){z(null,null,a)};s.setMaxRows=function(a){k=a;this.update()};return s},A=function(a){return isNaN(a)?
"":0<a?"+"+a:a},Ra=function(a,b){return a<b?(b-a)/Math.abs(a):a>b?-(a-b)/Math.abs(a):0},Sa=function(a,b){return!isNaN(a)&&a!==b?" ("+A((100*(a<b?(b-a)/Math.abs(a):a>b?-(a-b)/Math.abs(a):0)).toFixed(0))+"%)":""},Ta=function(a){return Aa("td",a.img?a.img:"",a.name,A(a.health),A(a.hunger),isNaN(a.sanity)?"":A(a.sanity),isNaN(a.perish)?"Never":a.perish/r+" "+(1===a.perish/r?"day":"days"),a.info||"")},na=function(a,b,c){return Aa("td",a.img?a.img:"",a.name,A(a.health)+Sa(b,a.health),A(a.hunger)+Sa(c,a.hunger),
isNaN(a.sanity)?"":A(a.sanity),isNaN(a.perish)?"Never":a.perish/r+" "+(1===a.perish/r?"day":"days"),(a.cooktime*Ya+0.5|0)+" secs",a.priority||"0",a.requires||"")},oa,pa=[],Ua=[],Ba=Z({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish",Info:""},Array.prototype.slice.call(h),Ta,"name",!1,function(a){a=!a.target?a:"IMG"===a.target.tagName?a.target.parentNode.dataset.link:a.target.dataset.link;"recipe:"===a.substring(0,7)||"ingredient:"===a.substring(0,
11)?(la("crockpot"),"recipe:"===a.substring(0,7)&&(a="*"+a.substring(7)),Ua=Q(f,a),Va.update(!0)):(oa!==a?(oa=a,pa=Q(h,a)):(oa="",pa.length=0),Ba.update(!0))},function(a){return-1!==pa.indexOf(a)}),Va=Z({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish","Cook Time":"cooktime","Priority:Highest priority recipe for a combination will be made":"priority","Requires:Dim, struck items cannot be used":""},Array.prototype.slice.call(f),na,"name",!1,function(a){a=
!a.target?a:"IMG"===a.target.tagName?a.target.parentNode.dataset.link:a.target.dataset.link;la("foodlist");oa=a;pa=Q(h,a);Ba.update(!0)},function(a){return-1!==Ua.indexOf(a)});Cb.appendChild(Ba);Db.appendChild(Va);var Ib=function(a,b){return a+"[ingredient:"+h[b.id].name+"|"+h[b.id].img+"]"},Wa=function(a){var b=document.createElement("button");b.appendChild(document.createTextNode("Calculate efficient recipes (may take some time)"));b.className="makablebutton";b.addEventListener("click",function(){var c=
[],d=a?a.length:null,e,g,m=[],n,k,q,s,p=[],t=[],r,u,v,j=function(a){return-1!==t.indexOf(a.id)},x=function(a){return-1!==this.indexOf(h[a])},z=function(a){-1!==t.indexOf(a.target.dataset.id)&&t.splice(t.indexOf(a.target.dataset.id),1);-1!==p.indexOf(a.target.dataset.id)?(p.splice(p.indexOf(a.target.dataset.id),1),a.target.className=""):(p.push(a.target.dataset.id),a.target.className="selected");v.update()},F=function(a){-1!==p.indexOf(a.target.dataset.id)&&p.splice(p.indexOf(a.target.dataset.id),
1);-1!==t.indexOf(a.target.dataset.id)?(t.splice(t.indexOf(a.target.dataset.id),1),a.target.className=""):(t.push(a.target.dataset.id),a.target.className="excluded");v.update();a.preventDefault()},D=function(a){g&&(g.className="");e===a.target.dataset.recipe?e=g=null:(e=a.target.dataset.recipe,g=a.target,a.target.className="selected");v.update()};null===d&&(d=h.length,a=h);for(;d--;)a[d].cook&&(-1===c.indexOf(a[d].cook)&&!a[d].cook.uncookable)&&c.push(a[d].cook),!a[d].uncookable&&((a[d].ideal||!a[d].cook||
a[d].cook.uncookable)&&-1===c.indexOf(a[d]))&&c.push(a[d]);r=[];v=Z({"":"",Name:"name",Health:"health","Health+:Health gained compared to ingredients":"healthpls",Hunger:"hunger","Hunger+:Hunger gained compared to ingredients":"hungerpls",Ingredients:""},r,function(a){var b=a.recipe;return Aa("td",b.img?b.img:"",b.name,A(b.health),A(a.healthpls)+" ("+A(100*a.healthpct|0)+"%)",A(b.hunger),A(a.hungerpls)+" ("+A(100*a.hungerpct|0)+"%)",ja(a.ingredients.reduce(Ib,"")))},"hungerpls",!1,null,null,function(a){return(!e||
a.recipe.name===e)&&(!t.length||!a.ingredients.some(j))&&(!p.length||p.every(x,a.ingredients))},0,15);u=document.createElement("div");k=document.createElement("div");k.appendChild(document.createTextNode("Computing combinations.."));u.appendChild(k);n=document.createElement("div");n.className="recipeFilter";u.appendChild(n);q=document.createElement("div");q.className="foodFilter";c.forEach(function(a){var b=U(a.img,32);b.dataset.id=a.id;b.addEventListener("click",z,!1);b.addEventListener("contextmenu",
F,!1);b.title=a.name;q.appendChild(b)});u.appendChild(q);d=document.createElement("div");s=document.createElement("input");s.type="text";s.placeholder="use custom filter";s.className="customFilterInput";d.appendChild(s);u.appendChild(v);b.parentNode.replaceChild(u,b);var C=function(){k.firstChild.textContent="Found "+r.length+" valid recipes.."},L=function(){v.setMaxRows(30);k.firstChild.textContent="Found "+r.length+" valid recipes. Showing top 30 for selected recipe using all selected ingredients. Right-click to exclude ingredients."},
Q=fa.length,y=[],ma=0,M,G=60,O=function(a){return c[a]},H,aa=c.length,I=[0,0,0,0],V,E=0,w=0;H=function(a){for(var b;a--&&1<aa;){b=I.map(O);var c=void 0,d=null,e={},l={};ua(b,e,l);for(c=0;c<Q&&(null===d||N[c].priority>=d);c++)fa[c](null,e,l)&&(y.push({recipe:N[c],ingredients:b,tags:{health:l.health,hunger:l.hunger}}),d=N[c].priority);I[0]++;for(b=0;I[b]>=aa;)b++,I[b]++;V=4;for(E=0;V--;)I[V]>=aa?I[V]=E:I[V]>E&&(E=I[V]);if(4===b)return!1;w++}return!0};var J=function(){var a=!1,b=Date.now();for(H(G)?
setTimeout(J,0):a=!0;ma<y.length&&y[ma];ma++){var c=y[ma],d=void 0,e=void 0;if(-1===m.indexOf(c.recipe.name)){for(d=0;d<m.length&&!(c.recipe.name<m[d]);d++);m.splice(d,0,c.recipe.name);e=U(f.byName(m[d].toLowerCase()).img);e.dataset.recipe=m[d];e.addEventListener("click",D,!1);e.title=c.recipe.name;d<n.childNodes.length?n.insertBefore(e,n.childNodes[d]):n.appendChild(e)}c.name||(c.name=c.recipe.name,c.health=c.recipe.health,c.ihealth=c.tags.health,c.healthpls=c.recipe.health-c.tags.health,c.hunger=
c.recipe.hunger,c.ihunger=c.tags.hunger,c.hungerpls=c.recipe.hunger-c.tags.hunger,c.healthpct=Ra(c.tags.health,c.recipe.health),c.hungerpct=Ra(c.tags.hunger,c.recipe.hunger),c.sanity=c.recipe.sanity,c.perish=c.recipe.perish);r.push(c)}M!==Date.now()-b&&(M=Date.now()-b+1,G=38/M*G+1|0);C&&C();a&&L&&L()};J()},!1);return b};document.getElementById("statistics").appendChild(Wa());window.food=h;window.recipes=f;window.matchingNames=Q;for(var ba=function(a,b){var c=!1;null!==b?a.dataset.id=b.id:a.nextSibling&&
null!==M(a.nextSibling)?(ba(a,M(a.nextSibling)),ba(a.nextSibling,null),c=!0):a.dataset.id=null;c||(null!==b?a.firstChild?a.replaceChild(U(b.img),a.firstChild):a.appendChild(U(b.img)):a.firstChild&&a.removeChild(a.firstChild),a.title=b?b.name:"")},M=function(a){return h[a.dataset.id]||f[a.dataset.id]||null},Xa=document.getElementsByClassName("ingredientpicker"),Ca=Xa.length;Ca--;)(function(){var a=document.createElement("span"),b,c=document.createElement("div"),d=document.createElement("ul"),e=Xa[Ca],
g=Ca,m,n="recipes"===e.dataset.type?f:h,p=!e.dataset.cookable,k=e.nextSibling,s=k.getElementsByClassName("ingredient"),q,t=[],r,u=[],v=[],j=null,x=!1,z=document.getElementById("results"),y=document.getElementById("discoverfood"),A=document.getElementById("discover"),C=document.getElementById("makable"),L=document.createElement("span"),F=function(a,b){for(var c=a;c.previousSibling;)if(c=c.previousSibling,b(c))return c;return null},G=function(a,b){for(var c=a;c.nextSibling;)if(c=c.nextSibling,b(c))return c;
return null},D=!1,H=function(a){var b=h[a]||f[a]||null;if(q){for(a=0;a<s.length;a++)if(null===M(s[a]))return ba(s[a],b),x&&r(),a;return-1}-1===s.indexOf(a)&&(s.push(a),a=document.createElement("span"),a.className="ingredient",ba(a,b),a.addEventListener("click",aa,!1),k.appendChild(a),x&&r());return 1},J=function(a){-1!==H(("IMG"===a.target.tagName?a.target.parentNode:a.target).dataset.id)&&a&&a.preventDefault&&a.preventDefault()},N=function(a){var b=U(a.img,32),c=document.createElement("span");c.appendChild(b);
c.appendChild(document.createTextNode(a.name));c.dataset.id=a.id;-1!==t.indexOf(a)&&(c.style.opacity=0.5);c.addEventListener("mousedown",J,!1);this.appendChild(c);this.dataset.length++},O=function(a){-1!==t.indexOf(h[a.dataset.id])?a.style.opacity||(a.style.opacity=0.5):a.style.opacity&&a.style.removeProperty("opacity")},aa=function(a){var b="IMG"===a.target.tagName?a.target.parentNode:a.target;if(q){if(null!==M(b))return ba(b,null),r(),b.dataset.id}else return a=s.indexOf(b.dataset.id),s.splice(a,
1),k.removeChild(b),r(),s[a]||null},I=function(){var a;b.splitTag();a=Q(n,b.getSearch(),p);c.removeChild(d);d=document.createElement("div");d.dataset.length=0;a.forEach(N,d);c.appendChild(d);j=null},V=function(a){a="IMG"===a.target.tagName?a.target.parentNode.dataset.link:a.target.dataset.link;var b=Q(n,a,p);1===b.length?H(b[0].id):(e.value=a,I())},E;"ingredients"===k.id?r=function(){var a,b,c,e;t=Array.prototype.map.call(s,function(a){return M(a)});a=Ja(t);b=a[0].health;c=a[0].hunger;e=Z({"":"",
Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish","Cook Time":"cooktime","Priority:Highest priority recipe for a combination will be made":"priority","Requires:Dim, struck items cannot be used":""},a,function(a){return na(a,b,c)},"priority",!0,V);z.firstChild&&z.removeChild(z.firstChild);z.firstChild&&(z.removeChild(z.firstChild),z.removeChild(z.firstChild));z.appendChild(e);null!==t[0]&&(va(u,t,a),0<u.length&&(z.appendChild(document.createTextNode("Add more ingredients to make:")),
e=Z({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish","Cook Time":"cooktime","Priority:Highest priority recipe for a combination will be made":"priority","Requires:Dim, struck items cannot be used":""},u,function(a){return na(a,b,c)},"priority",!1,V),z.appendChild(e)));d&&d.firstChild&&Array.prototype.forEach.call(d.getElementsByTagName("span"),O)}:"inventory"===k.id&&(r=function(){var a;t=Array.prototype.map.call(k.getElementsByClassName("ingredient"),
function(a){return M(a)});y.firstChild&&y.removeChild(y.firstChild);A.firstChild&&A.removeChild(A.firstChild);C.firstChild&&C.removeChild(C.firstChild);0<t.length&&(a=Z({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish",Info:""},t,Ta,"name"),y.appendChild(a),va(v,t,null,!0),0<v.length&&(a=Z({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish","Cook Time":"cooktime","Priority:Highest priority recipe for a combination will be made":"priority",
"Requires:Dim, struck items cannot be used":""},v,na,"name"),A.appendChild(a),C.appendChild(Wa(t))));d&&d.firstChild&&Array.prototype.forEach.call(d.getElementsByTagName("span"),O)});0!==s.length?(q=!0,Array.prototype.forEach.call(s,function(a){ba(a,null);a.addEventListener("click",aa,!1)})):(s=[],q=!1);window.localStorage&&localStorage.foodGuideState&&(m=JSON.parse(localStorage.foodGuideState).pickers)&&m[g]&&m[g].forEach(function(a){h[a]&&H(a)});x=!0;a.className="searchselector retracted";a.appendChild(document.createTextNode("name"));
var w=document.createElement("div"),R=!1,S=null,$=[{title:"name",prefix:"",placeholder:"Filter ingredients"},{title:"tag",prefix:"tag:",placeholder:"Meat, veggie, fruit, egg, monster..."},{title:"recipe",prefix:"recipe:",placeholder:"Find ingredients used in a recipe"}],K=$[0],B=null,P=function(){R=!1;w.style.height="0px";a.style.borderBottomLeftRadius="3px";w.style.borderTopLeftRadius="3px";null!==B&&(clearTimeout(B),B=null);a.className="searchselector retracted"},T=function(b){K=b;e.placeholder=
K.placeholder;a.firstChild.textContent=K.title},X=function(a){T($[a.target.dataset.typeIndex]);I();P()},Y=/: */;a.addEventListener("click",function(){R?P():(null===S&&(w.style.height="auto",w.style.left=a.offsetLeft,w.style.top=a.offsetTop+a.offsetHeight,S=w.offsetHeight+"px",w.style.height="0px"),R=!0,w.style.height=S,a.style.borderBottomLeftRadius="0px",w.style.borderTopLeftRadius="0px",w.style.width="auto",w.style.width=Math.max(w.offsetWidth,a.offsetWidth+1)+"px",null!==B&&(clearTimeout(B),B=
null),a.className="searchselector extended")},!1);a.addEventListener("selectstart",function(a){a.preventDefault()},!1);a.addEventListener("mouseout",function(){null!==B&&clearTimeout(B);B=setTimeout(P,500)},!1);a.addEventListener("mouseover",function(){null!==B&&(clearTimeout(B),B=null)},!1);w.addEventListener("mouseout",function(){null!==B&&clearTimeout(B);B=setTimeout(P,500)},!1);w.addEventListener("mouseover",function(){null!==B&&(clearTimeout(B),B=null)},!1);$.forEach(function(a,b){var c=document.createElement("div");
c.appendChild(document.createTextNode(a.title));c.dataset.typeIndex=b;c.addEventListener("click",X,!1);a.element=c;w.appendChild(c)});e.parentNode.insertBefore(a,e);w.className="searchdropdown";e.parentNode.insertBefore(w,e);b={getTag:function(){return K.title},setSearchType:function(a){T($[a])},getSearch:function(){return K.prefix+e.value},splitTag:function(){var a;a=e.value.split(Y);var b,c;if(2===a.length){b=a[0].toLowerCase()+":";c=a[1];for(a=0;a<$.length;a++)if(b===$[a].prefix){T($[a]);e.value=
c;break}}}};c.className="ingredientdropdown";c.appendChild(d);c.addEventListener("mousedown",function(a){a.preventDefault()},!1);m=Q(n,b.getSearch(),p);c.removeChild(d);d=document.createElement("div");d.dataset.length=0;m.forEach(N,d);c.appendChild(d);L.className="clearingredients";L.appendChild(document.createTextNode("clear"));L.addEventListener("click",function(){if(""===e.value&&"name"===b.getTag())for(;M(k.firstChild);)aa({target:k.firstChild});else e.value="",b.setSearchType(0),I()},!1);L.addEventListener("mouseover",
function(){""===e.value&&"name"===b.getTag()&&(L.firstChild.textContent="clear chosen ingredients")},!1);L.addEventListener("mouseout",function(){"clear"!==L.firstChild.textContent&&(L.firstChild.textContent="clear")},!1);k.parentNode.insertBefore(L,k);k.parentNode.insertBefore(c,k);e.addEventListener("keydown",function(a){var b;-1!==[16,17,37,38,39,40,13].indexOf(a.keyCode)&&(b=j,13===a.keyCode?(null===j&&(j=d.firstChild||null),null!==j&&J({target:j})):null===j?40===a.keyCode&&(j=d.childNodes[1]||
d.firstChild||null,null!==j&&(E=j.offsetLeft+j.offsetWidth/2,a.preventDefault())):(a.preventDefault(),37===a.keyCode?(j=j.previousSibling&&j.previousSibling.offsetTop===j.offsetTop?j.previousSibling:(a=G(j,function(a){return a.offsetTop!==j.offsetTop}))?a.previousSibling:d.lastChild,null!==j&&(E=j.offsetLeft+j.offsetWidth/2)):39===a.keyCode?(j=j.nextSibling&&j.nextSibling.offsetTop===j.offsetTop?j.nextSibling:(a=F(j,function(a){return a.offsetTop!==j.offsetTop}))?a.nextSibling:d.firstChild,null!==
j&&(E=j.offsetLeft+j.offsetWidth/2)):38===a.keyCode?((a=F(j,function(a){return E>=a.offsetLeft-1&&E<=a.offsetLeft+a.offsetWidth+1}))||(a=F(d.lastChild,function(a){return E>=a.offsetLeft-1&&E<=a.offsetLeft+a.offsetWidth+1})),j=a?a:d.firstChild):40===a.keyCode&&((a=G(j,function(a){return E>=a.offsetLeft-1&&E<=a.offsetLeft+a.offsetWidth+1}))||(a=G(d.firstChild,function(a){return E>=a.offsetLeft-1&&E<=a.offsetLeft+a.offsetWidth+1})),j=a?a:d.lastChild)),j!==b&&(null!==b&&(b.className=""),null!==j&&(j.className=
"selected")))},!1);e.addEventListener("keyup",function(a){-1===[16,17,37,38,39,40,13].indexOf(a.keyCode)?I():null!==j&&a.preventDefault()},!1);e.addEventListener("focus",function(){D||(D=!0)},!1);e.addEventListener("blur",function(){D&&(D=!1)},!1);r();window.addEventListener("beforeunload",function(){var a,b;window.localStorage&&(localStorage.foodGuideState||(localStorage.foodGuideState="{}"),a=JSON.parse(localStorage.foodGuideState),a.pickers||(a.pickers=[]),q?(b=[],b=Array.prototype.map.call(s,
function(a){return(a=M(a))?a.id:null}),a.pickers[g]=b):a.pickers[g]=s,localStorage.foodGuideState=JSON.stringify(a))})})()})();
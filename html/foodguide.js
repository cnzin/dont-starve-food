/*
Copyright (c) 2014

Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the "Software"), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
the Software, and to permit persons to whom the Software is furnished to do so,
subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
(function(){var F,L,r=480,x=3*r,e=6*r,h=10*r,q=15*r,D=20*r,t=40*r,I=2*r,ga=r/16*.6666,g={acorn:{name:"Birchnut",hunger:9.375,health:1,perish:D,stack:40,dlc:"giants"},acorn_cooked:{name:"Roasted Birchnut",seed:1,hunger:9.375,health:1,perish:e,stack:40,dlc:"giants"},butter:{name:"Butter",fat:1,dairy:1,health:40,hunger:25,perish:t,stack:40},butterflywings:{name:"Butterfly Wings",isveggie:!0,decoration:2,health:8,hunger:9.375,perish:e,stack:40},cactusflower:{name:"Cactus Flower",veggie:.5,hunger:12.5,
health:8,sanity:5,perish:x,stack:40,dlc:"giants"},deerclopseyeball:{name:"Deerclops Eyeball",uncookable:!0,health:60,hunger:75,sanity:-15},bird_egg:{name:"Egg",egg:1,health:0,hunger:9.375,sanity:0,perish:h,stack:40,rot:"rottenegg"},bird_egg_cooked:{name:"Cooked Egg",egg:1,precook:1,health:0,hunger:12.5,sanity:0,perish:e,stack:40},rottenegg:{name:"Rotten Egg",uncookable:!0,health:-1,hunger:-10,stack:40},cutlichen:{name:"Lichen",isveggie:!0,veggie:1,health:3,hunger:12.5,sanity:-5,perish:2*r},eel:{name:"Eel",
ismeat:!0,meat:.5,fish:1,health:3,hunger:9.375,perish:x,stack:40,dry:"smallmeat_dried",drytime:r},eel_cooked:{name:"Cooked Eel",ismeat:!0,health:8,hunger:12.5,perish:e,stack:40},fish:{name:"Fish",ismeat:!0,meat:.5,fish:1,health:1,hunger:12.5,perish:x,stack:40},fish_cooked:{name:"Cooked Fish",ismeat:!0,meat:.5,fish:1,precook:1,health:1,hunger:12.5,perish:e,stack:40},froglegs:{name:"Frog Legs",ismeat:!0,meat:.5,health:0,hunger:12.5,perish:e,sanity:-10,stack:40},froglegs_cooked:{name:"Cooked Frog Legs",
ismeat:!0,meat:.5,precook:1,health:1,hunger:12.5,perish:h,sanity:0,stack:40},foliage:{name:"Foliage",uncookable:!0,health:1,hunger:0,perish:e,stack:40},goatmilk:{name:"Electric Milk",dairy:1,health:3,hunger:12.5,sanity:10,perish:e,stack:40,dlc:"giants"},honey:{name:"Honey",sweetener:!0,health:3,hunger:9.375,perish:t,stack:40},honeycomb:{name:"Honeycomb",sweetener:!0},ice:{name:"Ice",frozen:1,perish:x,stack:40,dlc:"giants"},lightbulb:{name:"Light Bulb",health:1,hunger:0,perish:e,stack:40,uncookable:!0},
mandrake:{name:"Mandrake",veggie:1,magic:1,health:60,hunger:75,stack:40},mandrake_cooked:{name:"Cooked Mandrake",uncookable:!0,veggie:1,magic:1,precook:1,health:100,hunger:150,stack:40},mole:{name:"Moleworm",inedible:!0,meat:.5,dlc:"giants"},plantmeat:{name:"Leafy Meat",uncookable:!0,health:0,hunger:12.5,sanity:-10,perish:e,stack:40},plantmeat_cooked:{name:"Cooked Leafy Meat",uncookable:!0,health:1,hunger:18.75,sanity:0,perish:h,stack:40},monstermeat:{name:"Monster Meat",ismeat:!0,meat:1,monster:!0,
health:-20,hunger:18.75,sanity:-15,perish:e,stack:20,dry:"monstermeat_dried",drytime:r},monstermeat_cooked:{name:"Cooked Monster Meat",ismeat:!0,meat:1,monster:!0,precook:1,health:-3,hunger:18.75,sanity:-10,perish:q,stack:20},monstermeat_dried:{name:"Monster Jerky",ismeat:!0,meat:1,monster:!0,dried:1,health:-3,hunger:18.75,sanity:-5,perish:D,stack:20},meat:{name:"Meat",ismeat:!0,meat:1,health:1,hunger:25,sanity:-10,perish:e,stack:20,dry:"meat_dried",drytime:I},meat_cooked:{name:"Cooked Meat",ismeat:!0,
meat:1,precook:1,health:3,hunger:25,sanity:0,perish:h,stack:20},meat_dried:{name:"Jerky",ismeat:!0,meat:1,dried:1,health:20,hunger:25,sanity:15,perish:D,stack:20},morsel:{name:"Morsel",ismeat:!0,meat:.5,health:0,hunger:12.5,sanity:-10,perish:e,stack:40,drytime:r,dry:"smallmeat_dried"},morsel_cooked:{name:"Cooked Morsel",ismeat:!0,meat:.5,precook:1,health:1,hunger:12.5,sanity:0,perish:h,stack:40},smallmeat_dried:{name:"Small Jerky",ismeat:!0,meat:.5,dried:1,health:8,hunger:12.5,sanity:10,perish:D,
stack:40},drumstick:{name:"Drumstick",ismeat:!0,ideal:!0,meat:.5,health:0,hunger:12.5,sanity:-10,perish:e,stack:20,drytime:r,dry:"smallmeat_dried"},drumstick_cooked:{name:"Fried Drumstick",ismeat:!0,meat:.5,precook:1,health:1,hunger:12.5,perish:h,stack:20},batwing:{name:"Batilisk Wing",ismeat:!0,health:3,hunger:12.5,sanity:-10,perish:e,stack:40,drytime:I,dry:"smallmeat_dried",uncookable:!0},batwing_cooked:{name:"Cooked Batilisk Wing",ismeat:!0,health:8,hunger:18.75,sanity:0,perish:h,uncookable:!0},
minotaurhorn:{name:"Guardian's Horn",uncookable:!0,ismeat:!0,health:60,hunger:75,sanity:-15},red_mushroom:{name:"Red Cap",veggie:.5,ideal:!0,health:-20,hunger:12.5,sanity:0,perish:h,stack:40},red_mushroom_cooked:{name:"Cooked Red Cap",veggie:.5,health:1,hunger:0,sanity:-10,perish:h,stack:40},green_mushroom:{name:"Green Cap",veggie:.5,ideal:!0,health:0,hunger:12.5,sanity:-50,perish:h,stack:40},green_mushroom_cooked:{name:"Cooked Green Cap",veggie:.5,health:-1,hunger:0,sanity:15,perish:h,stack:40},
blue_mushroom:{name:"Blue Cap",veggie:.5,ideal:!0,health:20,hunger:12.5,sanity:-15,perish:h,stack:40},blue_mushroom_cooked:{name:"Cooked Blue Cap",veggie:.5,health:-3,hunger:0,sanity:10,perish:h,stack:40},petals:{name:"Petals",uncookable:!0,health:1,hunger:0,sanity:0,perish:e,stack:40},petals_evil:{name:"Dark Petals",uncookable:!0,health:0,hunger:0,sanity:-5,perish:e,stack:40},seeds:{name:"Seeds",uncookable:!0,health:0,hunger:4.6875,perish:t,stack:40},seeds_cooked:{name:"Toasted Seeds",uncookable:!0,
health:1,hunger:4.6875,perish:h,stack:40},spoiled_food:{name:"Rot",uncookable:!0,health:-1,hunger:-10,stack:40},tallbirdegg:{name:"Tallbird Egg",egg:4,health:3,hunger:25},tallbirdegg_cooked:{name:"Fried Tallbird Egg",egg:4,precook:1,health:0,hunger:37.5,perish:e},trunk_summer:{name:"Koalefant Trunk",uncookable:!0,ismeat:!0,health:30,hunger:37.5,sanity:0,perish:e,stack:20},trunk_summer_cooked:{name:"Koalefant Trunk Steak",uncookable:!0,ismeat:!0,health:40,hunger:75,sanity:0,perish:q,stack:20},twigs:{name:"Twigs",
inedible:1},cavebanana:{name:"Cave Banana",isfruit:!0,fruit:1,health:1,hunger:12.5,sanity:0,perish:h},cavebanana_cooked:{name:"Cooked Banana",isfruit:!0,fruit:1,precook:1,health:3,hunger:12.5,sanity:0,perish:e},carrot:{name:"Carrot",isveggie:!0,veggie:1,health:1,hunger:12.5,perish:h,sanity:0,stack:40},carrot_cooked:{name:"Roasted Carrot",isveggie:!0,veggie:1,precook:1,health:3,hunger:12.5,perish:e,sanity:0,stack:40},corn:{name:"Corn",ideal:!0,isveggie:!0,veggie:1,health:3,hunger:25,perish:h,sanity:0,
stack:40},corn_cooked:{name:"Popcorn",isveggie:!0,veggie:1,precook:1,health:3,hunger:12.5,perish:q,sanity:0,stack:40},pumpkin:{name:"Pumpkin",isveggie:!0,veggie:1,health:3,hunger:37.5,perish:h,sanity:0,stack:20},pumpkin_cooked:{name:"Hot Pumpkin",isveggie:!0,veggie:1,precook:1,health:8,hunger:37.5,perish:e,sanity:0,stack:20},eggplant:{name:"Eggplant",isveggie:!0,veggie:1,health:8,hunger:25,perish:h,sanity:0,stack:20},eggplant_cooked:{name:"Braised Eggplant",isveggie:!0,veggie:1,precook:1,health:20,
hunger:25,perish:e,sanity:0,stack:20},durian:{name:"Durian",isfruit:!0,monster:1,fruit:1,health:-3,hunger:25,perish:h,sanity:-5,stack:20},durian_cooked:{name:"Extra Smelly Durian",isfruit:!0,monster:1,fruit:1,precook:1,health:0,hunger:25,perish:e,sanity:-5,stack:20},pomegranate:{name:"Pomegranate",isfruit:!0,fruit:1,health:3,hunger:9.375,perish:e,sanity:0,stack:40},pomegranate_cooked:{name:"Sliced Pomegranate",isfruit:!0,fruit:1,precook:1,health:20,hunger:12.5,perish:x,sanity:0,stack:40},dragonfruit:{name:"Dragon Fruit",
isfruit:!0,fruit:1,health:3,hunger:9.375,perish:e,sanity:0,stack:40},dragonfruit_cooked:{name:"Prepared Dragon Fruit",isfruit:!0,fruit:1,precook:1,health:20,hunger:12.5,perish:x,sanity:0,stack:40},berries:{name:"Berries",isfruit:!0,fruit:.5,health:0,hunger:9.375,perish:e,sanity:0,stack:40},berries_cooked:{name:"Roasted Berries",isfruit:!0,fruit:.5,precook:1,health:1,hunger:12.5,perish:x,sanity:0,stack:40},cactusmeat:{name:"Cactus Flesh",ideal:!0,veggie:1,hunger:12.5,health:-3,perish:h,sanity:-5,stack:40,
dlc:"giants"},cactusmeat_cooked:{name:"Cooked Cactus Flesh",veggie:1,hunger:12.5,health:1,perish:h,sanity:15,precook:1,stack:40,dlc:"giants"},watermelon:{name:"Watermelon",fruit:1,ideal:!0,hunger:12.5,health:3,perish:e,sanity:5,stack:40,dlc:"giants"},watermelon_cooked:{name:"Grilled Watermelon",fruit:1,hunger:12.5,health:1,perish:x,sanity:7.5,precook:1,stack:40,dlc:"giants"},wormlight:{name:"Glow Berry",uncookable:!0,health:11,hunger:18.75,sanity:-10,perish:h}},ha=function(){return this.op+this.qty},
ia={"=":function(a){return a===this.qty},">":function(a){return a>this.qty},"<":function(a){return a<this.qty},">=":function(a){return a>=this.qty},"<=":function(a){return a<=this.qty}},S={test:function(a){return!!a},toString:function(){return""}},t=function(a,c){return{op:a,qty:c,test:ia[a],toString:ha}},ja=function(a,c,b){return this.item1.test(a,c,b)||this.item2.test(a,c,b)},ka=function(){return this.item1+" or "+this.item2},I=function(a,c){return{item1:a,item2:c,test:ja,toString:ka,cancel:a.cancel||
c.cancel}},la=function(a,c,b){return!this.item.test(a,c,b)},ma=function(){return this.item.toString().substring(0,this.item.toString().length-1)+"|strike]"},n=function(a){return{item:a,test:la,toString:ma,cancel:!0}},na=function(a,c,b){return(c[this.name]||0)+(c[this.name+"_cooked"]||0)},oa=function(){return"[*"+g[this.name].name+"|"+g[this.name].img+" "+g[this.name].name+"]"+(g[this.name].cook?"[*"+g[this.name].cook.name+"|"+g[this.name].cook.img+"]":"")+(g[this.name].raw?"[*"+g[this.name].raw.name+
"|"+g[this.name].raw.img+"]":"")+(this.qty?this.qty:"")},B=function(a,c){return{name:a,qty:c||S,test:na,toString:oa}},pa=function(a,c,b){return c[this.name]},qa=function(){return"[*"+g[this.name].name+"|"+g[this.name].img+" "+g[this.name].name+"]"+(this.qty?this.qty:"")},w=function(a,c){return{name:a,qty:c||S,test:pa,toString:qa}},ra=function(a,c,b){return b[this.tag]},sa=function(){return"[tag:"+this.tag+"|"+this.tag+"]"+(this.qty?this.qty:"")},d=function(a,c){return{tag:a,qty:c||S,test:ra,toString:sa}},
m={butterflymuffin:{name:"Butter Muffin",test:function(a,c,b){return c.butterflywings&&!b.meat&&b.veggie},requires:"Butterfly Wings, veggie",requirements:[B("butterflywings"),n(d("meat")),d("veggie")],priority:1,weight:1,foodtype:"veggie",health:20,hunger:37.5,perish:q,sanity:5,cooktime:2},frogglebunwich:{name:"Froggle Bunwich",test:function(a,c,b){return(c.froglegs||c.froglegs_cooked)&&b.veggie},requirements:[B("froglegs"),d("veggie")],priority:1,foodtype:"meat",health:20,hunger:37.5,perish:q,sanity:5,
cooktime:2},taffy:{name:"Taffy",test:function(a,c,b){return b.sweetener&&3<=b.sweetener&&!b.meat},requirements:[d("sweetener",t(">=",3)),n(d("meat"))],priority:10,foodtype:"veggie",health:-3,hunger:25,perish:q,sanity:15,cooktime:2,tags:["honeyed"]},pumpkincookie:{name:"Pumpkin Cookie",test:function(a,c,b){return(c.pumpkin||c.pumpkin_cooked)&&b.sweetener&&2<=b.sweetener},requirements:[B("pumpkin"),d("sweetener",t(">=",2))],priority:10,foodtype:"veggie",health:0,hunger:37.5,perish:h,sanity:15,cooktime:2,
tags:["honeyed"]},stuffedeggplant:{name:"Stuffed Eggplant",test:function(a,c,b){return(c.eggplant||c.eggplant_cooked)&&b.veggie&&1<b.veggie},requirements:[B("eggplant"),d("veggie",t(">",1))],priority:1,foodtype:"veggie",health:3,hunger:37.5,perish:q,sanity:5,temperature:40,temperatureduration:5,cooktime:2},fishsticks:{name:"Fishsticks",test:function(a,c,b){return b.fish&&c.twigs&&b.inedible&&1>=b.inedible},requirements:[d("fish"),w("twigs"),d("inedible"),d("inedible",t("<=",1))],priority:10,foodtype:"meat",
health:40,hunger:37.5,perish:h,sanity:5,cooktime:2},honeynuggets:{name:"Honey Nuggets",test:function(a,c,b){return c.honey&&b.meat&&1.5>=b.meat&&!b.inedible},requirements:[w("honey"),d("meat",t("<=",1.5)),n(d("inedible"))],priority:2,foodtype:"meat",health:20,hunger:37.5,perish:q,sanity:5,cooktime:2,tags:["honeyed"]},honeyham:{name:"Honey Ham",test:function(a,c,b){return c.honey&&b.meat&&1.5<b.meat&&!b.inedible},requirements:[w("honey"),d("meat",t(">",1.5)),n(d("inedible"))],priority:2,foodtype:"meat",
health:30,hunger:75,perish:q,sanity:5,temperature:40,temperatureduration:10,cooktime:2,tags:["honeyed"]},dragonpie:{name:"Dragonpie",test:function(a,c,b){return(c.dragonfruit||c.dragonfruit_cooked)&&!b.meat},requirements:[B("dragonfruit"),n(d("meat"))],priority:1,foodtype:"veggie",health:40,hunger:75,perish:q,sanity:5,temperature:40,temperatureduration:10,cooktime:2},kabobs:{name:"Kabobs",test:function(a,c,b){return b.meat&&c.twigs&&(!b.monster||1>=b.monster)&&b.inedible&&1>=b.inedible},requirements:[d("meat"),
w("twigs"),I(n(d("monster")),d("monster",t("<=",1))),d("inedible"),d("inedible",t("<=",1))],priority:5,foodtype:"meat",health:3,hunger:37.5,perish:q,sanity:5,temperature:40,temperatureduration:15,cooktime:2},mandrakesoup:{name:"Mandrake Soup",test:function(a,c,b){return c.mandrake},requirements:[w("mandrake")],priority:10,foodtype:"veggie",health:100,hunger:150,perish:e,sanity:5,cooktime:3},baconeggs:{name:"Bacon and Eggs",test:function(a,c,b){return b.egg&&1<b.egg&&b.meat&&1<b.meat&&!b.veggie},requirements:[d("egg",
t(">",1)),d("meat",t(">",1)),n(d("veggie"))],priority:10,foodtype:"meat",health:20,hunger:75,perish:D,sanity:5,cooktime:2},meatballs:{name:"Meatballs",test:function(a,c,b){return b.meat&&!b.inedible},requirements:[d("meat"),n(d("inedible"))],priority:-1,foodtype:"meat",health:3,hunger:62.5,perish:h,sanity:5,cooktime:.75},bonestew:{name:"Meaty Stew",test:function(a,c,b){return b.meat&&3<=b.meat&&!b.inedible},requirements:[d("meat",t(">=",3)),n(d("inedible"))],priority:0,foodtype:"meat",health:12,hunger:150,
perish:h,sanity:5,cooktime:.75},perogies:{name:"Pierogi",test:function(a,c,b){return b.egg&&b.meat&&b.veggie&&!b.inedible},requirements:[d("egg"),d("meat"),d("veggie"),n(d("inedible"))],priority:5,foodtype:"meat",health:40,hunger:37.5,perish:D,sanity:5,temperature:40,temperatureduration:10,cooktime:1},turkeydinner:{name:"Turkey Dinner",test:function(a,c,b){return c.drumstick&&1<c.drumstick&&b.meat&&1<b.meat&&(b.veggie||b.fruit)},requirements:[w("drumstick",t(">",1)),d("meat",t(">",1)),I(d("veggie"),
d("fruit"))],priority:10,foodtype:"meat",health:20,hunger:75,perish:e,sanity:5,cooktime:3},ratatouille:{name:"Ratatouille",test:function(a,c,b){return!b.meat&&b.veggie&&!b.inedible},requirements:[n(d("meat")),d("veggie"),n(d("inedible"))],priority:0,foodtype:"veggie",health:3,hunger:25,perish:q,sanity:5,temperature:-40,temperatureduration:5,cooktime:1},jammypreserves:{name:"Fist Full of Jam",test:function(a,c,b){return b.fruit&&!b.meat&&!b.veggie&&!b.inedible},requirements:[d("fruit"),n(d("meat")),
n(d("veggie")),n(d("inedible"))],priority:0,foodtype:"veggie",health:3,hunger:37.5,perish:q,sanity:5,cooktime:.5},fruitmedley:{name:"Fruit Medley",test:function(a,c,b){return b.fruit&&3<=b.fruit&&!b.meat&&!b.veggie},requirements:[d("fruit",t(">=",3)),n(d("meat")),n(d("veggie"))],priority:0,foodtype:"veggie",health:20,hunger:25,perish:e,sanity:5,cooktime:.5},fishtacos:{name:"Fish Tacos",test:function(a,c,b){return b.fish&&(c.corn||c.corn_cooked)},requirements:[d("fish"),B("corn")],priority:10,foodtype:"meat",
health:20,hunger:37.5,perish:e,sanity:5,cooktime:.5,tags:["monstermeat"]},waffles:{name:"Waffles",test:function(a,c,b){return c.butter&&(c.berries||c.berries_cooked)&&b.egg},requirements:[w("butter"),B("berries"),d("egg")],priority:10,foodtype:"veggie",health:60,hunger:37.5,perish:e,sanity:5,cooktime:.5},monsterlasagna:{name:"Monster Lasagna",test:function(a,c,b){return b.monster&&2<=b.monster&&!b.inedible},requirements:[d("monster",t(">=",2)),n(d("inedible"))],priority:10,foodtype:"meat",health:-20,
hunger:37.5,perish:e,sanity:-20,cooktime:.5},powcake:{name:"Powdercake",test:function(a,c,b){return c.twigs&&c.honey&&(c.corn||c.corn_cooked)},requirements:[w("twigs"),w("honey"),B("corn")],priority:10,foodtype:"veggie",health:-3,hunger:0,perish:9E6,sanity:0,cooktime:.5,tags:["honeyed"]},unagi:{name:"Unagi",test:function(a,c,b){return c.cutlichen&&(c.eel||c.eel_cooked)},requirements:[w("cutlichen"),B("eel")],priority:20,foodtype:"veggie",health:20,hunger:18.75,perish:h,sanity:5,cooktime:.5},wetgoop:{name:"Wet Goop",
test:function(a,c,b){return!0},requirements:[],trash:!0,priority:-2,health:0,hunger:0,perish:e,sanity:0,cooktime:.25},flowersalad:{name:"Flower Salad",test:function(a,c,b){return c.cactusflower&&b.veggie&&2<=b.veggie&&!b.meat&&!b.inedible&&!b.egg&&!b.sweetener&&!b.fruit},requirements:[w("cactusflower"),d("veggie",t(">=",2)),n(d("meat")),n(d("inedible")),n(d("egg")),n(d("sweetener")),n(d("fruit"))],priority:10,foodtype:"veggie",health:40,hunger:12.5,perish:e,sanity:5,cooktime:.5,dlc:"giants"},icecream:{name:"Ice Cream",
test:function(a,c,b){return b.frozen&&b.dairy&&b.sweetener&&!b.meat&&!b.veggie&&!b.inedible&&!b.egg},requirements:[d("frozen"),d("dairy"),d("sweetener"),n(d("meat")),n(d("veggie")),n(d("inedible")),n(d("egg"))],priority:10,foodtype:"veggie",health:0,hunger:25,perish:x,sanity:50,temperature:-40,temperatureduration:15,cooktime:.5,dlc:"giants"},watermelonicle:{name:"Melonsicle",test:function(a,c,b){return c.watermelon&&b.frozen&&c.twigs&&!b.meat&&!b.veggie&&!b.egg},requirements:[w("watermelon"),d("frozen"),
w("twigs"),n(d("meat")),n(d("veggie")),n(d("egg"))],priority:10,foodtype:"veggie",health:3,hunger:12.5,perish:x,sanity:20,temperature:-40,temperatureduration:10,cooktime:.5,dlc:"giants"},trailmix:{name:"Trail Mix",test:function(a,c,b){return c.acorn_cooked&&b.seed&&1<=b.seed&&(c.berries||c.berries_cooked)&&b.fruit&&1<=b.fruit&&!b.meat&&!b.veggie&&!b.egg&&!b.dairy},requirements:[w("acorn_cooked"),d("seed",t(">=",1)),B("berries"),d("fruit",t(">=",1)),n(d("meat")),n(d("veggie")),n(d("egg")),n(d("dairy"))],
priority:10,foodtype:"veggie",health:30,hunger:12.5,perish:q,sanity:5,cooktime:.5,dlc:"giants"},hotchili:{name:"Spicy Chili",test:function(a,c,b){return b.meat&&b.veggie&&1.5<=b.meat&&1.5<=b.veggie},requirements:[d("meat",t(">=",1.5)),d("veggie",t(">=",1.5))],priority:10,foodtype:"meat",health:20,hunger:37.5,perish:h,sanity:0,temperature:40,temperatureduration:15,cooktime:.5,dlc:"giants"},guacamole:{name:"Guacamole",test:function(a,c,b){return c.mole&&c.cactusmeat&&!b.fruit},requirements:[w("mole"),
w("cactusmeat"),n(d("fruit"))],priority:10,foodtype:"meat",health:20,hunger:37.5,perish:h,sanity:0,cooktime:.5,dlc:"giants"}},O=function(){var a,c,b=/^tag[: ]/,v=/^tag:? */,d,l=/^recipe[: ]/,f=/^recipe:? */,u,e=/^ingredient[: ]/,ta=/^ingredient:? */,k,Z,s=!1,ua=function(b){!s&&b.uncookable?b.match=0:0===b.lowerName.indexOf(a)||b.raw&&0===b.raw.lowerName.indexOf(a)?b.match=3:0===Z.test(b.lowerName)?b.match=2:k.test(b.lowerName)?b.match=1:b.match=0;return b.match},h=function(a){return a.match=a[c]+
0||0},n=function(a){for(var b=0,c,l=!0;b<d.length;){c=d[b].test(null,a.nameObject,a);if(d[b].cancel){if(!c){l=!0;break}}else c&&(l=!1);b++}return a.match=l?0:1},va=function(a){for(var b=0,c,l=!0;b<a.requirements.length;){c=a.requirements[b].test(null,u.nameObject,u);if(a.requirements[b].cancel){if(!c){l=!0;break}}else c&&(l=!1);b++}return a.match=l?0:1},q=function(b){return b.match=b.lowerName===a?1:0},p=function(b){return b.match=b.lowerName===a||b.raw&&b.raw.lowerName===a||b.cook&&b.cook.lowerName===
a?1:0},E=function(a,b){var c,l;return a.match===b.match?(c=a.raw?a.raw.name:a.name,l=b.raw?b.raw.name:b.name,c!==l?c>l?1:c<l?-1:0:a.name===b.name?0:a.raw===b?1:-1):b.match-a.match};return function(z,t,C){s=!!C;a=t.toLowerCase();if(b.test(a))return c=a.split(v)[1],z.filter(h).sort(E);if(l.test(a))return(d=m.byName(a.split(f)[1].toLowerCase()))?(d=d.requirements,z.filter(n).sort(E)):[];if(e.test(a))return(u=g.byName(a.split(ta)[1].toLowerCase()))?z.filter(va).sort(E):[];if(0===a.indexOf("*"))return a=
a.substring(1),z.filter(q).sort(E);if(0===a.indexOf("~"))return a=a.substring(1),z.filter(p).sort(E);Z=new RegExp("\\b"+a+".*");k=new RegExp("\\b"+a.split("").join(".*")+".*");return z.filter(ua).sort(E)}}(),T=function(a,c,b){var v,d,l;for(v=0;v<a.length;v++)if(l=a[v],null!==l)for(d in c[l.id]=1+(c[l.id]||0),l)l.hasOwnProperty(d)&&"perish"!==d&&!isNaN(l[d])?b[d]=l[d]+(b[d]||0):"perish"===d&&(b[d]=Math.min(b[d]||D,l[d]))},aa=function(){var a,c;return function(b,v,d,l){var f,u;b.length=0;a={};c={};
T(v,a,c);for(v=0;v<m.length;v++){u=!1;for(f=0;f<m[v].requirements.length;f++)if(m[v].requirements[f].test(null,a,c))m[v].requirements[f].cancel||(u=!0);else if(!l&&m[v].requirements[f].cancel){u=!1;break}else if(l&&!m[v].requirements[f].cancel){u=!1;break}!u||d&&-1!==d.indexOf(m[v])||b.push(m[v])}c.img="";c.name="Combined";return b}}(),wa=function(){var a=[],c,b;return function(v){a.length=0;c={};b={};T(v,c,b);for(v=0;v<m.length;v++)m[v].test(null,c,b)&&a.push(m[v]);a.sort(function(a,b){return b.priority-
a.priority});b.img="";b.name="Combined";a.unshift(b);return a}}(),M=function(){var a=document.createElement("canvas"),c=a.getContext&&a.toDataURL&&a.getContext("2d"),b=document.createElement("canvas"),v=b.getContext&&b.getContext("2d"),d={},l={},f=!!c,u=[],e=function(e){var s=function(e,s){c.clearRect(0,0,64,64);c.drawImage(s,0,0,64,64);v.clearRect(0,0,32,32);v.drawImage(s,0,0,32,32);try{d[e]=a.toDataURL(),l[e]=b.toDataURL()}catch(Z){f=!1}u.filter(function(a){return a.url===e}).forEach(function(a){a.url===
e&&(delete a.img.dataset.pending,J&&a.img.removeAttribute("data-pending"),a.img.src=32===a.d?l[e]||e:d[e]||e)});u=u.filter(function(a){return a.url!==e})};return function(a){s(e,a.target)}},m=function(a,b,c){a.dataset.pending=b;J&&a.setAttribute("data-pending",b);u.push({url:b,img:a,d:c})},g=function(a,b){var c=new Image,v;f?d[a]?c.src=32===b?l[a]:d[a]:(null!==d[a]&&(d[a]=null,v=new Image,v.addEventListener("load",e(a),!1),v.src=a),m(c,a,b)):c.src=a;return c};a.width=64;a.height=64;b.width=32;b.height=
32;g.queue=m;return g}(),P=function(){var a=/\[([^\|]*)\|([^\|\]]*)\|?([^\|\]]*)\]/,c=/([^\|]\]\[[^\|]+\|[^\|\]]+)\|?([^\|\](?:left)]*)(?=\])/g,b=/(\[[^\|]+\|[^\|\]]+)\|?([^\|\]]*)(?=\]\[)(?!\]\[\|)/g,d=function(a,b,c){return b+"|"+(0===c.length?"left":c+" left")},f=function(a,b,c){return b+"|"+(0===c.length?"right":c+" right")},l=/_(\w)/g,e=function(a,b){return" "+b.toUpperCase()};return function(u){var m=u&&u.replace(c,d).replace(c,d).replace(b,f);u=m&&m.split(a);var g,k,h,s;if(u&&1!==u.length)for(m=
document.createDocumentFragment(),m.appendChild(document.createTextNode(u[0])),g=1;g<u.length;g+=4)""===u[g]&&""===u[g+1]?m.appendChild(document.createElement("br")):(k=document.createElement("span"),k.className=""===u[g+2]?"link":"link "+u[g+2],k.dataset.link=u[g],J&&k.setAttribute("data-link",u[g]),u[g+1]&&0===u[g+1].indexOf("img/")?(k.appendChild(document.createTextNode(u[g+1].split(" ").slice(1).join(" "))),h=u[g+1].split(" ")[0],s=M(h,32),s.title=(h.substr(4,1).toUpperCase()+h.substr(5).replace(l,
e)).split(".")[0],k.appendChild(s)):k.appendChild(document.createTextNode(u[g+1]?u[g+1]:u[g])),m.appendChild(k)),m.appendChild(document.createTextNode(u[g+3]));return m}}(),k,h=0,ba=document.getElementById("main"),xa=document.getElementById("food"),ya=document.getElementById("recipes"),za=document.getElementById("navbar"),J=!1,x={giants:{name:"Reign of Giants",img:"img/reign_of_giants_dlc.png"}};document.documentElement.dataset||(J=!0,Object.defineProperty(Element.prototype,"dataset",{get:function(){this.ds||
(this.ds={},Array.prototype.forEach.call(this.attributes,function(a){0===a.name.indexOf("data-")&&(this.ds[a.name.substring(5)]=a.value)},this));return this.ds}}));document.getElementById("stalehealth").appendChild(document.createTextNode(Math.round(333)/10+"%"));document.getElementById("stalehunger").appendChild(document.createTextNode(Math.round(667)/10+"%"));document.getElementById("spoiledhunger").appendChild(document.createTextNode(Math.round(500)/10+"%"));document.getElementById("spoiledsanity").appendChild(document.createTextNode(10));
document.getElementById("perishground").appendChild(document.createTextNode(Math.round(1500)/10+"%"));document.getElementById("perishwinter").appendChild(document.createTextNode(Math.round(750)/10+"%"));document.getElementById("perishsummer").appendChild(document.createTextNode(Math.round(1250)/10+"%"));document.getElementById("perishfridge").appendChild(document.createTextNode(Math.round(500)/10+"%"));q=function(a,c){return"[tag:"+a+"|"+(c||a)+"]"};for(k in g)if(g.hasOwnProperty(k)){var f=g[k];f.match=
0;f.lowerName=f.name.toLowerCase();f.id=k;f.nameObject={};f.nameObject[k]=1;f.img="img/"+f.name.replace(/ /g,"_").toLowerCase()+".png";-1!==k.indexOf("_cooked")&&(f.cooked=!0);g[k+"_cooked"]&&(f.cook=g[k+"_cooked"],g[k+"_cooked"].raw=f);f.info=[];e=f.info;f.fruit&&e.push(q("fruit")+(1===f.fruit?"":"\u00d7"+f.fruit));f.veggie&&e.push(q("veggie","vegetable")+(1===f.veggie?"":"\u00d7"+f.veggie));f.meat&&e.push(q("meat")+(1===f.meat?"":"\u00d7"+f.meat));f.egg&&e.push(q("egg")+(1===f.egg?"":"\u00d7"+f.egg));
f.fish&&e.push(q("fish"));f.magic&&e.push(q("magic"));f.decoration&&e.push(q("decoration"));f.inedible&&e.push(q("inedible"));f.monster&&e.push(q("monster","monster food"));f.sweetener&&e.push(q("sweetener"));f.fat&&e.push(q("fat"));f.dairy&&e.push(q("dairy"));f.comment&&e.push(f.comment);g[h++]=f}g.length=h;h=0;for(k in m)m.hasOwnProperty(k)&&(m[k].match=0,m[k].name=m[k].name||k,m[k].id=k,m[k].lowerName=m[k].name.toLowerCase(),m[k].weight=m[k].weight||1,m[k].priority=m[k].priority||0,m[k].img="img/"+
m[k].name.replace(/ /g,"_").toLowerCase()+".png",m[k].requirements&&(m[k].requires=P(m[k].requirements.join("; ")+(m[k].dlc?"; [tag:dlc|"+x[m[k].dlc].img+"] DLC":""))),m[h++]=m[k]);m.length=h;m.forEach=Array.prototype.forEach;m.filter=Array.prototype.filter;m.sort=Array.prototype.sort;m.byName=function(a){for(var c=this.length;c--;)if(this[c].lowerName===a)return this[c]};var h=function(a,c){return a+"[recipe:"+c.name+"|"+c.img+"]"},U=function(a,c,b){return 1===c?a:a+(b||"s")};for(k in g)g.hasOwnProperty(k)&&
isNaN(k)&&isNaN(g[k])&&(f=g[k],e=f.info,f.cooked&&e.push("from [*"+f.raw.name+"|"+f.raw.img+"]"),f.cook&&e.push("cook: [*"+f.cook.name+"|"+f.cook.img+"]"),f.dry&&(f.dry instanceof Object||(f.dry=g[f.dry]),e.push("dry in "+f.drytime/r+" "+U("day",f.drytime/r)+": [*"+f.dry.name+"|"+f.dry.img+"]")),f.dlc&&e.push("requires [tag:dlc|"+x[f.dlc].img+"] DLC"),f.info=e.join("; "),f.uncookable?f.info+="[|]cannot be added to crock pot":(f.recipes=[],m.forEach(function(a){for(var c=!1,b=a.requirements,d=b.length;d--;)if(b[d].test(null,
f.nameObject,f))b[d].cancel||c||(c=!0);else if(b[d].cancel){c=!1;break}c&&f.recipes.push(a)}),0<f.recipes.length&&(f.ingredient=!0,f.info+=f.recipes.reduce(h,"[|][ingredient:"+f.name+"|Recipes] "))),f.info=P(f.info));g.forEach=Array.prototype.forEach;g.filter=Array.prototype.filter;g.sort=Array.prototype.forEach;g.byName=function(a){for(var c=this.length;c--;)if(this[c].lowerName===a)return this[c]};var N="id health hunger fruit veggie meat egg fish magic decoration inedible monster sweetener fat dairy".split(" "),
Aa=function(a,c,b){var d=b||[0,0,0,0],f,l=0,e=0;return function(b){for(var g;b--&&1<a;){c(d);d[0]++;for(g=0;d[g]>=a;)g++,d[g]++;f=4;for(l=0;f--;)d[f]>=a?d[f]=l:d[f]>l&&(l=d[f]);if(4===g)return!1;e++}return!0}};L=F=void 0;g.filter(function(a){return!a.uncookable&&!a.skip&&(a.ideal||!a.cook&&(!a.raw||!a.raw.ideal))}).map(function(a){for(var c={},b=N.length;b--;)a.hasOwnProperty(N[b])&&(c[N[b]]=a[N[b]]);return c});F=m.filter(function(a){return!a.trash}).sort(function(a,c){return c.priority-a.priority});
L=F.map(function(a){return a.test});F.map(function(a){return a.test.toString()});F.map(function(a){return a.priority});var Ba=function(a,c,b,d){var f=L.length,l=[],e=0,g,m=60,k=function(b){return a[b]},h=Aa(a.length,function(a){a=a.map(k);var b,c=null,d={},v={},e=null,g=!1,m=L,u=F;T(a,d,v);for(b=0;b<f&&(null===c||u[b].priority>=c);b++)m[b](null,d,v)&&(null!==e&&(g=!0,e.multiple=!0),e={recipe:u[b],ingredients:a,tags:{health:v.health,hunger:v.hunger},multiple:g},l.push(e),c=u[b].priority)}),n=function(){var a=
!1,f=Date.now();for(h(m)?setTimeout(n,0):a=!0;e<l.length&&l[e];e++)c(l[e]);g!==Date.now()-f&&(g=Date.now()-f+1,m=38/g*m+1|0);b&&b();a&&d&&d()};n()},Q;(function(){var a=za.getElementsByTagName("li"),c={},b={},d,f,l=function(a){Q(a.target.dataset.tab)},e;Q=function(a){f.className="";f=c[a];d.style.display="none";d=b[a];f.className="selected";d.style.display="block"};for(k=0;k<a.length;k++)e=a[k],e.dataset.tab&&(c[e.dataset.tab]=e,b[e.dataset.tab]=document.getElementById(e.dataset.tab),b[e.dataset.tab].style.display=
"none",e.addEventListener("selectstart",function(a){a.preventDefault()},!1),e.addEventListener("click",l,!1));f=c.simulator;d=b.simulator;window.localStorage&&localStorage.foodGuideState&&("["===localStorage.foodGuideState[0]?(a={},a.pickers=JSON.parse(localStorage.foodGuideState),localStorage.foodGuideState=JSON.stringify(a)):a=JSON.parse(localStorage.foodGuideState),a.activeTab&&c[a.activeTab]&&(f=c[a.activeTab],d=b[a.activeTab]));f.className="selected";d.style.display="block";window.addEventListener("beforeunload",
function(){var a;window.localStorage&&(localStorage.foodGuideState||(localStorage.foodGuideState="{}"),a=JSON.parse(localStorage.foodGuideState),a.activeTab=f.dataset.tab,localStorage.foodGuideState=JSON.stringify(a))})})();var Ca=function(a){a.dataset.pending&&M.queue(a,a.dataset.pending,32)},$=function(a){var c,b,d,f=document.createElement("tr"),l;for(c=1;c<arguments.length;c++)b=document.createElement(a),l=(d=arguments[c])&&d.indexOf?d:d.toString(),d instanceof DocumentFragment?(b.appendChild(d.cloneNode(!0)),
Array.prototype.forEach.call(b.getElementsByTagName("img"),Ca)):0===l.indexOf("img/")?(d=M(l),b.appendChild(d)):b.appendChild(document.createTextNode(l)),f.appendChild(b);return f},R=function(a,c,b,d,f,l,e,g,m,k){var h,n,s,q=!1,t,y,r,w=function(a,c,d){k&&!(r<k)||g&&!g(a)||(c=b(a),e&&e(a,d)&&(c.className="highlighted",t||(t=c),y=c),h.appendChild(c),r++)},p=function(b,d,e){var C,g;if(d||b&&""!==b.target.dataset.sort||s){C=d||b&&b.target.dataset.sort||s;f&&(g=c.shift());"name"===C?c.sort(function(a,
b){var c=a.raw?a.raw.name:a.name,d=b.raw?b.raw.name:b.name;return c!==d?c>d?1:c<d?-1:0:a.name===b.name?0:a.raw===b?1:-1}):c.sort(function(a,b){var c=a[C],d=b[C];return isNaN(c)||isNaN(d)?isNaN(c)&&isNaN(d)?0:isNaN(c)?1:-1:d-c});if(d||b)s===C?q=!q:(s=C,q=!1);q&&c.reverse();f&&c.unshift(g)}b=document.createElement("tr");for(n in a)d=document.createElement("th"),-1===n.indexOf(":")?d.appendChild(document.createTextNode(n)):(d.appendChild(document.createTextNode(n.split(":")[0])),d.title=n.split(":")[1]),
a[n]&&(a[n]===s&&(d.style.background=q?"#555":"#ccc",d.style.color=q?"#ccc":"#555",d.style.borderRadius="4px"),d.style.cursor="pointer",d.dataset.sort=a[n],d.addEventListener("click",p,!1)),b.appendChild(d);d=h;h=document.createElement("table");h.appendChild(b);y=t=null;r=0;c.forEach(w);l&&(h.className="links",Array.prototype.forEach.call(h.getElementsByClassName("link"),function(a){a.addEventListener("click",l,!1)}));d&&d.parentNode.replaceChild(h,d);e&&(t&&t.offsetTop+h.offsetTop+ba.offsetTop+t.offsetHeight>
window.scrollY+window.innerHeight?t.scrollIntoView(!0):y&&y.offsetTop+h.offsetTop+ba.offsetTop<window.scrollY&&y.scrollIntoView(!1))};d?p(null,d):p();h.update=function(a){p(null,null,a)};h.setMaxRows=function(a){k=a;this.update()};return h},A=function(a){return isNaN(a)?"":0<a?"+"+a:a},ca=function(a,c){return a<c?(c-a)/Math.abs(a):a>c?-(a-c)/Math.abs(a):0},da=function(a,c){return isNaN(a)||a===c?"":" ("+A((100*(a<c?(c-a)/Math.abs(a):a>c?-(a-c)/Math.abs(a):0)).toFixed(0))+"%)"},ea=function(a){return $("td",
a.img?a.img:"",a.name,A(a.health),A(a.hunger),isNaN(a.sanity)?"":A(a.sanity),isNaN(a.perish)?"Never":a.perish/r+" "+U("day",a.perish/r),a.info||"")},X=function(a,c,b){return $("td",a.img?a.img:"",a.name,A(a.health)+da(c,a.health),A(a.hunger)+da(b,a.hunger),isNaN(a.sanity)?"":A(a.sanity),isNaN(a.perish)?"Never":a.perish/r+" "+U("day",a.perish/r),(a.cooktime*ga+.5|0)+" secs",a.priority||"0",a.requires||"")};(function(){var a,c=[],b=[],d=R({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",
"Perish:Time to turn to rot":"perish",Info:""},Array.prototype.slice.call(g),ea,"name",!1,function(l){l=l.target?"IMG"===l.target.tagName?l.target.parentNode.dataset.link:l.target.dataset.link:l;"recipe:"===l.substring(0,7)||"ingredient:"===l.substring(0,11)?(Q("crockpot"),"recipe:"===l.substring(0,7)&&(l="*"+l.substring(7)),b=O(m,l),f.update(!0)):(a!==l?(a=l,c=O(g,l)):(a="",c.length=0),d.update(!0))},function(a){return-1!==c.indexOf(a)}),f=R({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",
"Perish:Time to turn to rot":"perish","Cook Time":"cooktime","Priority:One of the highest priority recipes for a combination will be made":"priority","Requires:Dim, struck items cannot be used":""},Array.prototype.slice.call(m),X,"name",!1,function(b){b=b.target?"IMG"===b.target.tagName?b.target.parentNode.dataset.link:b.target.dataset.link:b;Q("foodlist");a=b;c=O(g,b);d.update(!0)},function(a){return-1!==b.indexOf(a)});xa.appendChild(d);ya.appendChild(f)})();var Da=function(a,c){return a+"[ingredient:"+
g[c.id].name+"|"+g[c.id].img+"]"},fa=function(a){var c=document.createElement("button");c.appendChild(document.createTextNode("Calculate efficient recipes (may take some time)"));c.className="makablebutton";c.addEventListener("click",function(){var b=[],d=a?a.length:null,f,e,h=[],k,n,q,t,r,s=[],w=[],W,y,x,B=function(a){return-1!==w.indexOf(a.id)},p=function(a){return-1!==this.indexOf(g[a])},E=function(a){-1!==w.indexOf(a.target.dataset.id)&&w.splice(w.indexOf(a.target.dataset.id),1);-1!==s.indexOf(a.target.dataset.id)?
(s.splice(s.indexOf(a.target.dataset.id),1),a.target.className=""):(s.push(a.target.dataset.id),a.target.className="selected");x.update()},z=function(a){-1!==s.indexOf(a.target.dataset.id)&&s.splice(s.indexOf(a.target.dataset.id),1);-1!==w.indexOf(a.target.dataset.id)?(w.splice(w.indexOf(a.target.dataset.id),1),a.target.className=""):(w.push(a.target.dataset.id),a.target.className="excluded");x.update();a.preventDefault()},H=function(a){e&&(e.className="");f===a.target.dataset.recipe?f=e=null:(f=
a.target.dataset.recipe,e=a.target,a.target.className="selected");x.update()};null===d&&(d=g.length,a=g);for(;d--;)a[d].cook&&-1===b.indexOf(a[d].cook)&&!a[d].cook.uncookable&&b.push(a[d].cook),a[d].uncookable||!a[d].ideal&&a[d].cook&&!a[d].cook.uncookable||-1!==b.indexOf(a[d])||b.push(a[d]);W=[];x=R({"":"",Name:"name",Health:"health","Health+:Health gained compared to ingredients":"healthpls",Hunger:"hunger","Hunger+:Hunger gained compared to ingredients":"hungerpls",Ingredients:""},W,function(a){var b=
a.recipe;return $("td",b.img?b.img:"",b.name,A(b.health),A(a.healthpls)+" ("+A(100*a.healthpct|0)+"%)",A(b.hunger),A(a.hungerpls)+" ("+A(100*a.hungerpct|0)+"%)",P(a.ingredients.reduce(Da,"")+(a.multiple?"*":"")))},"hungerpls",!1,null,null,function(a){return(!f||a.recipe.name===f)&&(!w.length||!a.ingredients.some(B))&&(!s.length||s.every(p,a.ingredients))},0,15);y=document.createElement("div");n=document.createElement("div");n.appendChild(document.createTextNode("Computing combinations.."));d=document.createElement("div");
d.appendChild(document.createTextNode("* combination has multiple possible results"));y.appendChild(n);k=document.createElement("div");k.className="recipeFilter";y.appendChild(k);q=document.createElement("div");q.className="foodFilter";b.forEach(function(a){var b=M(a.img,32);b.dataset.id=a.id;b.addEventListener("click",E,!1);b.addEventListener("contextmenu",z,!1);b.title=a.name;q.appendChild(b)});y.appendChild(q);t=document.createElement("div");r=document.createElement("input");r.type="text";r.placeholder=
"use custom filter";r.className="customFilterInput";t.appendChild(r);y.appendChild(x);c.parentNode.replaceChild(y,c);y.appendChild(d);Ba(b,function(a){var b,c;if(-1===h.indexOf(a.recipe.name)){for(b=0;b<h.length&&!(a.recipe.name<h[b]);b++);h.splice(b,0,a.recipe.name);c=M(m.byName(h[b].toLowerCase()).img);c.dataset.recipe=h[b];c.addEventListener("click",H,!1);c.title=a.recipe.name;b<k.childNodes.length?k.insertBefore(c,k.childNodes[b]):k.appendChild(c)}a.name||(a.name=a.recipe.name,a.health=a.recipe.health,
a.ihealth=a.tags.health,a.healthpls=a.recipe.health-a.tags.health,a.hunger=a.recipe.hunger,a.ihunger=a.tags.hunger,a.hungerpls=a.recipe.hunger-a.tags.hunger,a.healthpct=ca(a.tags.health,a.recipe.health),a.hungerpct=ca(a.tags.hunger,a.recipe.hunger),a.sanity=a.recipe.sanity,a.perish=a.recipe.perish);W.push(a)},function(){n.firstChild.textContent="Found "+W.length+" valid recipes.."},function(){x.setMaxRows(30);n.firstChild.textContent="Found "+W.length+" valid recipes. Showing top 30 for selected recipe using all selected ingredients. Right-click to exclude ingredients."})},
!1);return c};document.getElementById("statistics").appendChild(fa());var Ea=function(a,c){return a.reduce(function(a,d){return Math.max(a,d[c]||0)},-1E5)};window.food=g;window.recipes=m;window.matchingNames=O;var V=function(a,c){var b=!1;null!==c?a.dataset.id=c.id:a.nextSibling&&null!==H(a.nextSibling)?(V(a,H(a.nextSibling)),V(a.nextSibling,null),b=!0):a.dataset.id=null;b||(null!==c?a.firstChild?a.replaceChild(M(c.img),a.firstChild):a.appendChild(M(c.img)):a.firstChild&&a.removeChild(a.firstChild),
a.title=c?c.name:"")},H=function(a){return g[a.dataset.id]||m[a.dataset.id]||null};(function(){for(var a=document.getElementsByClassName("ingredientpicker"),c=a.length;c--;)(function(){var b=document.createElement("span"),d,f=document.createElement("div"),e=document.createElement("ul"),h=a[c],k=c,n,q="recipes"===h.dataset.type?m:g,t=!h.dataset.cookable,r=h.nextSibling,s=r.getElementsByClassName("ingredient"),w,x=[],y,A=[],B=[],p=null,E=!1,z=document.getElementById("results"),D=document.getElementById("discoverfood"),
C=document.getElementById("discover"),F=document.getElementById("makable"),K=document.createElement("span"),I=function(a,b){for(var c=a;c.previousSibling;)if(c=c.previousSibling,b(c))return c;return null},L=function(a,b){for(var c=a;c.nextSibling;)if(c=c.nextSibling,b(c))return c;return null},J=!1,N=function(a){var b=g[a]||m[a]||null;if(w){for(a=0;a<s.length;a++)if(null===H(s[a]))return V(s[a],b),E&&y(),a;return-1}-1===s.indexOf(a)&&(s.push(a),a=document.createElement("span"),a.className="ingredient",
V(a,b),a.addEventListener("click",P,!1),r.appendChild(a),E&&y());return 1},Q=function(a){-1!==N(("IMG"===a.target.tagName?a.target.parentNode:a.target).dataset.id)&&a&&a.preventDefault&&a.preventDefault()},S=function(a){var b=M(a.img,32),c=document.createElement("span");c.appendChild(b);c.appendChild(document.createTextNode(a.name));c.dataset.id=a.id;-1!==x.indexOf(a)&&(c.style.opacity=.5);c.addEventListener("mousedown",Q,!1);this.appendChild(c);this.dataset.length++},T=function(a){-1!==x.indexOf(g[a.dataset.id])?
a.style.opacity||(a.style.opacity=.5):a.style.opacity&&a.style.removeProperty("opacity")},P=function(a){var b="IMG"===a.target.tagName?a.target.parentNode:a.target;if(w){if(null!==H(b))return V(b,null),y(),b.dataset.id}else return a=s.indexOf(b.dataset.id),s.splice(a,1),r.removeChild(b),y(),s[a]||null},Y=function(){var a;d.splitTag();a=O(q,d.getSearch(),t);f.removeChild(e);e=document.createElement("div");e.dataset.length=0;a.forEach(S,e);f.appendChild(e);p=null},U=function(a){a="IMG"===a.target.tagName?
a.target.parentNode.dataset.link:a.target.dataset.link;var b=O(q,a,t);1===b.length?N(b[0].id):(h.value=a,Y())},G;"ingredients"===r.id?y=function(){var a,b,c,d;x=Array.prototype.map.call(s,function(a){return H(a)});a=wa(x);b=a[0].health;c=a[0].hunger;d=R({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish","Cook Time":"cooktime","Priority:One of the highest priority recipes for a combination will be made":"priority","Requires:Dim, struck items cannot be used":""},
a,function(a){return X(a,b,c)},"priority",!0,U,function(a,b){return 0<b.length&&a.priority===Ea(b,"priority")});z.firstChild&&z.removeChild(z.firstChild);z.firstChild&&(z.removeChild(z.firstChild),z.removeChild(z.firstChild));z.appendChild(d);null!==x[0]&&(aa(A,x,a),0<A.length&&(z.appendChild(document.createTextNode("Add more ingredients to make:")),d=R({"":"",Name:"name","Health:(% more than ingredients)":"health","Hunger:(% more than ingredients)":"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish",
"Cook Time":"cooktime","Priority:One of the highest priority recipes for a combination will be made":"priority","Requires:Dim, struck items cannot be used":""},A,function(a){return X(a,b,c)},"priority",!1,U),z.appendChild(d)));e&&e.firstChild&&Array.prototype.forEach.call(e.getElementsByTagName("span"),T)}:"inventory"===r.id&&(y=function(){var a;x=Array.prototype.map.call(r.getElementsByClassName("ingredient"),function(a){return H(a)});D.firstChild&&D.removeChild(D.firstChild);C.firstChild&&C.removeChild(C.firstChild);
F.firstChild&&F.removeChild(F.firstChild);0<x.length&&(a=R({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish",Info:""},x,ea,"name"),D.appendChild(a),aa(B,x,null,!0),0<B.length&&(a=R({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish","Cook Time":"cooktime","Priority:One of the highest priority recipes for a combination will be made":"priority","Requires:Dim, struck items cannot be used":""},
B,X,"name"),C.appendChild(a),F.appendChild(fa(x))));e&&e.firstChild&&Array.prototype.forEach.call(e.getElementsByTagName("span"),T)});0!==s.length?(w=!0,Array.prototype.forEach.call(s,function(a){V(a,null);a.addEventListener("click",P,!1)})):(s=[],w=!1);window.localStorage&&localStorage.foodGuideState&&(n=JSON.parse(localStorage.foodGuideState).pickers)&&n[k]&&n[k].forEach(function(a){g[a]&&N(a)});E=!0;b.className="searchselector retracted";b.appendChild(document.createTextNode("name"));d=function(){var a=
document.createElement("div"),c=!1,d=null,e=[{title:"name",prefix:"",placeholder:"Filter ingredients"},{title:"tag",prefix:"tag:",placeholder:"Meat, veggie, fruit, egg, monster..."},{title:"recipe",prefix:"recipe:",placeholder:"Find ingredients used in a recipe"}],f=e[0],g=null,k=function(){c=!1;a.style.height="0px";b.style.borderBottomLeftRadius="3px";a.style.borderTopLeftRadius="3px";null!==g&&(clearTimeout(g),g=null);b.className="searchselector retracted"},l=function(a){f=a;h.placeholder=f.placeholder;
b.firstChild.textContent=f.title},m=function(a){l(e[a.target.dataset.typeIndex]);Y();k()},n=/: */;b.addEventListener("click",function(){c?k():(null===d&&(a.style.height="auto",a.style.left=b.offsetLeft,a.style.top=b.offsetTop+b.offsetHeight,d=a.offsetHeight+"px",a.style.height="0px"),c=!0,a.style.height=d,b.style.borderBottomLeftRadius="0px",a.style.borderTopLeftRadius="0px",a.style.width="auto",a.style.width=Math.max(a.offsetWidth,b.offsetWidth+1)+"px",null!==g&&(clearTimeout(g),g=null),b.className=
"searchselector extended")},!1);b.addEventListener("selectstart",function(a){a.preventDefault()},!1);b.addEventListener("mouseout",function(){null!==g&&clearTimeout(g);g=setTimeout(k,500)},!1);b.addEventListener("mouseover",function(){null!==g&&(clearTimeout(g),g=null)},!1);a.addEventListener("mouseout",function(){null!==g&&clearTimeout(g);g=setTimeout(k,500)},!1);a.addEventListener("mouseover",function(){null!==g&&(clearTimeout(g),g=null)},!1);e.forEach(function(b,c){var d=document.createElement("div");
d.appendChild(document.createTextNode(b.title));d.dataset.typeIndex=c;d.addEventListener("click",m,!1);b.element=d;a.appendChild(d)});h.parentNode.insertBefore(b,h);a.className="searchdropdown";h.parentNode.insertBefore(a,h);return{getTag:function(){return f.title},setSearchType:function(a){l(e[a])},getSearch:function(){return f.prefix+h.value},splitTag:function(){var a;a=h.value.split(n);var b,c;if(2===a.length)for(b=a[0].toLowerCase()+":",c=a[1],a=0;a<e.length;a++)if(b===e[a].prefix){l(e[a]);h.value=
c;break}}}}();f.className="ingredientdropdown";f.appendChild(e);f.addEventListener("mousedown",function(a){a.preventDefault()},!1);(function(){var a=O(q,d.getSearch(),t);f.removeChild(e);e=document.createElement("div");e.dataset.length=0;a.forEach(S,e);f.appendChild(e)})();K.className="clearingredients";K.appendChild(document.createTextNode("clear"));K.addEventListener("click",function(){if(""===h.value&&"name"===d.getTag())for(;H(r.firstChild);)P({target:r.firstChild});else h.value="",d.setSearchType(0),
Y()},!1);K.addEventListener("mouseover",function(){""===h.value&&"name"===d.getTag()&&(K.firstChild.textContent="clear chosen ingredients")},!1);K.addEventListener("mouseout",function(){"clear"!==K.firstChild.textContent&&(K.firstChild.textContent="clear")},!1);r.parentNode.insertBefore(K,r);r.parentNode.insertBefore(f,r);h.addEventListener("keydown",function(a){var b;-1!==[16,17,37,38,39,40,13].indexOf(a.keyCode)&&(b=p,13===a.keyCode?(null===p&&(p=e.firstChild||null),null!==p&&Q({target:p})):null===
p?40===a.keyCode&&(p=e.childNodes[1]||e.firstChild||null,null!==p&&(G=p.offsetLeft+p.offsetWidth/2,a.preventDefault())):(a.preventDefault(),37===a.keyCode?(p=p.previousSibling&&p.previousSibling.offsetTop===p.offsetTop?p.previousSibling:(a=L(p,function(a){return a.offsetTop!==p.offsetTop}))?a.previousSibling:e.lastChild,null!==p&&(G=p.offsetLeft+p.offsetWidth/2)):39===a.keyCode?(p=p.nextSibling&&p.nextSibling.offsetTop===p.offsetTop?p.nextSibling:(a=I(p,function(a){return a.offsetTop!==p.offsetTop}))?
a.nextSibling:e.firstChild,null!==p&&(G=p.offsetLeft+p.offsetWidth/2)):38===a.keyCode?((a=I(p,function(a){return G>=a.offsetLeft-1&&G<=a.offsetLeft+a.offsetWidth+1}))||(a=I(e.lastChild,function(a){return G>=a.offsetLeft-1&&G<=a.offsetLeft+a.offsetWidth+1})),p=a?a:e.firstChild):40===a.keyCode&&((a=L(p,function(a){return G>=a.offsetLeft-1&&G<=a.offsetLeft+a.offsetWidth+1}))||(a=L(e.firstChild,function(a){return G>=a.offsetLeft-1&&G<=a.offsetLeft+a.offsetWidth+1})),p=a?a:e.lastChild)),p!==b&&(null!==
b&&(b.className=""),null!==p&&(p.className="selected")))},!1);h.addEventListener("keyup",function(a){-1===[16,17,37,38,39,40,13].indexOf(a.keyCode)?Y():null!==p&&a.preventDefault()},!1);h.addEventListener("focus",function(){J||(J=!0)},!1);h.addEventListener("blur",function(){J&&(J=!1)},!1);y();window.addEventListener("beforeunload",function(){var a,b;window.localStorage&&(localStorage.foodGuideState||(localStorage.foodGuideState="{}"),a=JSON.parse(localStorage.foodGuideState),a.pickers||(a.pickers=
[]),w?(b=[],b=Array.prototype.map.call(s,function(a){return(a=H(a))?a.id:null}),a.pickers[k]=b):a.pickers[k]=s,localStorage.foodGuideState=JSON.stringify(a))})})()})()})();
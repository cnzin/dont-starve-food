(function(){var L,da,pa=30,u=16*pa,pa=u/16,ea=3*u,m=6*u,l=10*u,v=15*u,G=20*u,qa=40*u,Ua=0.6666*pa,j={butter:{name:"Butter",fat:1,dairy:1,health:40,hunger:25,perish:qa,stack:40},butterflywings:{name:"Butterfly Wings",isveggie:!0,decoration:2,health:20,hunger:9.375,perish:m,stack:40},deerclopseyeball:{name:"Deerclops Eyeball",uncookable:!0,health:60,hunger:75,sanity:-15},bird_egg:{name:"Egg",egg:1,health:0,hunger:9.375,sanity:0,perish:l,stack:40,rot:"rottenegg"},bird_egg_cooked:{name:"Cooked Egg",egg:1,
precook:1,health:0,hunger:12.5,sanity:0,perish:m,stack:40},rottenegg:{name:"Rotten Egg",uncookable:!0,health:-1,hunger:-10,stack:40},fish:{name:"Fish",ismeat:!0,meat:0.5,fish:1,health:20,hunger:12.5,perish:ea,stack:40},fish_cooked:{name:"Cooked Fish",ismeat:!0,meat:0.5,fish:1,precook:1,health:40,hunger:12.5,perish:m,stack:40},froglegs:{name:"Frog Legs",ismeat:!0,meat:0.5,health:1,hunger:12.5,perish:m,sanity:-10,stack:40},froglegs_cooked:{name:"Cooked Frog Legs",ismeat:!0,meat:0.5,precook:1,health:3,
hunger:12.5,perish:l,sanity:-10,stack:40},flowerhat:{name:"Garland",health:3,hunger:0,sanity:10,perish:m,stack:1,uncookable:!0},hambat:{name:"Ham Bat",health:-8,hunger:25,sanity:-15,perish:l,stack:1,uncookable:!0},honey:{name:"Honey",sweetener:!0,health:3,hunger:9.375,perish:qa,stack:40},honeycomb:{name:"Honeycomb",sweetener:!0},mandrake:{name:"Mandrake",veggie:1,magic:1,health:60,hunger:75,stack:40},mandrake_cooked:{name:"Cooked Mandrake",uncookable:!0,veggie:1,magic:1,precook:1,health:100,hunger:150,
stack:40},monstermeat:{name:"Monster Meat",ismeat:!0,meat:1,monster:!0,health:-20,hunger:18.75,sanity:-15,perish:m,stack:20,dry:"monstermeat_dried",drytime:u},monstermeat_cooked:{name:"Cooked Monster Meat",ismeat:!0,meat:1,monster:!0,precook:1,health:-3,hunger:18.75,sanity:-10,perish:v,stack:20},monstermeat_dried:{name:"Monster Jerky",ismeat:!0,meat:1,monster:!0,dried:1,health:-3,hunger:18.75,sanity:-5,perish:G,stack:20},meat:{name:"Meat",ismeat:!0,meat:1,health:1,hunger:25,sanity:-10,perish:m,stack:20,
dry:"meat_dried",drytime:2*u},meat_cooked:{name:"Cooked Meat",ismeat:!0,meat:1,precook:1,health:3,hunger:25,sanity:0,perish:l,stack:20},meat_dried:{name:"Jerky",ismeat:!0,meat:1,dried:1,health:20,hunger:25,sanity:15,perish:G,stack:20},morsel:{name:"Morsel",ismeat:!0,meat:0.5,health:0,hunger:12.5,sanity:-10,perish:m,stack:40,drytime:u,dry:"smallmeat_dried"},morsel_cooked:{name:"Cooked Morsel",ismeat:!0,meat:0.5,precook:1,health:1,hunger:12.5,sanity:0,perish:l,stack:40},smallmeat_dried:{name:"Small Jerky",
ismeat:!0,meat:0.5,dried:1,health:8,hunger:12.5,sanity:10,perish:G,stack:40},drumstick:{name:"Drumstick",ismeat:!0,ideal:!0,meat:0.5,health:0,hunger:12.5,sanity:-10,perish:m,stack:20,drytime:u,dry:"smallmeat_dried"},drumstick_cooked:{name:"Fried Drumstick",ismeat:!0,meat:0.5,precook:1,health:1,hunger:12.5,perish:l,stack:20},red_mushroom:{name:"Red Mushroom",veggie:0.5,health:-20,hunger:12.5,sanity:0,perish:l,stack:40},green_mushroom:{name:"Green Mushroom",veggie:0.5,health:0,hunger:12.5,sanity:-50,
perish:l,stack:40},blue_mushroom:{name:"Blue Mushroom",veggie:0.5,health:20,hunger:12.5,sanity:-15,perish:l,stack:40},petals:{name:"Petals",uncookable:!0,health:1,hunger:0,sanity:-2.5,perish:m,stack:40},petals_evil:{name:"Dark Petals",uncookable:!0,health:0,hunger:0,sanity:-5,perish:m,stack:40},seeds:{name:"Seeds",uncookable:!0,health:0,hunger:4.6875,perish:qa,stack:40},seeds_cooked:{name:"Toasted Seeds",uncookable:!0,health:1,hunger:4.6875,perish:l,stack:40},spoiled_food:{name:"Rot",uncookable:!0,
health:-1,hunger:-10,stack:40},tallbirdegg:{name:"Tallbird Egg",egg:4,health:3,hunger:25},tallbirdegg_cooked:{name:"Fried Tallbird Egg",egg:4,precook:1,health:0,hunger:37.5,perish:m},trunk_summer:{name:"Koalefant Trunk",uncookable:!0,ismeat:!0,health:30,hunger:37.5,perish:m,stack:20},trunk_summer_cooked:{name:"Koalefant Trunk Steak",uncookable:!0,ismeat:!0,health:40,hunger:75,perish:v,stack:20},twigs:{name:"Twigs",inedible:1},carrot:{name:"Carrot",isveggie:!0,veggie:1,health:1,hunger:12.5,perish:l,
sanity:0,stack:40},carrot_cooked:{name:"Roasted Carrot",isveggie:!0,veggie:1,precook:1,health:3,hunger:12.5,perish:m,sanity:0,stack:40},corn:{name:"Corn",ideal:!0,isveggie:!0,veggie:1,health:3,hunger:25,perish:l,sanity:0,stack:40},corn_cooked:{name:"Popcorn",isveggie:!0,veggie:1,precook:1,health:3,hunger:12.5,perish:v,sanity:0,stack:40},pumpkin:{name:"Pumpkin",isveggie:!0,veggie:1,health:3,hunger:37.5,perish:l,sanity:0,stack:20},pumpkin_cooked:{name:"Hot Pumpkin",isveggie:!0,veggie:1,precook:1,health:8,
hunger:37.5,perish:m,sanity:0,stack:20},eggplant:{name:"Eggplant",isveggie:!0,veggie:1,health:8,hunger:25,perish:l,sanity:0,stack:20},eggplant_cooked:{name:"Braised Eggplant",isveggie:!0,veggie:1,precook:1,health:20,hunger:25,perish:m,sanity:0,stack:20},durian:{name:"Durian",isfruit:!0,monster:1,fruit:1,health:-3,hunger:25,perish:l,sanity:-5,stack:20},durian_cooked:{name:"Extra Smelly Durian",isfruit:!0,monster:1,fruit:1,precook:1,health:0,hunger:25,perish:m,sanity:-5,stack:20},pomegranate:{name:"Pomegranate",
isfruit:!0,fruit:1,health:3,hunger:9.375,perish:m,sanity:0,stack:40},pomegranate_cooked:{name:"Sliced Pomegranate",isfruit:!0,fruit:1,precook:1,health:20,hunger:12.5,perish:ea,sanity:0,stack:40},dragonfruit:{name:"Dragon Fruit",isfruit:!0,fruit:1,health:3,hunger:9.375,perish:m,sanity:0,stack:40},dragonfruit_cooked:{name:"Prepared Dragon Fruit",isfruit:!0,fruit:1,precook:1,health:20,hunger:12.5,perish:ea,sanity:0,stack:40},berries:{name:"Berries",isfruit:!0,fruit:0.5,health:0,hunger:9.375,perish:m,
sanity:0,stack:40},berries_cooked:{name:"Roasted Berries",isfruit:!0,fruit:0.5,precook:1,health:1,hunger:12.5,perish:ea,sanity:0,stack:40}},Va=function(){return this.op+this.qty},Wa={"=":function(a){return a===this.qty},">":function(a){return a>this.qty},"<":function(a){return a<this.qty},">=":function(a){return a>=this.qty},"<=":function(a){return a<=this.qty}},ra={test:function(a){return!!a},toString:function(){return""}},t=function(a,b){return{op:a,qty:b,test:Wa[a],toString:Va}},Xa=function(a,
b,c){return this.item1.test(a,b,c)||this.item2.test(a,b,c)},Ya=function(){return this.item1+" or "+this.item2},Ca=function(a,b){return{item1:a,item2:b,test:Xa,toString:Ya,cancel:a.cancel||b.cancel}},Za=function(a,b,c){return!this.item.test(a,b,c)},$a=function(){return"not "+this.item},q=function(a){return{item:a,test:Za,toString:$a,cancel:!0}},ab=function(a,b){return(b[this.name]||0)+(b[this.name+"_cooked"]||0)},bb=function(){return"[*"+j[this.name].name+"|"+j[this.name].img+" "+j[this.name].name+
"]"+(j[this.name].cook?"[*"+j[this.name].cook.name+"|"+j[this.name].cook.img+"]":"")+(j[this.name].raw?"[*"+j[this.name].raw.name+"|"+j[this.name].raw.img+"]":"")+(this.qty?this.qty:"")},B=function(a,b){return{name:a,qty:b||ra,test:ab,toString:bb}},cb=function(a,b){return b[this.name]},db=function(){return"[*"+j[this.name].name+"|"+j[this.name].img+" "+j[this.name].name+"]"+(this.qty?this.qty:"")},C=function(a,b){return{name:a,qty:b||ra,test:cb,toString:db}},eb=function(a,b,c){return c[this.tag]},
fb=function(){return"[tag:"+this.tag+"|"+this.tag+"]"+(this.qty?this.qty:"")},f=function(a,b){return{tag:a,qty:b||ra,test:eb,toString:fb}},g={butterflymuffin:{name:"Butter Muffin",test:function(a,b,c){return b.butterflywings&&!c.meat&&c.veggie},requires:"Butterfly Wings, veggie",requirements:[B("butterflywings"),q(f("meat")),f("veggie")],priority:1,weight:1,foodtype:"veggie",health:20,hunger:37.5,perish:v,sanity:5,cooktime:2},frogglebunwich:{name:"Froggle Bunwich",test:function(a,b,c){return(b.froglegs||
b.froglegs_cooked)&&c.veggie},requirements:[B("froglegs"),f("veggie")],priority:1,foodtype:"meat",health:20,hunger:37.5,perish:v,sanity:5,cooktime:2},taffy:{name:"Taffy",test:function(a,b,c){return c.sweetener&&3<=c.sweetener&&!c.meat},requirements:[f("sweetener",t(">=",3),q(f("meat")))],priority:10,foodtype:"veggie",health:-3,hunger:25,perish:v,sanity:15,cooktime:2},pumpkincookie:{name:"Pumpkin Cookie",test:function(a,b,c){return(b.pumpkin||b.pumpkin_cooked)&&c.sweetener&&2<=c.sweetener},requirements:[B("pumpkin"),
f("sweetener",t(">=",2))],priority:10,foodtype:"veggie",health:0,hunger:37.5,perish:l,sanity:15,cooktime:2},stuffedeggplant:{name:"Stuffed Eggplant",test:function(a,b,c){return(b.eggplant||b.eggplant_cooked)&&c.veggie&&1<c.veggie},requirements:[B("eggplant"),f("veggie",t(">",1))],priority:1,foodtype:"veggie",health:3,hunger:37.5,perish:v,sanity:5,cooktime:2},fishsticks:{name:"Fishsticks",test:function(a,b,c){return c.fish&&b.twigs&&c.inedible&&1>=c.inedible},requirements:[f("fish"),C("twigs"),f("inedible"),
f("inedible",t("<=",1))],priority:10,foodtype:"meat",health:40,hunger:37.5,perish:l,sanity:5,cooktime:2},honeynuggets:{name:"Honey Nuggets",test:function(a,b,c){return b.honey&&c.meat&&1.5>=c.meat&&!c.inedible},requirements:[C("honey"),f("meat",t("<=",1.5)),q(f("inedible"))],priority:2,foodtype:"meat",health:20,hunger:37.5,perish:v,sanity:5,cooktime:2},honeyham:{name:"Honey Ham",test:function(a,b,c){return b.honey&&c.meat&&1.5<c.meat&&!c.inedible},requirements:[C("honey"),f("meat",t(">",1.5)),q(f("inedible"))],
priority:2,foodtype:"meat",health:30,hunger:75,perish:v,sanity:5,cooktime:2},dragonpie:{name:"Dragonpie",test:function(a,b,c){return(b.dragonfruit||b.dragonfruit_cooked)&&!c.meat},requirements:[B("dragonfruit"),q(f("meat"))],priority:1,foodtype:"veggie",health:40,hunger:75,perish:v,sanity:5,cooktime:2},kabobs:{name:"Kabobs",test:function(a,b,c){return c.meat&&b.twigs&&(!c.monster||1>=c.monster)&&c.inedible&&1>=c.inedible},requirements:[f("meat"),C("twigs"),Ca(q(f("monster")),f("monster",t("<=",1))),
f("inedible"),f("inedible",t("<=",1))],priority:5,foodtype:"meat",health:3,hunger:37.5,perish:v,sanity:5,cooktime:2},mandrakesoup:{name:"Mandrake Soup",test:function(a,b){return b.mandrake},requirements:[C("mandrake")],priority:10,foodtype:"veggie",health:100,hunger:150,perish:m,sanity:5,cooktime:3},baconeggs:{name:"Bacon and Eggs",test:function(a,b,c){return c.egg&&1<c.egg&&c.meat&&1<c.meat&&!c.veggie},requirements:[f("egg",t(">",1)),f("meat",t(">",1)),q(f("veggie"))],priority:10,foodtype:"meat",
health:20,hunger:75,perish:G,sanity:5,cooktime:2},meatballs:{name:"Meatballs",test:function(a,b,c){return c.meat&&!c.inedible},requirements:[f("meat"),q(f("inedible"))],priority:-1,foodtype:"meat",health:3,hunger:62.5,perish:l,sanity:5,cooktime:0.75},bonestew:{name:"Meaty Stew",test:function(a,b,c){return c.meat&&3<=c.meat&&!c.inedible},requirements:[f("meat",t(">=",3)),q(f("inedible"))],priority:0,foodtype:"meat",health:12,hunger:150,perish:l,sanity:5,cooktime:0.75},perogies:{name:"Pierogi",test:function(a,
b,c){return c.egg&&c.meat&&c.veggie&&!c.inedible},requirements:[f("egg"),f("meat"),f("veggie"),q(f("inedible"))],priority:5,foodtype:"meat",health:40,hunger:37.5,perish:G,sanity:5,cooktime:1},turkeydinner:{name:"Turkey Dinner",test:function(a,b,c){return b.drumstick&&1<b.drumstick&&c.meat&&1<c.meat&&(c.veggie||c.fruit)},requirements:[C("drumstick",t(">",1)),f("meat",t(">",1)),Ca(f("veggie"),f("fruit"))],priority:10,foodtype:"meat",health:20,hunger:75,perish:m,sanity:5,cooktime:3},ratatouille:{name:"Ratatouille",
test:function(a,b,c){return!c.meat&&c.veggie&&!c.inedible},requirements:[q(f("meat")),f("veggie"),q(f("inedible"))],priority:0,foodtype:"veggie",health:3,hunger:25,perish:v,sanity:5,cooktime:1},jammypreserves:{name:"Fist Full of Jam",test:function(a,b,c){return c.fruit&&!c.meat&&!c.veggie&&!c.inedible},requirements:[f("fruit"),q(f("meat")),q(f("veggie")),q(f("inedible"))],priority:0,foodtype:"veggie",health:3,hunger:37.5,perish:v,sanity:5,cooktime:0.5},fruitmedley:{name:"Fruit Medley",test:function(a,
b,c){return c.fruit&&3<=c.fruit&&!c.meat&&!c.veggie},requirements:[f("fruit",t(">=",3)),q(f("meat")),q(f("veggie"))],priority:0,foodtype:"veggie",health:20,hunger:25,perish:m,sanity:5,cooktime:0.5},fishtacos:{name:"Fish Tacos",test:function(a,b,c){return c.fish&&(b.corn||b.corn_cooked)},requirements:[f("fish"),B("corn")],priority:10,foodtype:"meat",health:20,hunger:37.5,perish:m,sanity:5,cooktime:0.5},waffles:{name:"Waffles",test:function(a,b,c){return b.butter&&(b.berries||b.berries_cooked)&&c.egg},
requirements:[C("butter"),B("berries"),f("egg")],priority:10,foodtype:"veggie",health:60,hunger:37.5,perish:m,sanity:5,cooktime:0.5},monsterlasagna:{name:"Monster Lasagna",test:function(a,b,c){return c.monster&&2<=c.monster&&!c.inedible},requirements:[f("monster",t(">=",2)),q(f("inedible"))],priority:10,foodtype:"meat",health:-20,hunger:37.5,perish:m,sanity:-20,cooktime:0.5},wetgoop:{name:"Wet Goop",test:function(){return!0},requirements:[],trash:!0,priority:-2,health:0,hunger:0,perish:m,sanity:0,
cooktime:0.25}},M,p,Da,gb=/^tag[: ]/,hb=/^tag:? */,H,ib=/^recipe[: ]/,jb=/^recipe:? */,sa,kb=/^ingredient[: ]/,lb=/^ingredient:? */,Ea,Fa,Ga=!1,mb=function(a){a.match=!Ga&&a.uncookable?0:0===a.lowerName.indexOf(p)||a.raw&&0===a.raw.lowerName.indexOf(p)?3:0===Fa.test(a.lowerName)?2:Ea.test(a.lowerName)?1:0;return a.match},nb=function(a){return a.match=a[Da]+0||0},ob=function(a){for(var b=0,c,d=!0;b<H.length;){c=H[b].test(null,a.nameObject,a);if(H[b].cancel){if(!c){d=!0;break}}else c&&(d=!1);b++}return a.match=
d?0:1},pb=function(a){for(var b=0,c,d=!0;b<a.requirements.length;){c=a.requirements[b].test(null,sa.nameObject,sa);if(a.requirements[b].cancel){if(!c){d=!0;break}}else c&&(d=!1);b++}return a.match=d?0:1},qb=function(a){return a.match=a.lowerName===p?1:0},rb=function(a){return a.match=a.lowerName===p||a.raw&&a.raw.lowerName===p||a.cook&&a.cook.lowerName===p?1:0},S=function(a,b){var c,d;return a.match===b.match?(c=a.raw?a.raw.name:a.name,d=b.raw?b.raw.name:b.name,c!==d?c>d?1:c<d?-1:0:a.name===b.name?
0:a.raw===b?1:-1):b.match-a.match};M=function(a,b,c){Ga=!!c;p=b.toLowerCase();if(gb.test(p))return Da=p.split(hb)[1],a.filter(nb).sort(S);if(ib.test(p))return(H=g.byName(p.split(jb)[1].toLowerCase()))?(H=H.requirements,a.filter(ob).sort(S)):[];if(kb.test(p))return(sa=j.byName(p.split(lb)[1].toLowerCase()))?a.filter(pb).sort(S):[];if(0===p.indexOf("*"))return p=p.substring(1),a.filter(qb).sort(S);if(0===p.indexOf("~"))return p=p.substring(1),a.filter(rb).sort(S);Fa=RegExp("\\b"+p+".*");Ea=RegExp("\\b"+
p.split("").join(".*")+".*");return a.filter(mb).sort(S)};var ta=function(a,b,c){var d,e,f;for(d=0;d<a.length;d++)if(f=a[d],null!==f)for(e in b[f.id]=1+(b[f.id]||0),f)f.hasOwnProperty(e)&&"perish"!==e&&!isNaN(f[e])?c[e]=f[e]+(c[e]||0):"perish"===e&&(c[e]=Math.min(c[e]||G,f[e]))},ua,va,O;ua=function(a,b,c,d){var e,f;a.length=0;va={};O={};ta(b,va,O);for(b=0;b<g.length;b++){f=!1;for(e=0;e<g[b].requirements.length;e++)if(g[b].requirements[e].test(null,va,O))g[b].requirements[e].cancel||(f=!0);else if(!d&&
g[b].requirements[e].cancel){f=!1;break}else if(d&&!g[b].requirements[e].cancel){f=!1;break}f&&(!c||-1===c.indexOf(g[b]))&&a.push(g[b])}O.img="";O.name="Combined";return a};var Ha,V=[],wa,P;Ha=function(a){V.length=0;wa={};P={};ta(a,wa,P);for(a=0;a<g.length;a++)g[a].test(null,wa,P)&&V.push(g[a]);V.sort(function(a,c){return c.priority-a.priority});P.img="";P.name="Combined";V.unshift(P);return V};var Q=document.createElement("canvas"),xa=Q.getContext&&Q.toDataURL&&Q.getContext("2d"),W=document.createElement("canvas"),
Ia=W.getContext&&W.getContext("2d"),I={},ya={},Ja=!!xa,fa=[],sb=function(a){return function(b){b=b.target;xa.clearRect(0,0,64,64);xa.drawImage(b,0,0,64,64);Ia.clearRect(0,0,32,32);Ia.drawImage(b,0,0,32,32);try{I[a]=Q.toDataURL(),ya[a]=W.toDataURL()}catch(c){Ja=!1}fa.filter(function(b){return b.url===a}).forEach(function(b){b.url===a&&(delete b.img.dataset.pending,ga&&b.img.removeAttribute("data-pending"),b.img.src=32===b.d?ya[a]||a:I[a]||a)});fa=fa.filter(function(b){return b.url!==a})}},Ka=function(a,
b,c){a.dataset.pending=b;ga&&a.setAttribute("data-pending",b);fa.push({url:b,img:a,d:c})},T=function(a,b){var c=new Image,d;Ja?I[a]?c.src=32===b?ya[a]:I[a]:(null!==I[a]&&(I[a]=null,d=new Image,d.addEventListener("load",sb(a),!1),d.src=a),Ka(c,a,b)):c.src=a;return c};Q.width=64;Q.height=64;W.width=32;W.height=32;T.queue=Ka;var ha,tb=/\[([^\|]*)\|([^\|]*)\]/;ha=function(a){var b=a&&a.split(tb),c,d;if(!b||1===b.length)return a;a=document.createDocumentFragment();a.appendChild(document.createTextNode(b[0]));
for(c=1;c<b.length;c+=3)""===b[c]&&""===b[c+1]?a.appendChild(document.createElement("br")):(d=document.createElement("span"),d.className="link",d.dataset.link=b[c],ga&&d.setAttribute("data-link",b[c]),b[c+1]&&0===b[c+1].indexOf("img/")?(d.appendChild(document.createTextNode(b[c+1].split(" ").slice(1).join(" "))),d.appendChild(T(b[c+1].split(" ")[0],32))):d.appendChild(document.createTextNode(b[c+1]?b[c+1]:b[c])),a.appendChild(d)),a.appendChild(document.createTextNode(b[c+2]));return a};var h,X=0,
La=document.getElementById("main"),ub=document.getElementById("food"),vb=document.getElementById("recipes"),wb=document.getElementById("navbar"),ga=!1;document.documentElement.dataset||(ga=!0,Object.defineProperty(Element.prototype,"dataset",{get:function(){this.ds||(this.ds={},Array.prototype.forEach.call(this.attributes,function(a){0===a.name.indexOf("data-")&&(this.ds[a.name.substring(5)]=a.value)},this));return this.ds}}));document.getElementById("stalehealth").appendChild(document.createTextNode(Math.round(333)/
10+"%"));document.getElementById("stalehunger").appendChild(document.createTextNode(Math.round(667)/10+"%"));document.getElementById("spoiledhunger").appendChild(document.createTextNode(Math.round(500)/10+"%"));document.getElementById("spoiledsanity").appendChild(document.createTextNode(10));document.getElementById("perishground").appendChild(document.createTextNode(Math.round(1500)/10+"%"));document.getElementById("perishwinter").appendChild(document.createTextNode(Math.round(750)/10+"%"));document.getElementById("perishfridge").appendChild(document.createTextNode(Math.round(500)/
10+"%"));var n,w=function(a,b){return"[tag:"+a+"|"+(b||a)+"]"};for(h in j)if(j.hasOwnProperty(h)){var e=j[h];e.match=0;e.lowerName=e.name.toLowerCase();e.id=h;e.nameObject={};e.nameObject[h]=1;e.img="img/"+e.name.replace(/ /g,"_").toLowerCase()+".png";-1!==h.indexOf("_cooked")&&(e.cooked=!0);j[h+"_cooked"]&&(e.cook=j[h+"_cooked"],j[h+"_cooked"].raw=e);e.info=[];n=e.info;e.fruit&&n.push(w("fruit")+(1===e.fruit?"":"\u00d7"+e.fruit));e.veggie&&n.push(w("veggie","vegetable")+(1===e.veggie?"":"\u00d7"+
e.veggie));e.meat&&n.push(w("meat")+(1===e.meat?"":"\u00d7"+e.meat));e.egg&&n.push(w("egg")+(1===e.egg?"":"\u00d7"+e.egg));e.fish&&n.push(w("fish"));e.magic&&n.push(w("magic"));e.decoration&&n.push(w("decoration"));e.inedible&&n.push(w("inedible"));e.monster&&n.push(w("monster","monster food"));e.sweetener&&n.push(w("sweetener"));e.fat&&n.push(w("fat"));e.dairy&&n.push(w("dairy"));e.comment&&n.push(e.comment);j[X++]=e}j.length=X;X=0;for(h in g)g.hasOwnProperty(h)&&(g[h].match=0,g[h].name=g[h].name||
h,g[h].id=h,g[h].lowerName=g[h].name.toLowerCase(),g[h].weight=g[h].weight||1,g[h].priority=g[h].priority||0,g[h].img="img/"+g[h].name.replace(/ /g,"_").toLowerCase()+".png",g[h].requirements&&(g[h].requires=ha(g[h].requirements.join("; "))),g[X++]=g[h]);g.length=X;g.forEach=Array.prototype.forEach;g.filter=Array.prototype.filter;g.sort=Array.prototype.sort;g.byName=function(a){for(var b=this.length;b--;)if(this[b].lowerName===a)return this[b]};var xb=function(a,b){return a+"[recipe:"+b.name+"|"+
b.img+"]"};for(h in j)j.hasOwnProperty(h)&&(isNaN(h)&&isNaN(j[h]))&&(e=j[h],n=e.info,e.cooked&&n.push("from [*"+e.raw.name+"|"+e.raw.img+"]"),e.cook&&n.push("cook: [*"+e.cook.name+"|"+e.cook.img+"]"),e.dry&&(e.dry instanceof Object||(e.dry=j[e.dry]),n.push("dry: [*"+e.dry.name+"|"+e.dry.img+"]")),e.info=n.join("; "),e.uncookable?e.info+="[|]cannot be added to crock pot":(e.recipes=[],g.forEach(function(a){for(var b=!1,c=a.requirements,d=c.length;d--;)if(c[d].test(null,e.nameObject,e))!c[d].cancel&&
!b&&(b=!0);else if(c[d].cancel){b=!1;break}b&&e.recipes.push(a)}),0<e.recipes.length&&(e.ingredient=!0,e.info+=e.recipes.reduce(xb,"[|][ingredient:"+e.name+"|Recipes] "))),e.info=ha(e.info));j.forEach=Array.prototype.forEach;j.filter=Array.prototype.filter;j.sort=Array.prototype.forEach;j.byName=function(a){for(var b=this.length;b--;)if(this[b].lowerName===a)return this[b]};var ia="id health hunger fruit veggie meat egg fish magic decoration inedible monster sweetener fat dairy".split(" ");da=L=void 0;
j.filter(function(a){return!a.uncookable&&!a.skip&&(a.ideal||!a.cook&&(!a.raw||!a.raw.ideal))}).map(function(a){for(var b={},c=ia.length;c--;)a.hasOwnProperty(ia[c])&&(b[ia[c]]=a[ia[c]]);return b});L=g.filter(function(a){return!a.trash}).sort(function(a,b){return b.priority-a.priority});da=L.map(function(a){return a.test});L.map(function(a){return a.test.toString()});L.map(function(a){return a.priority});var ja,Ma=wb.getElementsByTagName("li"),ba={},ca={},E,N,K,yb=function(a){ja(a.target.dataset.tab)},
F;ja=function(a){K.className="";K=ba[a];N.style.display="none";N=ca[a];K.className="selected";N.style.display="block"};for(h=0;h<Ma.length;h++)F=Ma[h],F.dataset.tab&&(ba[F.dataset.tab]=F,ca[F.dataset.tab]=document.getElementById(F.dataset.tab),ca[F.dataset.tab].style.display="none",F.addEventListener("selectstart",function(a){a.preventDefault()},!1),F.addEventListener("click",yb,!1));K=ba.simulator;N=ca.simulator;window.localStorage&&localStorage.foodGuideState&&("["===localStorage.foodGuideState[0]?
(E={},E.pickers=JSON.parse(localStorage.foodGuideState),localStorage.foodGuideState=JSON.stringify(E)):E=JSON.parse(localStorage.foodGuideState),E.activeTab&&ba[E.activeTab]&&(K=ba[E.activeTab],N=ca[E.activeTab]));K.className="selected";N.style.display="block";window.addEventListener("beforeunload",function(){var a;window.localStorage&&(localStorage.foodGuideState||(localStorage.foodGuideState="{}"),a=JSON.parse(localStorage.foodGuideState),a.activeTab=K.dataset.tab,localStorage.foodGuideState=JSON.stringify(a))});
var zb=function(a){a.dataset.pending&&T.queue(a,a.dataset.pending,32)},za=function(a){var b,c,d,e=document.createElement("tr"),f;for(b=1;b<arguments.length;b++)c=document.createElement(a),f=(d=arguments[b])&&d.indexOf?d:d.toString(),d instanceof DocumentFragment?(c.appendChild(d.cloneNode(!0)),Array.prototype.forEach.call(c.getElementsByTagName("img"),zb)):0===f.indexOf("img/")?(d=T(f),c.appendChild(d)):c.appendChild(document.createTextNode(f)),e.appendChild(c);return e},Y=function(a,b,c,d,e,f,j,
g,h,m){var r,p,s,$=!1,l,n,k,q=function(a){var b;if((!m||k<m)&&(!g||g(a)))b=c(a),j&&j(a)&&(b.className="highlighted",l||(l=b),n=b),r.appendChild(b),k++},y=function(c,d,j){var g,h;if(d||c&&""!==c.target.dataset.sort||s){g=d||c&&c.target.dataset.sort||s;e&&(h=b.shift());"name"===g?b.sort(function(a,b){var c=a.raw?a.raw.name:a.name,d=b.raw?b.raw.name:b.name;return c!==d?c>d?1:c<d?-1:0:a.name===b.name?0:a.raw===b?1:-1}):b.sort(function(a,b){var c=a[g],d=b[g];return!isNaN(c)&&!isNaN(d)?d-c:isNaN(c)&&isNaN(d)?
0:isNaN(c)?1:-1});if(d||c)s===g?$=!$:(s=g,$=!1);$&&b.reverse();e&&b.unshift(h)}c=document.createElement("tr");for(p in a)d=document.createElement("th"),d.appendChild(document.createTextNode(p)),a[p]&&(a[p]===s&&(d.style.background=$?"#555":"#ccc",d.style.color=$?"#ccc":"#555",d.style.borderRadius="4px"),d.style.cursor="pointer",d.dataset.sort=a[p],d.addEventListener("click",y,!1)),c.appendChild(d);d=r;r=document.createElement("table");r.appendChild(c);n=l=null;k=0;b.forEach(q);f&&(r.className="links",
Array.prototype.forEach.call(r.getElementsByClassName("link"),function(a){a.addEventListener("click",f,!1)}));d&&d.parentNode.replaceChild(r,d);j&&(l&&l.offsetTop+r.offsetTop+La.offsetTop+l.offsetHeight>window.scrollY+window.innerHeight?l.scrollIntoView(!0):n&&n.offsetTop+r.offsetTop+La.offsetTop<window.scrollY&&n.scrollIntoView(!1))};d?y(null,d):y();r.update=function(a){y(null,null,a)};r.setMaxRows=function(a){m=a;this.update()};return r},z=function(a){return isNaN(a)?"":0<a?"+"+a:a},Na=function(a,
b){return a<b?(b-a)/Math.abs(a):a>b?-(a-b)/Math.abs(a):0},Oa=function(a,b){return!isNaN(a)&&a!==b?" ("+z((100*(a<b?(b-a)/Math.abs(a):a>b?-(a-b)/Math.abs(a):0)).toFixed(0))+"%)":""},Pa=function(a){return za("td",a.img?a.img:"",a.name,z(a.health),z(a.hunger),isNaN(a.sanity)?"":z(a.sanity),isNaN(a.perish)?"Never":a.perish/u+" days",a.info||"")},ma=function(a,b,c){return za("td",a.img?a.img:"",a.name,z(a.health)+Oa(b,a.health),z(a.hunger)+Oa(c,a.hunger),isNaN(a.sanity)?"":z(a.sanity),isNaN(a.perish)?
"Never":a.perish/u+" days",(a.cooktime*Ua+0.5|0)+" secs",a.priority||"0",a.requires||"")},na,oa=[],Qa=[],Aa=Y({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish",Info:""},Array.prototype.slice.call(j),Pa,"name",!1,function(a){a=!a.target?a:"IMG"===a.target.tagName?a.target.parentNode.dataset.link:a.target.dataset.link;"recipe:"===a.substring(0,7)||"ingredient:"===a.substring(0,11)?(ja("crockpot"),"recipe:"===a.substring(0,7)&&(a="*"+a.substring(7)),Qa=M(g,a),Ra.update(!0)):
(na!==a?(na=a,oa=M(j,a)):(na="",oa.length=0),Aa.update(!0))},function(a){return-1!==oa.indexOf(a)}),Ra=Y({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},Array.prototype.slice.call(g),ma,"name",!1,function(a){a=!a.target?a:"IMG"===a.target.tagName?a.target.parentNode.dataset.link:a.target.dataset.link;ja("foodlist");na=a;oa=M(j,a);Aa.update(!0)},function(a){return-1!==Qa.indexOf(a)});ub.appendChild(Aa);vb.appendChild(Ra);
var Ab=function(a,b){return a+"[ingredient:"+j[b.id].name+"|"+j[b.id].img+"]"},Sa=function(a){var b=document.createElement("button");b.appendChild(document.createTextNode("Calculate efficient recipes (may take some time)"));b.className="makablebutton";b.addEventListener("click",function(){var c=[],d=a?a.length:null,e,f,h=[],m,l,p,r,n=[],s=[],q,t,u,k=function(a){return-1!==s.indexOf(a.id)},v=function(a){return-1!==this.indexOf(j[a])},y=function(a){-1!==s.indexOf(a.target.dataset.id)&&s.splice(s.indexOf(a.target.dataset.id),
1);-1!==n.indexOf(a.target.dataset.id)?(n.splice(n.indexOf(a.target.dataset.id),1),a.target.className=""):(n.push(a.target.dataset.id),a.target.className="selected");u.update()},w=function(a){-1!==n.indexOf(a.target.dataset.id)&&n.splice(n.indexOf(a.target.dataset.id),1);-1!==s.indexOf(a.target.dataset.id)?(s.splice(s.indexOf(a.target.dataset.id),1),a.target.className=""):(s.push(a.target.dataset.id),a.target.className="excluded");u.update();a.preventDefault()},F=function(a){f&&(f.className="");e===
a.target.dataset.recipe?e=f=null:(e=a.target.dataset.recipe,f=a.target,a.target.className="selected");u.update()};null===d&&(d=j.length,a=j);for(;d--;)a[d].cook&&(-1===c.indexOf(a[d].cook)&&!a[d].cook.uncookable)&&c.push(a[d].cook),!a[d].uncookable&&((a[d].ideal||!a[d].cook||a[d].cook.uncookable)&&-1===c.indexOf(a[d]))&&c.push(a[d]);q=[];u=Y({"":"",Name:"name",Health:"health","Health+":"healthpls",Hunger:"hunger","Hunger+":"hungerpls",Ingredients:""},q,function(a){var b=a.recipe;return za("td",b.img?
b.img:"",b.name,z(b.health),z(a.healthpls)+" ("+z(100*a.healthpct|0)+"%)",z(b.hunger),z(a.hungerpls)+" ("+z(100*a.hungerpct|0)+"%)",ha(a.ingredients.reduce(Ab,"")))},"hungerpls",!1,null,null,function(a){return(!e||a.recipe.name===e)&&(!s.length||!a.ingredients.some(k))&&(!n.length||n.every(v,a.ingredients))},0,15);t=document.createElement("div");l=document.createElement("div");l.appendChild(document.createTextNode("Computing combinations.."));t.appendChild(l);m=document.createElement("div");m.className=
"recipeFilter";t.appendChild(m);p=document.createElement("div");p.className="foodFilter";c.forEach(function(a){var b=T(a.img,32);b.dataset.id=a.id;b.addEventListener("click",y,!1);b.addEventListener("contextmenu",w,!1);p.appendChild(b)});t.appendChild(p);d=document.createElement("div");r=document.createElement("input");r.type="text";r.placeholder="use custom filter";r.className="customFilterInput";d.appendChild(r);t.appendChild(u);b.parentNode.replaceChild(t,b);var M=function(){l.firstChild.textContent=
"Found "+q.length+" valid recipes.."},E=function(){u.setMaxRows(30);l.firstChild.textContent="Found "+q.length+" valid recipes. Showing top 30 for selected recipe using all selected ingredients. Right-click to exclude ingredients."},R=da.length,ka=[],la=0,B,C=60,K=function(a){return c[a]},G,Z=c.length,J=[0,0,0,0],U,D=0,x=0;G=function(a){for(var b;a--&&1<Z;){b=J.map(K);var c=void 0,d=null,e={},f={};ta(b,e,f);for(c=0;c<R&&(null===d||L[c].priority>=d);c++)da[c](null,e,f)&&(ka.push({recipe:L[c],ingredients:b,
tags:{health:f.health,hunger:f.hunger}}),d=L[c].priority);J[0]++;for(b=0;J[b]>=Z;)b++,J[b]++;U=4;for(D=0;U--;)J[U]>=Z?J[U]=D:J[U]>D&&(D=J[U]);if(4===b)return!1;x++}return!0};var H=function(){var a=!1,b=Date.now();for(G(C)?setTimeout(H,0):a=!0;la<ka.length&&ka[la];la++){var c=ka[la],d=void 0,e=void 0;if(-1===h.indexOf(c.recipe.name)){for(d=0;d<h.length&&!(c.recipe.name<h[d]);d++);h.splice(d,0,c.recipe.name);e=T(g.byName(h[d].toLowerCase()).img);e.dataset.recipe=h[d];e.addEventListener("click",F,!1);
d<m.childNodes.length?m.insertBefore(e,m.childNodes[d]):m.appendChild(e)}c.name||(c.name=c.recipe.name,c.health=c.recipe.health,c.ihealth=c.tags.health,c.healthpls=c.recipe.health-c.tags.health,c.hunger=c.recipe.hunger,c.ihunger=c.tags.hunger,c.hungerpls=c.recipe.hunger-c.tags.hunger,c.healthpct=Na(c.tags.health,c.recipe.health),c.hungerpct=Na(c.tags.hunger,c.recipe.hunger),c.sanity=c.recipe.sanity,c.perish=c.recipe.perish);q.push(c)}B!==Date.now()-b&&(B=Date.now()-b+1,C=38/B*C+1|0);M&&M();a&&E&&
E()};H()},!1);return b};document.getElementById("statistics").appendChild(Sa());window.food=j;window.recipes=g;window.matchingNames=M;for(var aa=function(a,b){var c=!1;null!==b?a.dataset.id=b.id:a.nextSibling&&null!==R(a.nextSibling)?(aa(a,R(a.nextSibling)),aa(a.nextSibling,null),c=!0):a.dataset.id=null;c||(null!==b?a.firstChild?a.replaceChild(T(b.img),a.firstChild):a.appendChild(T(b.img)):a.firstChild&&a.removeChild(a.firstChild),a.title=b?b.name:"")},R=function(a){return j[a.dataset.id]||g[a.dataset.id]||
null},Ta=document.getElementsByClassName("ingredientpicker"),Ba=Ta.length;Ba--;)(function(){var a=document.createElement("span"),b,c=document.createElement("div"),d=document.createElement("ul"),e=Ta[Ba],f=Ba,h,m="recipes"===e.dataset.type?g:j,n=!e.dataset.cookable,l=e.nextSibling,r=l.getElementsByClassName("ingredient"),p,s=[],q,t=[],u=[],k=null,v=!1,y=document.getElementById("results"),w=document.getElementById("discoverfood"),z=document.getElementById("discover"),B=document.getElementById("makable"),
C=document.createElement("span"),E=function(a,b){for(var c=a;c.previousSibling;)if(c=c.previousSibling,b(c))return c;return null},F=function(a,b){for(var c=a;c.nextSibling;)if(c=c.nextSibling,b(c))return c;return null},G=!1,H=function(a){var b=j[a]||g[a]||null;if(p){for(a=0;a<r.length;a++)if(null===R(r[a]))return aa(r[a],b),v&&q(),a;return-1}-1===r.indexOf(a)&&(r.push(a),a=document.createElement("span"),a.className="ingredient",aa(a,b),a.addEventListener("click",Z,!1),l.appendChild(a),v&&q());return 1},
K=function(a){-1!==H(("IMG"===a.target.tagName?a.target.parentNode:a.target).dataset.id)&&a&&a.preventDefault&&a.preventDefault()},L=function(a){var b=T(a.img,32),c=document.createElement("span");c.appendChild(b);c.appendChild(document.createTextNode(a.name));c.dataset.id=a.id;-1!==s.indexOf(a)&&(c.style.opacity=0.5);c.addEventListener("mousedown",K,!1);this.appendChild(c);this.dataset.length++},S=function(a){-1!==s.indexOf(j[a.dataset.id])?a.style.opacity||(a.style.opacity=0.5):a.style.opacity&&
a.style.removeProperty("opacity")},Z=function(a){var b="IMG"===a.target.tagName?a.target.parentNode:a.target;if(p){if(null!==R(b))return aa(b,null),q(),b.dataset.id}else return a=r.indexOf(b.dataset.id),r.splice(a,1),l.removeChild(b),q(),r[a]||null},J=function(){var a;b.splitTag();a=M(m,b.getSearch(),n);c.removeChild(d);d=document.createElement("div");d.dataset.length=0;a.forEach(L,d);c.appendChild(d);k=null},U=function(a){a="IMG"===a.target.tagName?a.target.parentNode.dataset.link:a.target.dataset.link;
var b=M(m,a,n);1===b.length?H(b[0].id):(e.value=a,J())},D;"ingredients"===l.id?q=function(){var a,b,c,e;s=Array.prototype.map.call(r,function(a){return R(a)});a=Ha(s);b=a[0].health;c=a[0].hunger;e=Y({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},a,function(a){return ma(a,b,c)},"priority",!0,U);y.firstChild&&y.removeChild(y.firstChild);y.firstChild&&(y.removeChild(y.firstChild),y.removeChild(y.firstChild));
y.appendChild(e);null!==s[0]&&(ua(t,s,a),0<t.length&&(y.appendChild(document.createTextNode("Add more ingredients to make:")),e=Y({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},t,function(a){return ma(a,b,c)},"priority",!1,U),y.appendChild(e)));d&&d.firstChild&&Array.prototype.forEach.call(d.getElementsByTagName("span"),S)}:"inventory"===l.id&&(q=function(){var a;s=Array.prototype.map.call(l.getElementsByClassName("ingredient"),
function(a){return R(a)});w.firstChild&&w.removeChild(w.firstChild);z.firstChild&&z.removeChild(z.firstChild);B.firstChild&&B.removeChild(B.firstChild);0<s.length&&(a=Y({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish",Info:""},s,Pa,"name"),w.appendChild(a),ua(u,s,null,!0),0<u.length&&(a=Y({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},u,ma,"name"),z.appendChild(a),B.appendChild(Sa(s))));
d&&d.firstChild&&Array.prototype.forEach.call(d.getElementsByTagName("span"),S)});0!==r.length?(p=!0,Array.prototype.forEach.call(r,function(a){aa(a,null);a.addEventListener("click",Z,!1)})):(r=[],p=!1);window.localStorage&&localStorage.foodGuideState&&(h=JSON.parse(localStorage.foodGuideState).pickers)&&h[f]&&h[f].forEach(function(a){j[a]&&H(a)});v=!0;a.className="searchselector retracted";a.appendChild(document.createTextNode("name"));var x=document.createElement("div"),P=!1,Q=null,I=[{title:"name",
prefix:"",placeholder:"Filter ingredients"},{title:"tag",prefix:"tag:",placeholder:"Meat, veggie, fruit, egg, monster..."},{title:"recipe",prefix:"recipe:",placeholder:"Find ingredients used in a recipe"}],N=I[0],A=null,O=function(){P=!1;x.style.height="0px";a.style.borderBottomLeftRadius="3px";x.style.borderTopLeftRadius="3px";null!==A&&(clearTimeout(A),A=null);a.className="searchselector retracted"},V=function(b){N=b;e.placeholder=N.placeholder;a.firstChild.textContent=N.title},W=function(a){V(I[a.target.dataset.typeIndex]);
J();O()},X=/: */;a.addEventListener("click",function(){P?O():(null===Q&&(x.style.height="auto",x.style.left=a.offsetLeft,x.style.top=a.offsetTop+a.offsetHeight,Q=x.offsetHeight+"px",x.style.height="0px"),P=!0,x.style.height=Q,a.style.borderBottomLeftRadius="0px",x.style.borderTopLeftRadius="0px",x.style.width="auto",x.style.width=Math.max(x.offsetWidth,a.offsetWidth+1)+"px",null!==A&&(clearTimeout(A),A=null),a.className="searchselector extended")},!1);a.addEventListener("selectstart",function(a){a.preventDefault()},
!1);a.addEventListener("mouseout",function(){null!==A&&clearTimeout(A);A=setTimeout(O,500)},!1);a.addEventListener("mouseover",function(){null!==A&&(clearTimeout(A),A=null)},!1);x.addEventListener("mouseout",function(){null!==A&&clearTimeout(A);A=setTimeout(O,500)},!1);x.addEventListener("mouseover",function(){null!==A&&(clearTimeout(A),A=null)},!1);I.forEach(function(a,b){var c=document.createElement("div");c.appendChild(document.createTextNode(a.title));c.dataset.typeIndex=b;c.addEventListener("click",
W,!1);a.element=c;x.appendChild(c)});e.parentNode.insertBefore(a,e);x.className="searchdropdown";e.parentNode.insertBefore(x,e);b={tagText:"",getSearch:function(){return N.prefix+e.value},splitTag:function(){var a;a=e.value.split(X);var b,c;if(2===a.length){b=a[0].toLowerCase()+":";c=a[1];for(a=0;a<I.length;a++)if(b===I[a].prefix){V(I[a]);e.value=c;break}}}};c.className="ingredientdropdown";c.appendChild(d);c.addEventListener("mousedown",function(a){a.preventDefault()},!1);h=M(m,b.getSearch(),n);
c.removeChild(d);d=document.createElement("div");d.dataset.length=0;h.forEach(L,d);c.appendChild(d);C.className="clearingredients";C.appendChild(document.createTextNode("clear"));C.addEventListener("click",function(){if(""===e.value)for(;R(l.firstChild);)Z({target:l.firstChild});else e.value="",J()},!1);l.parentNode.insertBefore(C,l);l.parentNode.insertBefore(c,l);e.addEventListener("keydown",function(a){var b;-1!==[16,17,37,38,39,40,13].indexOf(a.keyCode)&&(b=k,13===a.keyCode?(null===k&&(k=d.firstChild||
null),null!==k&&K({target:k})):null===k?40===a.keyCode&&(k=d.childNodes[1]||d.firstChild||null,null!==k&&(D=k.offsetLeft+k.offsetWidth/2,a.preventDefault())):(a.preventDefault(),37===a.keyCode?(k=k.previousSibling&&k.previousSibling.offsetTop===k.offsetTop?k.previousSibling:(a=F(k,function(a){return a.offsetTop!==k.offsetTop}))?a.previousSibling:d.lastChild,null!==k&&(D=k.offsetLeft+k.offsetWidth/2)):39===a.keyCode?(k=k.nextSibling&&k.nextSibling.offsetTop===k.offsetTop?k.nextSibling:(a=E(k,function(a){return a.offsetTop!==
k.offsetTop}))?a.nextSibling:d.firstChild,null!==k&&(D=k.offsetLeft+k.offsetWidth/2)):38===a.keyCode?((a=E(k,function(a){return D>=a.offsetLeft-1&&D<=a.offsetLeft+a.offsetWidth+1}))||(a=E(d.lastChild,function(a){return D>=a.offsetLeft-1&&D<=a.offsetLeft+a.offsetWidth+1})),k=a?a:d.firstChild):40===a.keyCode&&((a=F(k,function(a){return D>=a.offsetLeft-1&&D<=a.offsetLeft+a.offsetWidth+1}))||(a=F(d.firstChild,function(a){return D>=a.offsetLeft-1&&D<=a.offsetLeft+a.offsetWidth+1})),k=a?a:d.lastChild)),
k!==b&&(null!==b&&(b.className=""),null!==k&&(k.className="selected")))},!1);e.addEventListener("keyup",function(a){-1===[16,17,37,38,39,40,13].indexOf(a.keyCode)?J():null!==k&&a.preventDefault()},!1);e.addEventListener("focus",function(){G||(G=!0)},!1);e.addEventListener("blur",function(){G&&(G=!1)},!1);q();window.addEventListener("beforeunload",function(){var a,b;window.localStorage&&(localStorage.foodGuideState||(localStorage.foodGuideState="{}"),a=JSON.parse(localStorage.foodGuideState),a.pickers||
(a.pickers=[]),p?(b=[],b=Array.prototype.map.call(r,function(a){return(a=R(a))?a.id:null}),a.pickers[f]=b):a.pickers[f]=r,localStorage.foodGuideState=JSON.stringify(a))})})()})();
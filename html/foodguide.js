(function(){var O,fa,qa=30,r=16*qa,qa=r/16,ga=3*r,m=6*r,q=10*r,v=15*r,F=20*r,ra=40*r,Xa=0.6666*qa,h={butter:{name:"Butter",fat:1,dairy:1,health:40,hunger:25,perish:ra,stack:40},butterflywings:{name:"Butterfly Wings",isveggie:!0,decoration:2,health:8,hunger:9.375,perish:m,stack:40},deerclopseyeball:{name:"Deerclops Eyeball",uncookable:!0,health:60,hunger:75,sanity:-15},bird_egg:{name:"Egg",egg:1,health:0,hunger:9.375,sanity:0,perish:q,stack:40,rot:"rottenegg"},bird_egg_cooked:{name:"Cooked Egg",egg:1,
precook:1,health:0,hunger:12.5,sanity:0,perish:m,stack:40},rottenegg:{name:"Rotten Egg",uncookable:!0,health:-1,hunger:-10,stack:40},fish:{name:"Fish",ismeat:!0,meat:0.5,fish:1,health:1,hunger:12.5,perish:ga,stack:40},fish_cooked:{name:"Cooked Fish",ismeat:!0,meat:0.5,fish:1,precook:1,health:1,hunger:12.5,perish:m,stack:40},froglegs:{name:"Frog Legs",ismeat:!0,meat:0.5,health:1,hunger:12.5,perish:m,sanity:-10,stack:40},froglegs_cooked:{name:"Cooked Frog Legs",ismeat:!0,meat:0.5,precook:1,health:3,
hunger:12.5,perish:q,sanity:-10,stack:40},flowerhat:{name:"Garland",health:3,hunger:0,sanity:10,perish:m,stack:1,uncookable:!0},hambat:{name:"Ham Bat",health:-8,hunger:25,sanity:-15,perish:q,stack:1,uncookable:!0},honey:{name:"Honey",sweetener:!0,health:3,hunger:9.375,perish:ra,stack:40},honeycomb:{name:"Honeycomb",sweetener:!0},mandrake:{name:"Mandrake",veggie:1,magic:1,health:60,hunger:75,stack:40},mandrake_cooked:{name:"Cooked Mandrake",uncookable:!0,veggie:1,magic:1,precook:1,health:100,hunger:150,
stack:40},monstermeat:{name:"Monster Meat",ismeat:!0,meat:1,monster:!0,health:-20,hunger:18.75,sanity:-15,perish:m,stack:20,dry:"monstermeat_dried",drytime:r},monstermeat_cooked:{name:"Cooked Monster Meat",ismeat:!0,meat:1,monster:!0,precook:1,health:-3,hunger:18.75,sanity:-10,perish:v,stack:20},monstermeat_dried:{name:"Monster Jerky",ismeat:!0,meat:1,monster:!0,dried:1,health:-3,hunger:18.75,sanity:-5,perish:F,stack:20},meat:{name:"Meat",ismeat:!0,meat:1,health:1,hunger:25,sanity:-10,perish:m,stack:20,
dry:"meat_dried",drytime:2*r},meat_cooked:{name:"Cooked Meat",ismeat:!0,meat:1,precook:1,health:3,hunger:25,sanity:0,perish:q,stack:20},meat_dried:{name:"Jerky",ismeat:!0,meat:1,dried:1,health:20,hunger:25,sanity:15,perish:F,stack:20},morsel:{name:"Morsel",ismeat:!0,meat:0.5,health:0,hunger:12.5,sanity:-10,perish:m,stack:40,drytime:r,dry:"smallmeat_dried"},morsel_cooked:{name:"Cooked Morsel",ismeat:!0,meat:0.5,precook:1,health:1,hunger:12.5,sanity:0,perish:q,stack:40},smallmeat_dried:{name:"Small Jerky",
ismeat:!0,meat:0.5,dried:1,health:8,hunger:12.5,sanity:10,perish:F,stack:40},drumstick:{name:"Drumstick",ismeat:!0,ideal:!0,meat:0.5,health:0,hunger:12.5,sanity:-10,perish:m,stack:20,drytime:r,dry:"smallmeat_dried"},drumstick_cooked:{name:"Fried Drumstick",ismeat:!0,meat:0.5,precook:1,health:1,hunger:12.5,perish:q,stack:20},red_mushroom:{name:"Red Cap",veggie:0.5,health:-20,hunger:12.5,sanity:0,perish:q,stack:40},red_mushroom_cooked:{name:"Cooked Red Cap",veggie:0.5,health:1,hunger:0,sanity:-10,perish:q,
stack:40},green_mushroom:{name:"Green Cap",veggie:0.5,health:0,hunger:12.5,sanity:-50,perish:q,stack:40},green_mushroom_cooked:{name:"Cooked Green Cap",veggie:0.5,health:-1,hunger:0,sanity:15,perish:q,stack:40},blue_mushroom:{name:"Blue Cap",veggie:0.5,health:20,hunger:12.5,sanity:-15,perish:q,stack:40},blue_mushroom_cooked:{name:"Cooked Blue Cap",veggie:0.5,health:-3,hunger:0,sanity:10,perish:q,stack:40},petals:{name:"Petals",uncookable:!0,health:1,hunger:0,sanity:-2.5,perish:m,stack:40},petals_evil:{name:"Dark Petals",
uncookable:!0,health:0,hunger:0,sanity:-5,perish:m,stack:40},seeds:{name:"Seeds",uncookable:!0,health:0,hunger:4.6875,perish:ra,stack:40},seeds_cooked:{name:"Toasted Seeds",uncookable:!0,health:1,hunger:4.6875,perish:q,stack:40},spoiled_food:{name:"Rot",uncookable:!0,health:-1,hunger:-10,stack:40},tallbirdegg:{name:"Tallbird Egg",egg:4,health:3,hunger:25},tallbirdegg_cooked:{name:"Fried Tallbird Egg",egg:4,precook:1,health:0,hunger:37.5,perish:m},trunk_summer:{name:"Koalefant Trunk",uncookable:!0,
ismeat:!0,health:30,hunger:37.5,perish:m,stack:20},trunk_summer_cooked:{name:"Koalefant Trunk Steak",uncookable:!0,ismeat:!0,health:40,hunger:75,perish:v,stack:20},twigs:{name:"Twigs",inedible:1},carrot:{name:"Carrot",isveggie:!0,veggie:1,health:1,hunger:12.5,perish:q,sanity:0,stack:40},carrot_cooked:{name:"Roasted Carrot",isveggie:!0,veggie:1,precook:1,health:3,hunger:12.5,perish:m,sanity:0,stack:40},corn:{name:"Corn",ideal:!0,isveggie:!0,veggie:1,health:3,hunger:25,perish:q,sanity:0,stack:40},corn_cooked:{name:"Popcorn",
isveggie:!0,veggie:1,precook:1,health:3,hunger:12.5,perish:v,sanity:0,stack:40},pumpkin:{name:"Pumpkin",isveggie:!0,veggie:1,health:3,hunger:37.5,perish:q,sanity:0,stack:20},pumpkin_cooked:{name:"Hot Pumpkin",isveggie:!0,veggie:1,precook:1,health:8,hunger:37.5,perish:m,sanity:0,stack:20},eggplant:{name:"Eggplant",isveggie:!0,veggie:1,health:8,hunger:25,perish:q,sanity:0,stack:20},eggplant_cooked:{name:"Braised Eggplant",isveggie:!0,veggie:1,precook:1,health:20,hunger:25,perish:m,sanity:0,stack:20},
durian:{name:"Durian",isfruit:!0,monster:1,fruit:1,health:-3,hunger:25,perish:q,sanity:-5,stack:20},durian_cooked:{name:"Extra Smelly Durian",isfruit:!0,monster:1,fruit:1,precook:1,health:0,hunger:25,perish:m,sanity:-5,stack:20},pomegranate:{name:"Pomegranate",isfruit:!0,fruit:1,health:3,hunger:9.375,perish:m,sanity:0,stack:40},pomegranate_cooked:{name:"Sliced Pomegranate",isfruit:!0,fruit:1,precook:1,health:20,hunger:12.5,perish:ga,sanity:0,stack:40},dragonfruit:{name:"Dragon Fruit",isfruit:!0,fruit:1,
health:3,hunger:9.375,perish:m,sanity:0,stack:40},dragonfruit_cooked:{name:"Prepared Dragon Fruit",isfruit:!0,fruit:1,precook:1,health:20,hunger:12.5,perish:ga,sanity:0,stack:40},berries:{name:"Berries",isfruit:!0,fruit:0.5,health:0,hunger:9.375,perish:m,sanity:0,stack:40},berries_cooked:{name:"Roasted Berries",isfruit:!0,fruit:0.5,precook:1,health:1,hunger:12.5,perish:ga,sanity:0,stack:40}},Ya=function(){return this.op+this.qty},Za={"=":function(a){return a===this.qty},">":function(a){return a>this.qty},
"<":function(a){return a<this.qty},">=":function(a){return a>=this.qty},"<=":function(a){return a<=this.qty}},sa={test:function(a){return!!a},toString:function(){return""}},u=function(a,c){return{op:a,qty:c,test:Za[a],toString:Ya}},$a=function(a,c,b){return this.item1.test(a,c,b)||this.item2.test(a,c,b)},ab=function(){return this.item1+" or "+this.item2},Da=function(a,c){return{item1:a,item2:c,test:$a,toString:ab,cancel:a.cancel||c.cancel}},bb=function(a,c,b){return!this.item.test(a,c,b)},cb=function(){return this.item.toString().substring(0,
this.item.toString().length-1)+"|strike]"},p=function(a){return{item:a,test:bb,toString:cb,cancel:!0}},db=function(a,c){return(c[this.name]||0)+(c[this.name+"_cooked"]||0)},eb=function(){return"[*"+h[this.name].name+"|"+h[this.name].img+" "+h[this.name].name+"]"+(h[this.name].cook?"[*"+h[this.name].cook.name+"|"+h[this.name].cook.img+"]":"")+(h[this.name].raw?"[*"+h[this.name].raw.name+"|"+h[this.name].raw.img+"]":"")+(this.qty?this.qty:"")},B=function(a,c){return{name:a,qty:c||sa,test:db,toString:eb}},
fb=function(a,c){return c[this.name]},gb=function(){return"[*"+h[this.name].name+"|"+h[this.name].img+" "+h[this.name].name+"]"+(this.qty?this.qty:"")},C=function(a,c){return{name:a,qty:c||sa,test:fb,toString:gb}},hb=function(a,c,b){return b[this.tag]},ib=function(){return"[tag:"+this.tag+"|"+this.tag+"]"+(this.qty?this.qty:"")},e=function(a,c){return{tag:a,qty:c||sa,test:hb,toString:ib}},f={butterflymuffin:{name:"Butter Muffin",test:function(a,c,b){return c.butterflywings&&!b.meat&&b.veggie},requires:"Butterfly Wings, veggie",
requirements:[B("butterflywings"),p(e("meat")),e("veggie")],priority:1,weight:1,foodtype:"veggie",health:20,hunger:37.5,perish:v,sanity:5,cooktime:2},frogglebunwich:{name:"Froggle Bunwich",test:function(a,c,b){return(c.froglegs||c.froglegs_cooked)&&b.veggie},requirements:[B("froglegs"),e("veggie")],priority:1,foodtype:"meat",health:20,hunger:37.5,perish:v,sanity:5,cooktime:2},taffy:{name:"Taffy",test:function(a,c,b){return b.sweetener&&3<=b.sweetener&&!b.meat},requirements:[e("sweetener",u(">=",3),
p(e("meat")))],priority:10,foodtype:"veggie",health:-3,hunger:25,perish:v,sanity:15,cooktime:2},pumpkincookie:{name:"Pumpkin Cookie",test:function(a,c,b){return(c.pumpkin||c.pumpkin_cooked)&&b.sweetener&&2<=b.sweetener},requirements:[B("pumpkin"),e("sweetener",u(">=",2))],priority:10,foodtype:"veggie",health:0,hunger:37.5,perish:q,sanity:15,cooktime:2},stuffedeggplant:{name:"Stuffed Eggplant",test:function(a,c,b){return(c.eggplant||c.eggplant_cooked)&&b.veggie&&1<b.veggie},requirements:[B("eggplant"),
e("veggie",u(">",1))],priority:1,foodtype:"veggie",health:3,hunger:37.5,perish:v,sanity:5,cooktime:2},fishsticks:{name:"Fishsticks",test:function(a,c,b){return b.fish&&c.twigs&&b.inedible&&1>=b.inedible},requirements:[e("fish"),C("twigs"),e("inedible"),e("inedible",u("<=",1))],priority:10,foodtype:"meat",health:40,hunger:37.5,perish:q,sanity:5,cooktime:2},honeynuggets:{name:"Honey Nuggets",test:function(a,c,b){return c.honey&&b.meat&&1.5>=b.meat&&!b.inedible},requirements:[C("honey"),e("meat",u("<=",
1.5)),p(e("inedible"))],priority:2,foodtype:"meat",health:20,hunger:37.5,perish:v,sanity:5,cooktime:2},honeyham:{name:"Honey Ham",test:function(a,c,b){return c.honey&&b.meat&&1.5<b.meat&&!b.inedible},requirements:[C("honey"),e("meat",u(">",1.5)),p(e("inedible"))],priority:2,foodtype:"meat",health:30,hunger:75,perish:v,sanity:5,cooktime:2},dragonpie:{name:"Dragonpie",test:function(a,c,b){return(c.dragonfruit||c.dragonfruit_cooked)&&!b.meat},requirements:[B("dragonfruit"),p(e("meat"))],priority:1,foodtype:"veggie",
health:40,hunger:75,perish:v,sanity:5,cooktime:2},kabobs:{name:"Kabobs",test:function(a,c,b){return b.meat&&c.twigs&&(!b.monster||1>=b.monster)&&b.inedible&&1>=b.inedible},requirements:[e("meat"),C("twigs"),Da(p(e("monster")),e("monster",u("<=",1))),e("inedible"),e("inedible",u("<=",1))],priority:5,foodtype:"meat",health:3,hunger:37.5,perish:v,sanity:5,cooktime:2},mandrakesoup:{name:"Mandrake Soup",test:function(a,c){return c.mandrake},requirements:[C("mandrake")],priority:10,foodtype:"veggie",health:100,
hunger:150,perish:m,sanity:5,cooktime:3},baconeggs:{name:"Bacon and Eggs",test:function(a,c,b){return b.egg&&1<b.egg&&b.meat&&1<b.meat&&!b.veggie},requirements:[e("egg",u(">",1)),e("meat",u(">",1)),p(e("veggie"))],priority:10,foodtype:"meat",health:20,hunger:75,perish:F,sanity:5,cooktime:2},meatballs:{name:"Meatballs",test:function(a,c,b){return b.meat&&!b.inedible},requirements:[e("meat"),p(e("inedible"))],priority:-1,foodtype:"meat",health:3,hunger:62.5,perish:q,sanity:5,cooktime:0.75},bonestew:{name:"Meaty Stew",
test:function(a,c,b){return b.meat&&3<=b.meat&&!b.inedible},requirements:[e("meat",u(">=",3)),p(e("inedible"))],priority:0,foodtype:"meat",health:12,hunger:150,perish:q,sanity:5,cooktime:0.75},perogies:{name:"Pierogi",test:function(a,c,b){return b.egg&&b.meat&&b.veggie&&!b.inedible},requirements:[e("egg"),e("meat"),e("veggie"),p(e("inedible"))],priority:5,foodtype:"meat",health:40,hunger:37.5,perish:F,sanity:5,cooktime:1},turkeydinner:{name:"Turkey Dinner",test:function(a,c,b){return c.drumstick&&
1<c.drumstick&&b.meat&&1<b.meat&&(b.veggie||b.fruit)},requirements:[C("drumstick",u(">",1)),e("meat",u(">",1)),Da(e("veggie"),e("fruit"))],priority:10,foodtype:"meat",health:20,hunger:75,perish:m,sanity:5,cooktime:3},ratatouille:{name:"Ratatouille",test:function(a,c,b){return!b.meat&&b.veggie&&!b.inedible},requirements:[p(e("meat")),e("veggie"),p(e("inedible"))],priority:0,foodtype:"veggie",health:3,hunger:25,perish:v,sanity:5,cooktime:1},jammypreserves:{name:"Fist Full of Jam",test:function(a,c,
b){return b.fruit&&!b.meat&&!b.veggie&&!b.inedible},requirements:[e("fruit"),p(e("meat")),p(e("veggie")),p(e("inedible"))],priority:0,foodtype:"veggie",health:3,hunger:37.5,perish:v,sanity:5,cooktime:0.5},fruitmedley:{name:"Fruit Medley",test:function(a,c,b){return b.fruit&&3<=b.fruit&&!b.meat&&!b.veggie},requirements:[e("fruit",u(">=",3)),p(e("meat")),p(e("veggie"))],priority:0,foodtype:"veggie",health:20,hunger:25,perish:m,sanity:5,cooktime:0.5},fishtacos:{name:"Fish Tacos",test:function(a,c,b){return b.fish&&
(c.corn||c.corn_cooked)},requirements:[e("fish"),B("corn")],priority:10,foodtype:"meat",health:20,hunger:37.5,perish:m,sanity:5,cooktime:0.5},waffles:{name:"Waffles",test:function(a,c,b){return c.butter&&(c.berries||c.berries_cooked)&&b.egg},requirements:[C("butter"),B("berries"),e("egg")],priority:10,foodtype:"veggie",health:60,hunger:37.5,perish:m,sanity:5,cooktime:0.5},monsterlasagna:{name:"Monster Lasagna",test:function(a,c,b){return b.monster&&2<=b.monster&&!b.inedible},requirements:[e("monster",
u(">=",2)),p(e("inedible"))],priority:10,foodtype:"meat",health:-20,hunger:37.5,perish:m,sanity:-20,cooktime:0.5},wetgoop:{name:"Wet Goop",test:function(){return!0},requirements:[],trash:!0,priority:-2,health:0,hunger:0,perish:m,sanity:0,cooktime:0.25}},P,n,Ea,jb=/^tag[: ]/,kb=/^tag:? */,H,lb=/^recipe[: ]/,mb=/^recipe:? */,ta,nb=/^ingredient[: ]/,ob=/^ingredient:? */,Fa,Ga,Ha=!1,pb=function(a){a.match=!Ha&&a.uncookable?0:0===a.lowerName.indexOf(n)||a.raw&&0===a.raw.lowerName.indexOf(n)?3:0===Ga.test(a.lowerName)?
2:Fa.test(a.lowerName)?1:0;return a.match},qb=function(a){return a.match=a[Ea]+0||0},rb=function(a){for(var c=0,b,l=!0;c<H.length;){b=H[c].test(null,a.nameObject,a);if(H[c].cancel){if(!b){l=!0;break}}else b&&(l=!1);c++}return a.match=l?0:1},sb=function(a){for(var c=0,b,l=!0;c<a.requirements.length;){b=a.requirements[c].test(null,ta.nameObject,ta);if(a.requirements[c].cancel){if(!b){l=!0;break}}else b&&(l=!1);c++}return a.match=l?0:1},tb=function(a){return a.match=a.lowerName===n?1:0},ub=function(a){return a.match=
a.lowerName===n||a.raw&&a.raw.lowerName===n||a.cook&&a.cook.lowerName===n?1:0},T=function(a,c){var b,l;return a.match===c.match?(b=a.raw?a.raw.name:a.name,l=c.raw?c.raw.name:c.name,b!==l?b>l?1:b<l?-1:0:a.name===c.name?0:a.raw===c?1:-1):c.match-a.match};P=function(a,c,b){Ha=!!b;n=c.toLowerCase();if(jb.test(n))return Ea=n.split(kb)[1],a.filter(qb).sort(T);if(lb.test(n))return(H=f.byName(n.split(mb)[1].toLowerCase()))?(H=H.requirements,a.filter(rb).sort(T)):[];if(nb.test(n))return(ta=h.byName(n.split(ob)[1].toLowerCase()))?
a.filter(sb).sort(T):[];if(0===n.indexOf("*"))return n=n.substring(1),a.filter(tb).sort(T);if(0===n.indexOf("~"))return n=n.substring(1),a.filter(ub).sort(T);Ga=RegExp("\\b"+n+".*");Fa=RegExp("\\b"+n.split("").join(".*")+".*");return a.filter(pb).sort(T)};var ua=function(a,c,b){var l,d,e;for(l=0;l<a.length;l++)if(e=a[l],null!==e)for(d in c[e.id]=1+(c[e.id]||0),e)e.hasOwnProperty(d)&&"perish"!==d&&!isNaN(e[d])?b[d]=e[d]+(b[d]||0):"perish"===d&&(b[d]=Math.min(b[d]||F,e[d]))},va,wa,U;va=function(a,c,
b,l){var d,e;a.length=0;wa={};U={};ua(c,wa,U);for(c=0;c<f.length;c++){e=!1;for(d=0;d<f[c].requirements.length;d++)if(f[c].requirements[d].test(null,wa,U))f[c].requirements[d].cancel||(e=!0);else if(!l&&f[c].requirements[d].cancel){e=!1;break}else if(l&&!f[c].requirements[d].cancel){e=!1;break}e&&(!b||-1===b.indexOf(f[c]))&&a.push(f[c])}U.img="";U.name="Combined";return a};var Ia,X=[],xa,R;Ia=function(a){X.length=0;xa={};R={};ua(a,xa,R);for(a=0;a<f.length;a++)f[a].test(null,xa,R)&&X.push(f[a]);X.sort(function(a,
b){return b.priority-a.priority});R.img="";R.name="Combined";X.unshift(R);return X};var S=document.createElement("canvas"),ya=S.getContext&&S.toDataURL&&S.getContext("2d"),Y=document.createElement("canvas"),Ja=Y.getContext&&Y.getContext("2d"),K={},za={},Ka=!!ya,ha=[],vb=function(a){return function(c){c=c.target;ya.clearRect(0,0,64,64);ya.drawImage(c,0,0,64,64);Ja.clearRect(0,0,32,32);Ja.drawImage(c,0,0,32,32);try{K[a]=S.toDataURL(),za[a]=Y.toDataURL()}catch(b){Ka=!1}ha.filter(function(c){return c.url===
a}).forEach(function(c){c.url===a&&(delete c.img.dataset.pending,ia&&c.img.removeAttribute("data-pending"),c.img.src=32===c.d?za[a]||a:K[a]||a)});ha=ha.filter(function(c){return c.url!==a})}},La=function(a,c,b){a.dataset.pending=c;ia&&a.setAttribute("data-pending",c);ha.push({url:c,img:a,d:b})},V=function(a,c){var b=new Image,l;Ka?K[a]?b.src=32===c?za[a]:K[a]:(null!==K[a]&&(K[a]=null,l=new Image,l.addEventListener("load",vb(a),!1),l.src=a),La(b,a,c)):b.src=a;return b};S.width=64;S.height=64;Y.width=
32;Y.height=32;V.queue=La;var ja,wb=/\[([^\|]*)\|([^\|\]]*)\|?([^\|\]]*)\]/,Ma=/([^\|]\]\[[^\|]+\|[^\|\]]+)\|?([^\|\](?:left)]*)(?=\])/g,xb=/(\[[^\|]+\|[^\|\]]+)\|?([^\|\]]*)(?=\]\[)(?!\]\[\|)/g,Na=function(a,c,b){return c+"|"+(0===b.length?"left":b+" left")},yb=function(a,c,b){return c+"|"+(0===b.length?"right":b+" right")},zb=/_(\w)/g,Ab=function(a,c){return" "+c.toUpperCase()};ja=function(a){var c=a&&a.replace(Ma,Na).replace(Ma,Na).replace(xb,yb);a=c&&c.split(wb);var b,l,d,e;if(!a||1===a.length)return c;
c=document.createDocumentFragment();c.appendChild(document.createTextNode(a[0]));for(b=1;b<a.length;b+=4)""===a[b]&&""===a[b+1]?c.appendChild(document.createElement("br")):(l=document.createElement("span"),l.className=""===a[b+2]?"link":"link "+a[b+2],l.dataset.link=a[b],ia&&l.setAttribute("data-link",a[b]),a[b+1]&&0===a[b+1].indexOf("img/")?(l.appendChild(document.createTextNode(a[b+1].split(" ").slice(1).join(" "))),d=a[b+1].split(" ")[0],e=V(d,32),e.title=(d.substr(4,1).toUpperCase()+d.substr(5).replace(zb,
Ab)).split(".")[0],l.appendChild(e)):l.appendChild(document.createTextNode(a[b+1]?a[b+1]:a[b])),c.appendChild(l)),c.appendChild(document.createTextNode(a[b+3]));return c};var g,ca=0,Oa=document.getElementById("main"),Bb=document.getElementById("food"),Cb=document.getElementById("recipes"),Db=document.getElementById("navbar"),ia=!1;document.documentElement.dataset||(ia=!0,Object.defineProperty(Element.prototype,"dataset",{get:function(){this.ds||(this.ds={},Array.prototype.forEach.call(this.attributes,
function(a){0===a.name.indexOf("data-")&&(this.ds[a.name.substring(5)]=a.value)},this));return this.ds}}));document.getElementById("stalehealth").appendChild(document.createTextNode(Math.round(333)/10+"%"));document.getElementById("stalehunger").appendChild(document.createTextNode(Math.round(667)/10+"%"));document.getElementById("spoiledhunger").appendChild(document.createTextNode(Math.round(500)/10+"%"));document.getElementById("spoiledsanity").appendChild(document.createTextNode(10));document.getElementById("perishground").appendChild(document.createTextNode(Math.round(1500)/
10+"%"));document.getElementById("perishwinter").appendChild(document.createTextNode(Math.round(750)/10+"%"));document.getElementById("perishfridge").appendChild(document.createTextNode(Math.round(500)/10+"%"));var k,x=function(a,c){return"[tag:"+a+"|"+(c||a)+"]"};for(g in h)if(h.hasOwnProperty(g)){var d=h[g];d.match=0;d.lowerName=d.name.toLowerCase();d.id=g;d.nameObject={};d.nameObject[g]=1;d.img="img/"+d.name.replace(/ /g,"_").toLowerCase()+".png";-1!==g.indexOf("_cooked")&&(d.cooked=!0);h[g+"_cooked"]&&
(d.cook=h[g+"_cooked"],h[g+"_cooked"].raw=d);d.info=[];k=d.info;d.fruit&&k.push(x("fruit")+(1===d.fruit?"":"\u00d7"+d.fruit));d.veggie&&k.push(x("veggie","vegetable")+(1===d.veggie?"":"\u00d7"+d.veggie));d.meat&&k.push(x("meat")+(1===d.meat?"":"\u00d7"+d.meat));d.egg&&k.push(x("egg")+(1===d.egg?"":"\u00d7"+d.egg));d.fish&&k.push(x("fish"));d.magic&&k.push(x("magic"));d.decoration&&k.push(x("decoration"));d.inedible&&k.push(x("inedible"));d.monster&&k.push(x("monster","monster food"));d.sweetener&&
k.push(x("sweetener"));d.fat&&k.push(x("fat"));d.dairy&&k.push(x("dairy"));d.comment&&k.push(d.comment);h[ca++]=d}h.length=ca;ca=0;for(g in f)f.hasOwnProperty(g)&&(f[g].match=0,f[g].name=f[g].name||g,f[g].id=g,f[g].lowerName=f[g].name.toLowerCase(),f[g].weight=f[g].weight||1,f[g].priority=f[g].priority||0,f[g].img="img/"+f[g].name.replace(/ /g,"_").toLowerCase()+".png",f[g].requirements&&(f[g].requires=ja(f[g].requirements.join("; "))),f[ca++]=f[g]);f.length=ca;f.forEach=Array.prototype.forEach;f.filter=
Array.prototype.filter;f.sort=Array.prototype.sort;f.byName=function(a){for(var c=this.length;c--;)if(this[c].lowerName===a)return this[c]};var Eb=function(a,c){return a+"[recipe:"+c.name+"|"+c.img+"]"};for(g in h)h.hasOwnProperty(g)&&(isNaN(g)&&isNaN(h[g]))&&(d=h[g],k=d.info,d.cooked&&k.push("from [*"+d.raw.name+"|"+d.raw.img+"]"),d.cook&&k.push("cook: [*"+d.cook.name+"|"+d.cook.img+"]"),d.dry&&(d.dry instanceof Object||(d.dry=h[d.dry]),k.push("dry in "+d.drytime/r+" "+(1===d.drytime/r?"day":"days")+
": [*"+d.dry.name+"|"+d.dry.img+"]")),d.info=k.join("; "),d.uncookable?d.info+="[|]cannot be added to crock pot":(d.recipes=[],f.forEach(function(a){for(var c=!1,b=a.requirements,l=b.length;l--;)if(b[l].test(null,d.nameObject,d))!b[l].cancel&&!c&&(c=!0);else if(b[l].cancel){c=!1;break}c&&d.recipes.push(a)}),0<d.recipes.length&&(d.ingredient=!0,d.info+=d.recipes.reduce(Eb,"[|][ingredient:"+d.name+"|Recipes] "))),d.info=ja(d.info));h.forEach=Array.prototype.forEach;h.filter=Array.prototype.filter;h.sort=
Array.prototype.forEach;h.byName=function(a){for(var c=this.length;c--;)if(this[c].lowerName===a)return this[c]};var ka="id health hunger fruit veggie meat egg fish magic decoration inedible monster sweetener fat dairy".split(" ");fa=O=void 0;h.filter(function(a){return!a.uncookable&&!a.skip&&(a.ideal||!a.cook&&(!a.raw||!a.raw.ideal))}).map(function(a){for(var c={},b=ka.length;b--;)a.hasOwnProperty(ka[b])&&(c[ka[b]]=a[ka[b]]);return c});O=f.filter(function(a){return!a.trash}).sort(function(a,c){return c.priority-
a.priority});fa=O.map(function(a){return a.test});O.map(function(a){return a.test.toString()});O.map(function(a){return a.priority});var la,Pa=Db.getElementsByTagName("li"),da={},ea={},G,Q,L,Fb=function(a){la(a.target.dataset.tab)},E;la=function(a){L.className="";L=da[a];Q.style.display="none";Q=ea[a];L.className="selected";Q.style.display="block"};for(g=0;g<Pa.length;g++)E=Pa[g],E.dataset.tab&&(da[E.dataset.tab]=E,ea[E.dataset.tab]=document.getElementById(E.dataset.tab),ea[E.dataset.tab].style.display=
"none",E.addEventListener("selectstart",function(a){a.preventDefault()},!1),E.addEventListener("click",Fb,!1));L=da.simulator;Q=ea.simulator;window.localStorage&&localStorage.foodGuideState&&("["===localStorage.foodGuideState[0]?(G={},G.pickers=JSON.parse(localStorage.foodGuideState),localStorage.foodGuideState=JSON.stringify(G)):G=JSON.parse(localStorage.foodGuideState),G.activeTab&&da[G.activeTab]&&(L=da[G.activeTab],Q=ea[G.activeTab]));L.className="selected";Q.style.display="block";window.addEventListener("beforeunload",
function(){var a;window.localStorage&&(localStorage.foodGuideState||(localStorage.foodGuideState="{}"),a=JSON.parse(localStorage.foodGuideState),a.activeTab=L.dataset.tab,localStorage.foodGuideState=JSON.stringify(a))});var Gb=function(a){a.dataset.pending&&V.queue(a,a.dataset.pending,32)},Aa=function(a){var c,b,d,e=document.createElement("tr"),h;for(c=1;c<arguments.length;c++)b=document.createElement(a),h=(d=arguments[c])&&d.indexOf?d:d.toString(),d instanceof DocumentFragment?(b.appendChild(d.cloneNode(!0)),
Array.prototype.forEach.call(b.getElementsByTagName("img"),Gb)):0===h.indexOf("img/")?(d=V(h),b.appendChild(d)):b.appendChild(document.createTextNode(h)),e.appendChild(b);return e},Z=function(a,c,b,d,e,h,f,g,m,q){var s,n,t,M=!1,k,p,j,r=function(a){var c;if((!q||j<q)&&(!g||g(a)))c=b(a),f&&f(a)&&(c.className="highlighted",k||(k=c),p=c),s.appendChild(c),j++},y=function(b,d,l){var f,g;if(d||b&&""!==b.target.dataset.sort||t){f=d||b&&b.target.dataset.sort||t;e&&(g=c.shift());"name"===f?c.sort(function(a,
c){var b=a.raw?a.raw.name:a.name,d=c.raw?c.raw.name:c.name;return b!==d?b>d?1:b<d?-1:0:a.name===c.name?0:a.raw===c?1:-1}):c.sort(function(a,c){var b=a[f],d=c[f];return!isNaN(b)&&!isNaN(d)?d-b:isNaN(b)&&isNaN(d)?0:isNaN(b)?1:-1});if(d||b)t===f?M=!M:(t=f,M=!1);M&&c.reverse();e&&c.unshift(g)}b=document.createElement("tr");for(n in a)d=document.createElement("th"),d.appendChild(document.createTextNode(n)),a[n]&&(a[n]===t&&(d.style.background=M?"#555":"#ccc",d.style.color=M?"#ccc":"#555",d.style.borderRadius=
"4px"),d.style.cursor="pointer",d.dataset.sort=a[n],d.addEventListener("click",y,!1)),b.appendChild(d);d=s;s=document.createElement("table");s.appendChild(b);p=k=null;j=0;c.forEach(r);h&&(s.className="links",Array.prototype.forEach.call(s.getElementsByClassName("link"),function(a){a.addEventListener("click",h,!1)}));d&&d.parentNode.replaceChild(s,d);l&&(k&&k.offsetTop+s.offsetTop+Oa.offsetTop+k.offsetHeight>window.scrollY+window.innerHeight?k.scrollIntoView(!0):p&&p.offsetTop+s.offsetTop+Oa.offsetTop<
window.scrollY&&p.scrollIntoView(!1))};d?y(null,d):y();s.update=function(a){y(null,null,a)};s.setMaxRows=function(a){q=a;this.update()};return s},z=function(a){return isNaN(a)?"":0<a?"+"+a:a},Qa=function(a,c){return a<c?(c-a)/Math.abs(a):a>c?-(a-c)/Math.abs(a):0},Ra=function(a,c){return!isNaN(a)&&a!==c?" ("+z((100*(a<c?(c-a)/Math.abs(a):a>c?-(a-c)/Math.abs(a):0)).toFixed(0))+"%)":""},Sa=function(a){return Aa("td",a.img?a.img:"",a.name,z(a.health),z(a.hunger),isNaN(a.sanity)?"":z(a.sanity),isNaN(a.perish)?
"Never":a.perish/r+" "+(1===a.perish/r?"day":"days"),a.info||"")},na=function(a,c,b){return Aa("td",a.img?a.img:"",a.name,z(a.health)+Ra(c,a.health),z(a.hunger)+Ra(b,a.hunger),isNaN(a.sanity)?"":z(a.sanity),isNaN(a.perish)?"Never":a.perish/r+" "+(1===a.perish/r?"day":"days"),(a.cooktime*Xa+0.5|0)+" secs",a.priority||"0",a.requires||"")},oa,pa=[],Ta=[],Ba=Z({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish",Info:""},Array.prototype.slice.call(h),Sa,"name",!1,function(a){a=
!a.target?a:"IMG"===a.target.tagName?a.target.parentNode.dataset.link:a.target.dataset.link;"recipe:"===a.substring(0,7)||"ingredient:"===a.substring(0,11)?(la("crockpot"),"recipe:"===a.substring(0,7)&&(a="*"+a.substring(7)),Ta=P(f,a),Ua.update(!0)):(oa!==a?(oa=a,pa=P(h,a)):(oa="",pa.length=0),Ba.update(!0))},function(a){return-1!==pa.indexOf(a)}),Ua=Z({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},Array.prototype.slice.call(f),
na,"name",!1,function(a){a=!a.target?a:"IMG"===a.target.tagName?a.target.parentNode.dataset.link:a.target.dataset.link;la("foodlist");oa=a;pa=P(h,a);Ba.update(!0)},function(a){return-1!==Ta.indexOf(a)});Bb.appendChild(Ba);Cb.appendChild(Ua);var Hb=function(a,c){return a+"[ingredient:"+h[c.id].name+"|"+h[c.id].img+"]"},Va=function(a){var c=document.createElement("button");c.appendChild(document.createTextNode("Calculate efficient recipes (may take some time)"));c.className="makablebutton";c.addEventListener("click",
function(){var b=[],d=a?a.length:null,e,g,m=[],n,k,q,s,p=[],t=[],M,r,u,j=function(a){return-1!==t.indexOf(a.id)},v=function(a){return-1!==this.indexOf(h[a])},y=function(a){-1!==t.indexOf(a.target.dataset.id)&&t.splice(t.indexOf(a.target.dataset.id),1);-1!==p.indexOf(a.target.dataset.id)?(p.splice(p.indexOf(a.target.dataset.id),1),a.target.className=""):(p.push(a.target.dataset.id),a.target.className="selected");u.update()},x=function(a){-1!==p.indexOf(a.target.dataset.id)&&p.splice(p.indexOf(a.target.dataset.id),
1);-1!==t.indexOf(a.target.dataset.id)?(t.splice(t.indexOf(a.target.dataset.id),1),a.target.className=""):(t.push(a.target.dataset.id),a.target.className="excluded");u.update();a.preventDefault()},E=function(a){g&&(g.className="");e===a.target.dataset.recipe?e=g=null:(e=a.target.dataset.recipe,g=a.target,a.target.className="selected");u.update()};null===d&&(d=h.length,a=h);for(;d--;)a[d].cook&&(-1===b.indexOf(a[d].cook)&&!a[d].cook.uncookable)&&b.push(a[d].cook),!a[d].uncookable&&((a[d].ideal||!a[d].cook||
a[d].cook.uncookable)&&-1===b.indexOf(a[d]))&&b.push(a[d]);M=[];u=Z({"":"",Name:"name",Health:"health","Health+":"healthpls",Hunger:"hunger","Hunger+":"hungerpls",Ingredients:""},M,function(a){var c=a.recipe;return Aa("td",c.img?c.img:"",c.name,z(c.health),z(a.healthpls)+" ("+z(100*a.healthpct|0)+"%)",z(c.hunger),z(a.hungerpls)+" ("+z(100*a.hungerpct|0)+"%)",ja(a.ingredients.reduce(Hb,"")))},"hungerpls",!1,null,null,function(a){return(!e||a.recipe.name===e)&&(!t.length||!a.ingredients.some(j))&&(!p.length||
p.every(v,a.ingredients))},0,15);r=document.createElement("div");k=document.createElement("div");k.appendChild(document.createTextNode("Computing combinations.."));r.appendChild(k);n=document.createElement("div");n.className="recipeFilter";r.appendChild(n);q=document.createElement("div");q.className="foodFilter";b.forEach(function(a){var c=V(a.img,32);c.dataset.id=a.id;c.addEventListener("click",y,!1);c.addEventListener("contextmenu",x,!1);c.title=a.name;q.appendChild(c)});r.appendChild(q);d=document.createElement("div");
s=document.createElement("input");s.type="text";s.placeholder="use custom filter";s.className="customFilterInput";d.appendChild(s);r.appendChild(u);c.parentNode.replaceChild(r,c);var P=function(){k.firstChild.textContent="Found "+M.length+" valid recipes.."},N=function(){u.setMaxRows(30);k.firstChild.textContent="Found "+M.length+" valid recipes. Showing top 30 for selected recipe using all selected ingredients. Right-click to exclude ingredients."},G=fa.length,J=[],ma=0,B,C=60,L=function(a){return b[a]},
F,aa=b.length,I=[0,0,0,0],W,D=0,w=0;F=function(a){for(var c;a--&&1<aa;){c=I.map(L);var b=void 0,d=null,e={},l={};ua(c,e,l);for(b=0;b<G&&(null===d||O[b].priority>=d);b++)fa[b](null,e,l)&&(J.push({recipe:O[b],ingredients:c,tags:{health:l.health,hunger:l.hunger}}),d=O[b].priority);I[0]++;for(c=0;I[c]>=aa;)c++,I[c]++;W=4;for(D=0;W--;)I[W]>=aa?I[W]=D:I[W]>D&&(D=I[W]);if(4===c)return!1;w++}return!0};var H=function(){var a=!1,c=Date.now();for(F(C)?setTimeout(H,0):a=!0;ma<J.length&&J[ma];ma++){var b=J[ma],
d=void 0,e=void 0;if(-1===m.indexOf(b.recipe.name)){for(d=0;d<m.length&&!(b.recipe.name<m[d]);d++);m.splice(d,0,b.recipe.name);e=V(f.byName(m[d].toLowerCase()).img);e.dataset.recipe=m[d];e.addEventListener("click",E,!1);e.title=b.recipe.name;d<n.childNodes.length?n.insertBefore(e,n.childNodes[d]):n.appendChild(e)}b.name||(b.name=b.recipe.name,b.health=b.recipe.health,b.ihealth=b.tags.health,b.healthpls=b.recipe.health-b.tags.health,b.hunger=b.recipe.hunger,b.ihunger=b.tags.hunger,b.hungerpls=b.recipe.hunger-
b.tags.hunger,b.healthpct=Qa(b.tags.health,b.recipe.health),b.hungerpct=Qa(b.tags.hunger,b.recipe.hunger),b.sanity=b.recipe.sanity,b.perish=b.recipe.perish);M.push(b)}B!==Date.now()-c&&(B=Date.now()-c+1,C=38/B*C+1|0);P&&P();a&&N&&N()};H()},!1);return c};document.getElementById("statistics").appendChild(Va());window.food=h;window.recipes=f;window.matchingNames=P;for(var ba=function(a,c){var b=!1;null!==c?a.dataset.id=c.id:a.nextSibling&&null!==J(a.nextSibling)?(ba(a,J(a.nextSibling)),ba(a.nextSibling,
null),b=!0):a.dataset.id=null;b||(null!==c?a.firstChild?a.replaceChild(V(c.img),a.firstChild):a.appendChild(V(c.img)):a.firstChild&&a.removeChild(a.firstChild),a.title=c?c.name:"")},J=function(a){return h[a.dataset.id]||f[a.dataset.id]||null},Wa=document.getElementsByClassName("ingredientpicker"),Ca=Wa.length;Ca--;)(function(){var a=document.createElement("span"),c,b=document.createElement("div"),d=document.createElement("ul"),e=Wa[Ca],g=Ca,m,n="recipes"===e.dataset.type?f:h,p=!e.dataset.cookable,
k=e.nextSibling,s=k.getElementsByClassName("ingredient"),q,t=[],r,u=[],v=[],j=null,x=!1,y=document.getElementById("results"),z=document.getElementById("discoverfood"),B=document.getElementById("discover"),C=document.getElementById("makable"),N=document.createElement("span"),E=function(a,c){for(var b=a;b.previousSibling;)if(b=b.previousSibling,c(b))return b;return null},G=function(a,c){for(var b=a;b.nextSibling;)if(b=b.nextSibling,c(b))return b;return null},F=!1,H=function(a){var b=h[a]||f[a]||null;
if(q){for(a=0;a<s.length;a++)if(null===J(s[a]))return ba(s[a],b),x&&r(),a;return-1}-1===s.indexOf(a)&&(s.push(a),a=document.createElement("span"),a.className="ingredient",ba(a,b),a.addEventListener("click",aa,!1),k.appendChild(a),x&&r());return 1},L=function(a){-1!==H(("IMG"===a.target.tagName?a.target.parentNode:a.target).dataset.id)&&a&&a.preventDefault&&a.preventDefault()},O=function(a){var b=V(a.img,32),c=document.createElement("span");c.appendChild(b);c.appendChild(document.createTextNode(a.name));
c.dataset.id=a.id;-1!==t.indexOf(a)&&(c.style.opacity=0.5);c.addEventListener("mousedown",L,!1);this.appendChild(c);this.dataset.length++},T=function(a){-1!==t.indexOf(h[a.dataset.id])?a.style.opacity||(a.style.opacity=0.5):a.style.opacity&&a.style.removeProperty("opacity")},aa=function(a){var b="IMG"===a.target.tagName?a.target.parentNode:a.target;if(q){if(null!==J(b))return ba(b,null),r(),b.dataset.id}else return a=s.indexOf(b.dataset.id),s.splice(a,1),k.removeChild(b),r(),s[a]||null},I=function(){var a;
c.splitTag();a=P(n,c.getSearch(),p);b.removeChild(d);d=document.createElement("div");d.dataset.length=0;a.forEach(O,d);b.appendChild(d);j=null},W=function(a){a="IMG"===a.target.tagName?a.target.parentNode.dataset.link:a.target.dataset.link;var b=P(n,a,p);1===b.length?H(b[0].id):(e.value=a,I())},D;"ingredients"===k.id?r=function(){var a,b,c,e;t=Array.prototype.map.call(s,function(a){return J(a)});a=Ia(t);b=a[0].health;c=a[0].hunger;e=Z({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",
Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},a,function(a){return na(a,b,c)},"priority",!0,W);y.firstChild&&y.removeChild(y.firstChild);y.firstChild&&(y.removeChild(y.firstChild),y.removeChild(y.firstChild));y.appendChild(e);null!==t[0]&&(va(u,t,a),0<u.length&&(y.appendChild(document.createTextNode("Add more ingredients to make:")),e=Z({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},
u,function(a){return na(a,b,c)},"priority",!1,W),y.appendChild(e)));d&&d.firstChild&&Array.prototype.forEach.call(d.getElementsByTagName("span"),T)}:"inventory"===k.id&&(r=function(){var a;t=Array.prototype.map.call(k.getElementsByClassName("ingredient"),function(a){return J(a)});z.firstChild&&z.removeChild(z.firstChild);B.firstChild&&B.removeChild(B.firstChild);C.firstChild&&C.removeChild(C.firstChild);0<t.length&&(a=Z({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish",
Info:""},t,Sa,"name"),z.appendChild(a),va(v,t,null,!0),0<v.length&&(a=Z({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},v,na,"name"),B.appendChild(a),C.appendChild(Va(t))));d&&d.firstChild&&Array.prototype.forEach.call(d.getElementsByTagName("span"),T)});0!==s.length?(q=!0,Array.prototype.forEach.call(s,function(a){ba(a,null);a.addEventListener("click",aa,!1)})):(s=[],q=!1);window.localStorage&&localStorage.foodGuideState&&
(m=JSON.parse(localStorage.foodGuideState).pickers)&&m[g]&&m[g].forEach(function(a){h[a]&&H(a)});x=!0;a.className="searchselector retracted";a.appendChild(document.createTextNode("name"));var w=document.createElement("div"),R=!1,S=null,$=[{title:"name",prefix:"",placeholder:"Filter ingredients"},{title:"tag",prefix:"tag:",placeholder:"Meat, veggie, fruit, egg, monster..."},{title:"recipe",prefix:"recipe:",placeholder:"Find ingredients used in a recipe"}],K=$[0],A=null,Q=function(){R=!1;w.style.height=
"0px";a.style.borderBottomLeftRadius="3px";w.style.borderTopLeftRadius="3px";null!==A&&(clearTimeout(A),A=null);a.className="searchselector retracted"},U=function(b){K=b;e.placeholder=K.placeholder;a.firstChild.textContent=K.title},X=function(a){U($[a.target.dataset.typeIndex]);I();Q()},Y=/: */;a.addEventListener("click",function(){R?Q():(null===S&&(w.style.height="auto",w.style.left=a.offsetLeft,w.style.top=a.offsetTop+a.offsetHeight,S=w.offsetHeight+"px",w.style.height="0px"),R=!0,w.style.height=
S,a.style.borderBottomLeftRadius="0px",w.style.borderTopLeftRadius="0px",w.style.width="auto",w.style.width=Math.max(w.offsetWidth,a.offsetWidth+1)+"px",null!==A&&(clearTimeout(A),A=null),a.className="searchselector extended")},!1);a.addEventListener("selectstart",function(a){a.preventDefault()},!1);a.addEventListener("mouseout",function(){null!==A&&clearTimeout(A);A=setTimeout(Q,500)},!1);a.addEventListener("mouseover",function(){null!==A&&(clearTimeout(A),A=null)},!1);w.addEventListener("mouseout",
function(){null!==A&&clearTimeout(A);A=setTimeout(Q,500)},!1);w.addEventListener("mouseover",function(){null!==A&&(clearTimeout(A),A=null)},!1);$.forEach(function(a,b){var c=document.createElement("div");c.appendChild(document.createTextNode(a.title));c.dataset.typeIndex=b;c.addEventListener("click",X,!1);a.element=c;w.appendChild(c)});e.parentNode.insertBefore(a,e);w.className="searchdropdown";e.parentNode.insertBefore(w,e);c={getTag:function(){return K.title},setSearchType:function(a){U($[a])},
getSearch:function(){return K.prefix+e.value},splitTag:function(){var a;a=e.value.split(Y);var b,c;if(2===a.length){b=a[0].toLowerCase()+":";c=a[1];for(a=0;a<$.length;a++)if(b===$[a].prefix){U($[a]);e.value=c;break}}}};b.className="ingredientdropdown";b.appendChild(d);b.addEventListener("mousedown",function(a){a.preventDefault()},!1);m=P(n,c.getSearch(),p);b.removeChild(d);d=document.createElement("div");d.dataset.length=0;m.forEach(O,d);b.appendChild(d);N.className="clearingredients";N.appendChild(document.createTextNode("clear"));
N.addEventListener("click",function(){if(""===e.value&&"name"===c.getTag())for(;J(k.firstChild);)aa({target:k.firstChild});else e.value="",c.setSearchType(0),I()},!1);N.addEventListener("mouseover",function(){""===e.value&&"name"===c.getTag()&&(N.firstChild.textContent="clear chosen ingredients")},!1);N.addEventListener("mouseout",function(){"clear"!==N.firstChild.textContent&&(N.firstChild.textContent="clear")},!1);k.parentNode.insertBefore(N,k);k.parentNode.insertBefore(b,k);e.addEventListener("keydown",
function(a){var b;-1!==[16,17,37,38,39,40,13].indexOf(a.keyCode)&&(b=j,13===a.keyCode?(null===j&&(j=d.firstChild||null),null!==j&&L({target:j})):null===j?40===a.keyCode&&(j=d.childNodes[1]||d.firstChild||null,null!==j&&(D=j.offsetLeft+j.offsetWidth/2,a.preventDefault())):(a.preventDefault(),37===a.keyCode?(j=j.previousSibling&&j.previousSibling.offsetTop===j.offsetTop?j.previousSibling:(a=G(j,function(a){return a.offsetTop!==j.offsetTop}))?a.previousSibling:d.lastChild,null!==j&&(D=j.offsetLeft+j.offsetWidth/
2)):39===a.keyCode?(j=j.nextSibling&&j.nextSibling.offsetTop===j.offsetTop?j.nextSibling:(a=E(j,function(a){return a.offsetTop!==j.offsetTop}))?a.nextSibling:d.firstChild,null!==j&&(D=j.offsetLeft+j.offsetWidth/2)):38===a.keyCode?((a=E(j,function(a){return D>=a.offsetLeft-1&&D<=a.offsetLeft+a.offsetWidth+1}))||(a=E(d.lastChild,function(a){return D>=a.offsetLeft-1&&D<=a.offsetLeft+a.offsetWidth+1})),j=a?a:d.firstChild):40===a.keyCode&&((a=G(j,function(a){return D>=a.offsetLeft-1&&D<=a.offsetLeft+a.offsetWidth+
1}))||(a=G(d.firstChild,function(a){return D>=a.offsetLeft-1&&D<=a.offsetLeft+a.offsetWidth+1})),j=a?a:d.lastChild)),j!==b&&(null!==b&&(b.className=""),null!==j&&(j.className="selected")))},!1);e.addEventListener("keyup",function(a){-1===[16,17,37,38,39,40,13].indexOf(a.keyCode)?I():null!==j&&a.preventDefault()},!1);e.addEventListener("focus",function(){F||(F=!0)},!1);e.addEventListener("blur",function(){F&&(F=!1)},!1);r();window.addEventListener("beforeunload",function(){var a,b;window.localStorage&&
(localStorage.foodGuideState||(localStorage.foodGuideState="{}"),a=JSON.parse(localStorage.foodGuideState),a.pickers||(a.pickers=[]),q?(b=[],b=Array.prototype.map.call(s,function(a){return(a=J(a))?a.id:null}),a.pickers[g]=b):a.pickers[g]=s,localStorage.foodGuideState=JSON.stringify(a))})})()})();
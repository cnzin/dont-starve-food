/*
Copyright (c) 2014

Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the "Software"), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
the Software, and to permit persons to whom the Software is furnished to do so,
subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
(function(){var F,L,v=480,s=3*v,h=6*v,l=10*v,u=15*v,G=20*v,I=40*v,w=2*v,fa=v/16*0.6666,e={butter:{name:"Butter",fat:1,dairy:1,health:40,hunger:25,perish:I,stack:40},butterflywings:{name:"Butterfly Wings",isveggie:!0,decoration:2,health:8,hunger:9.375,perish:h,stack:40},deerclopseyeball:{name:"Deerclops Eyeball",uncookable:!0,health:60,hunger:75,sanity:-15},bird_egg:{name:"Egg",egg:1,health:0,hunger:9.375,sanity:0,perish:l,stack:40,rot:"rottenegg"},bird_egg_cooked:{name:"Cooked Egg",egg:1,precook:1,
health:0,hunger:12.5,sanity:0,perish:h,stack:40},rottenegg:{name:"Rotten Egg",uncookable:!0,health:-1,hunger:-10,stack:40},cutlichen:{name:"Lichen",isveggie:!0,veggie:1,health:3,hunger:12.5,sanity:-5,perish:2*v},eel:{name:"Eel",ismeat:!0,meat:0.5,fish:1,health:3,hunger:9.375,perish:s,stack:40,dry:"smallmeat_dried",drytime:v},eel_cooked:{name:"Cooked Eel",ismeat:!0,health:8,hunger:12.5,perish:h,stack:40},fish:{name:"Fish",ismeat:!0,meat:0.5,fish:1,health:1,hunger:12.5,perish:s,stack:40},fish_cooked:{name:"Cooked Fish",
ismeat:!0,meat:0.5,fish:1,precook:1,health:1,hunger:12.5,perish:h,stack:40},froglegs:{name:"Frog Legs",ismeat:!0,meat:0.5,health:0,hunger:12.5,perish:h,sanity:-10,stack:40},froglegs_cooked:{name:"Cooked Frog Legs",ismeat:!0,meat:0.5,precook:1,health:1,hunger:12.5,perish:l,sanity:0,stack:40},foliage:{name:"Foliage",uncookable:!0,health:1,hunger:0,perish:h,stack:40},honey:{name:"Honey",sweetener:!0,health:3,hunger:9.375,perish:I,stack:40},honeycomb:{name:"Honeycomb",sweetener:!0},lightbulb:{name:"Light Bulb",
health:1,hunger:0,perish:h,stack:40,uncookable:!0},mandrake:{name:"Mandrake",veggie:1,magic:1,health:60,hunger:75,stack:40},mandrake_cooked:{name:"Cooked Mandrake",uncookable:!0,veggie:1,magic:1,precook:1,health:100,hunger:150,stack:40},plantmeat:{name:"Leafy Meat",uncookable:!0,health:0,hunger:12.5,sanity:-10,perish:h,stack:40},plantmeat_cooked:{name:"Cooked Leafy Meat",uncookable:!0,health:1,hunger:18.75,sanity:0,perish:l,stack:40},monstermeat:{name:"Monster Meat",ismeat:!0,meat:1,monster:!0,health:-20,
hunger:18.75,sanity:-15,perish:h,stack:20,dry:"monstermeat_dried",drytime:v},monstermeat_cooked:{name:"Cooked Monster Meat",ismeat:!0,meat:1,monster:!0,precook:1,health:-3,hunger:18.75,sanity:-10,perish:u,stack:20},monstermeat_dried:{name:"Monster Jerky",ismeat:!0,meat:1,monster:!0,dried:1,health:-3,hunger:18.75,sanity:-5,perish:G,stack:20},meat:{name:"Meat",ismeat:!0,meat:1,health:1,hunger:25,sanity:-10,perish:h,stack:20,dry:"meat_dried",drytime:w},meat_cooked:{name:"Cooked Meat",ismeat:!0,meat:1,
precook:1,health:3,hunger:25,sanity:0,perish:l,stack:20},meat_dried:{name:"Jerky",ismeat:!0,meat:1,dried:1,health:20,hunger:25,sanity:15,perish:G,stack:20},morsel:{name:"Morsel",ismeat:!0,meat:0.5,health:0,hunger:12.5,sanity:-10,perish:h,stack:40,drytime:v,dry:"smallmeat_dried"},morsel_cooked:{name:"Cooked Morsel",ismeat:!0,meat:0.5,precook:1,health:1,hunger:12.5,sanity:0,perish:l,stack:40},smallmeat_dried:{name:"Small Jerky",ismeat:!0,meat:0.5,dried:1,health:8,hunger:12.5,sanity:10,perish:G,stack:40},
drumstick:{name:"Drumstick",ismeat:!0,ideal:!0,meat:0.5,health:0,hunger:12.5,sanity:-10,perish:h,stack:20,drytime:v,dry:"smallmeat_dried"},drumstick_cooked:{name:"Fried Drumstick",ismeat:!0,meat:0.5,precook:1,health:1,hunger:12.5,perish:l,stack:20},batwing:{name:"Batilisk Wing",ismeat:!0,health:3,hunger:12.5,sanity:-10,perish:h,stack:40,drytime:w,dry:"smallmeat_dried",uncookable:!0},batwing_cooked:{name:"Cooked Batilisk Wing",ismeat:!0,health:8,hunger:18.75,sanity:0,perish:l,uncookable:!0},minotaurhorn:{name:"Guardian's Horn",
uncookable:!0,ismeat:!0,health:60,hunger:75,sanity:-15},red_mushroom:{name:"Red Cap",veggie:0.5,ideal:!0,health:-20,hunger:12.5,sanity:0,perish:l,stack:40},red_mushroom_cooked:{name:"Cooked Red Cap",veggie:0.5,health:1,hunger:0,sanity:-10,perish:l,stack:40},green_mushroom:{name:"Green Cap",veggie:0.5,ideal:!0,health:0,hunger:12.5,sanity:-50,perish:l,stack:40},green_mushroom_cooked:{name:"Cooked Green Cap",veggie:0.5,health:-1,hunger:0,sanity:15,perish:l,stack:40},blue_mushroom:{name:"Blue Cap",veggie:0.5,
ideal:!0,health:20,hunger:12.5,sanity:-15,perish:l,stack:40},blue_mushroom_cooked:{name:"Cooked Blue Cap",veggie:0.5,health:-3,hunger:0,sanity:10,perish:l,stack:40},petals:{name:"Petals",uncookable:!0,health:1,hunger:0,sanity:0,perish:h,stack:40},petals_evil:{name:"Dark Petals",uncookable:!0,health:0,hunger:0,sanity:-5,perish:h,stack:40},seeds:{name:"Seeds",uncookable:!0,health:0,hunger:4.6875,perish:I,stack:40},seeds_cooked:{name:"Toasted Seeds",uncookable:!0,health:1,hunger:4.6875,perish:l,stack:40},
spoiled_food:{name:"Rot",uncookable:!0,health:-1,hunger:-10,stack:40},tallbirdegg:{name:"Tallbird Egg",egg:4,health:3,hunger:25},tallbirdegg_cooked:{name:"Fried Tallbird Egg",egg:4,precook:1,health:0,hunger:37.5,perish:h},trunk_summer:{name:"Koalefant Trunk",uncookable:!0,ismeat:!0,health:30,hunger:37.5,sanity:0,perish:h,stack:20},trunk_summer_cooked:{name:"Koalefant Trunk Steak",uncookable:!0,ismeat:!0,health:40,hunger:75,sanity:0,perish:u,stack:20},twigs:{name:"Twigs",inedible:1},cavebanana:{name:"Cave Banana",
isfruit:!0,fruit:1,health:1,hunger:12.5,sanity:0,perish:l},cavebanana_cooked:{name:"Cooked Banana",isfruit:!0,fruit:1,precook:1,health:3,hunger:12.5,sanity:0,perish:h},carrot:{name:"Carrot",isveggie:!0,veggie:1,health:1,hunger:12.5,perish:l,sanity:0,stack:40},carrot_cooked:{name:"Roasted Carrot",isveggie:!0,veggie:1,precook:1,health:3,hunger:12.5,perish:h,sanity:0,stack:40},corn:{name:"Corn",ideal:!0,isveggie:!0,veggie:1,health:3,hunger:25,perish:l,sanity:0,stack:40},corn_cooked:{name:"Popcorn",isveggie:!0,
veggie:1,precook:1,health:3,hunger:12.5,perish:u,sanity:0,stack:40},pumpkin:{name:"Pumpkin",isveggie:!0,veggie:1,health:3,hunger:37.5,perish:l,sanity:0,stack:20},pumpkin_cooked:{name:"Hot Pumpkin",isveggie:!0,veggie:1,precook:1,health:8,hunger:37.5,perish:h,sanity:0,stack:20},eggplant:{name:"Eggplant",isveggie:!0,veggie:1,health:8,hunger:25,perish:l,sanity:0,stack:20},eggplant_cooked:{name:"Braised Eggplant",isveggie:!0,veggie:1,precook:1,health:20,hunger:25,perish:h,sanity:0,stack:20},durian:{name:"Durian",
isfruit:!0,monster:1,fruit:1,health:-3,hunger:25,perish:l,sanity:-5,stack:20},durian_cooked:{name:"Extra Smelly Durian",isfruit:!0,monster:1,fruit:1,precook:1,health:0,hunger:25,perish:h,sanity:-5,stack:20},pomegranate:{name:"Pomegranate",isfruit:!0,fruit:1,health:3,hunger:9.375,perish:h,sanity:0,stack:40},pomegranate_cooked:{name:"Sliced Pomegranate",isfruit:!0,fruit:1,precook:1,health:20,hunger:12.5,perish:s,sanity:0,stack:40},dragonfruit:{name:"Dragon Fruit",isfruit:!0,fruit:1,health:3,hunger:9.375,
perish:h,sanity:0,stack:40},dragonfruit_cooked:{name:"Prepared Dragon Fruit",isfruit:!0,fruit:1,precook:1,health:20,hunger:12.5,perish:s,sanity:0,stack:40},berries:{name:"Berries",isfruit:!0,fruit:0.5,health:0,hunger:9.375,perish:h,sanity:0,stack:40},berries_cooked:{name:"Roasted Berries",isfruit:!0,fruit:0.5,precook:1,health:1,hunger:12.5,perish:s,sanity:0,stack:40},wormlight:{name:"Glow Berry",uncookable:!0,health:11,hunger:18.75,sanity:-10,perish:l}},ga=function(){return this.op+this.qty},ha={"=":function(a){return a===
this.qty},">":function(a){return a>this.qty},"<":function(a){return a<this.qty},">=":function(a){return a>=this.qty},"<=":function(a){return a<=this.qty}},T={test:function(a){return!!a},toString:function(){return""}},s=function(a,b){return{op:a,qty:b,test:ha[a],toString:ga}},ia=function(a,b,c){return this.item1.test(a,b,c)||this.item2.test(a,b,c)},ja=function(){return this.item1+" or "+this.item2},I=function(a,b){return{item1:a,item2:b,test:ia,toString:ja,cancel:a.cancel||b.cancel}},ka=function(a,
b,c){return!this.item.test(a,b,c)},la=function(){return this.item.toString().substring(0,this.item.toString().length-1)+"|strike]"},w=function(a){return{item:a,test:ka,toString:la,cancel:!0}},ma=function(a,b,c){return(b[this.name]||0)+(b[this.name+"_cooked"]||0)},na=function(){return"[*"+e[this.name].name+"|"+e[this.name].img+" "+e[this.name].name+"]"+(e[this.name].cook?"[*"+e[this.name].cook.name+"|"+e[this.name].cook.img+"]":"")+(e[this.name].raw?"[*"+e[this.name].raw.name+"|"+e[this.name].raw.img+
"]":"")+(this.qty?this.qty:"")},B=function(a,b){return{name:a,qty:b||T,test:ma,toString:na}},oa=function(a,b,c){return b[this.name]},pa=function(){return"[*"+e[this.name].name+"|"+e[this.name].img+" "+e[this.name].name+"]"+(this.qty?this.qty:"")},A=function(a,b){return{name:a,qty:b||T,test:oa,toString:pa}},qa=function(a,b,c){return c[this.tag]},ra=function(){return"[tag:"+this.tag+"|"+this.tag+"]"+(this.qty?this.qty:"")},f=function(a,b){return{tag:a,qty:b||T,test:qa,toString:ra}},m={butterflymuffin:{name:"Butter Muffin",
test:function(a,b,c){return b.butterflywings&&!c.meat&&c.veggie},requires:"Butterfly Wings, veggie",requirements:[B("butterflywings"),w(f("meat")),f("veggie")],priority:1,weight:1,foodtype:"veggie",health:20,hunger:37.5,perish:u,sanity:5,cooktime:2},frogglebunwich:{name:"Froggle Bunwich",test:function(a,b,c){return(b.froglegs||b.froglegs_cooked)&&c.veggie},requirements:[B("froglegs"),f("veggie")],priority:1,foodtype:"meat",health:20,hunger:37.5,perish:u,sanity:5,cooktime:2},taffy:{name:"Taffy",test:function(a,
b,c){return c.sweetener&&3<=c.sweetener&&!c.meat},requirements:[f("sweetener",s(">=",3)),w(f("meat"))],priority:10,foodtype:"veggie",health:-3,hunger:25,perish:u,sanity:15,cooktime:2},pumpkincookie:{name:"Pumpkin Cookie",test:function(a,b,c){return(b.pumpkin||b.pumpkin_cooked)&&c.sweetener&&2<=c.sweetener},requirements:[B("pumpkin"),f("sweetener",s(">=",2))],priority:10,foodtype:"veggie",health:0,hunger:37.5,perish:l,sanity:15,cooktime:2},stuffedeggplant:{name:"Stuffed Eggplant",test:function(a,b,
c){return(b.eggplant||b.eggplant_cooked)&&c.veggie&&1<c.veggie},requirements:[B("eggplant"),f("veggie",s(">",1))],priority:1,foodtype:"veggie",health:3,hunger:37.5,perish:u,sanity:5,cooktime:2},fishsticks:{name:"Fishsticks",test:function(a,b,c){return c.fish&&b.twigs&&c.inedible&&1>=c.inedible},requirements:[f("fish"),A("twigs"),f("inedible"),f("inedible",s("<=",1))],priority:10,foodtype:"meat",health:40,hunger:37.5,perish:l,sanity:5,cooktime:2},honeynuggets:{name:"Honey Nuggets",test:function(a,
b,c){return b.honey&&c.meat&&1.5>=c.meat&&!c.inedible},requirements:[A("honey"),f("meat",s("<=",1.5)),w(f("inedible"))],priority:2,foodtype:"meat",health:20,hunger:37.5,perish:u,sanity:5,cooktime:2},honeyham:{name:"Honey Ham",test:function(a,b,c){return b.honey&&c.meat&&1.5<c.meat&&!c.inedible},requirements:[A("honey"),f("meat",s(">",1.5)),w(f("inedible"))],priority:2,foodtype:"meat",health:30,hunger:75,perish:u,sanity:5,cooktime:2},dragonpie:{name:"Dragonpie",test:function(a,b,c){return(b.dragonfruit||
b.dragonfruit_cooked)&&!c.meat},requirements:[B("dragonfruit"),w(f("meat"))],priority:1,foodtype:"veggie",health:40,hunger:75,perish:u,sanity:5,cooktime:2},kabobs:{name:"Kabobs",test:function(a,b,c){return c.meat&&b.twigs&&(!c.monster||1>=c.monster)&&c.inedible&&1>=c.inedible},requirements:[f("meat"),A("twigs"),I(w(f("monster")),f("monster",s("<=",1))),f("inedible"),f("inedible",s("<=",1))],priority:5,foodtype:"meat",health:3,hunger:37.5,perish:u,sanity:5,cooktime:2},mandrakesoup:{name:"Mandrake Soup",
test:function(a,b,c){return b.mandrake},requirements:[A("mandrake")],priority:10,foodtype:"veggie",health:100,hunger:150,perish:h,sanity:5,cooktime:3},baconeggs:{name:"Bacon and Eggs",test:function(a,b,c){return c.egg&&1<c.egg&&c.meat&&1<c.meat&&!c.veggie},requirements:[f("egg",s(">",1)),f("meat",s(">",1)),w(f("veggie"))],priority:10,foodtype:"meat",health:20,hunger:75,perish:G,sanity:5,cooktime:2},meatballs:{name:"Meatballs",test:function(a,b,c){return c.meat&&!c.inedible},requirements:[f("meat"),
w(f("inedible"))],priority:-1,foodtype:"meat",health:3,hunger:62.5,perish:l,sanity:5,cooktime:0.75},bonestew:{name:"Meaty Stew",test:function(a,b,c){return c.meat&&3<=c.meat&&!c.inedible},requirements:[f("meat",s(">=",3)),w(f("inedible"))],priority:0,foodtype:"meat",health:12,hunger:150,perish:l,sanity:5,cooktime:0.75},perogies:{name:"Pierogi",test:function(a,b,c){return c.egg&&c.meat&&c.veggie&&!c.inedible},requirements:[f("egg"),f("meat"),f("veggie"),w(f("inedible"))],priority:5,foodtype:"meat",
health:40,hunger:37.5,perish:G,sanity:5,cooktime:1},turkeydinner:{name:"Turkey Dinner",test:function(a,b,c){return b.drumstick&&1<b.drumstick&&c.meat&&1<c.meat&&(c.veggie||c.fruit)},requirements:[A("drumstick",s(">",1)),f("meat",s(">",1)),I(f("veggie"),f("fruit"))],priority:10,foodtype:"meat",health:20,hunger:75,perish:h,sanity:5,cooktime:3},ratatouille:{name:"Ratatouille",test:function(a,b,c){return!c.meat&&c.veggie&&!c.inedible},requirements:[w(f("meat")),f("veggie"),w(f("inedible"))],priority:0,
foodtype:"veggie",health:3,hunger:25,perish:u,sanity:5,cooktime:1},jammypreserves:{name:"Fist Full of Jam",test:function(a,b,c){return c.fruit&&!c.meat&&!c.veggie&&!c.inedible},requirements:[f("fruit"),w(f("meat")),w(f("veggie")),w(f("inedible"))],priority:0,foodtype:"veggie",health:3,hunger:37.5,perish:u,sanity:5,cooktime:0.5},fruitmedley:{name:"Fruit Medley",test:function(a,b,c){return c.fruit&&3<=c.fruit&&!c.meat&&!c.veggie},requirements:[f("fruit",s(">=",3)),w(f("meat")),w(f("veggie"))],priority:0,
foodtype:"veggie",health:20,hunger:25,perish:h,sanity:5,cooktime:0.5},fishtacos:{name:"Fish Tacos",test:function(a,b,c){return c.fish&&(b.corn||b.corn_cooked)},requirements:[f("fish"),B("corn")],priority:10,foodtype:"meat",health:20,hunger:37.5,perish:h,sanity:5,cooktime:0.5},waffles:{name:"Waffles",test:function(a,b,c){return b.butter&&(b.berries||b.berries_cooked)&&c.egg},requirements:[A("butter"),B("berries"),f("egg")],priority:10,foodtype:"veggie",health:60,hunger:37.5,perish:h,sanity:5,cooktime:0.5},
monsterlasagna:{name:"Monster Lasagna",test:function(a,b,c){return c.monster&&2<=c.monster&&!c.inedible},requirements:[f("monster",s(">=",2)),w(f("inedible"))],priority:10,foodtype:"meat",health:-20,hunger:37.5,perish:h,sanity:-20,cooktime:0.5},powcake:{name:"Powdercake",test:function(a,b,c){return b.twigs&&b.honey&&(b.corn||b.corn_cooked)},requirements:[A("twigs"),A("honey"),B("corn")],priority:10,foodtype:"veggie",health:-3,hunger:0,perish:9E6,sanity:0,cooktime:0.5},unagi:{name:"Unagi",test:function(a,
b,c){return b.cutlichen&&(b.eel||b.eel_cooked)},requirements:[A("cutlichen"),B("eel")],priority:20,foodtype:"veggie",health:20,hunger:18.75,perish:l,sanity:5,cooktime:0.5},wetgoop:{name:"Wet Goop",test:function(a,b,c){return!0},requirements:[],trash:!0,priority:-2,health:0,hunger:0,perish:h,sanity:0,cooktime:0.25}},P=function(){var a,b,c=/^tag[: ]/,k=/^tag:? */,y,g=/^recipe[: ]/,d=/^recipe:? */,r,h=/^ingredient[: ]/,f=/^ingredient:? */,n,t,q=!1,sa=function(b){!q&&b.uncookable?b.match=0:0===b.lowerName.indexOf(a)||
b.raw&&0===b.raw.lowerName.indexOf(a)?b.match=3:0===t.test(b.lowerName)?b.match=2:n.test(b.lowerName)?b.match=1:b.match=0;return b.match},C=function(a){return a.match=a[b]+0||0},l=function(a){for(var b=0,c,g=!0;b<y.length;){c=y[b].test(null,a.nameObject,a);if(y[b].cancel){if(!c){g=!0;break}}else c&&(g=!1);b++}return a.match=g?0:1},ta=function(a){for(var b=0,c,g=!0;b<a.requirements.length;){c=a.requirements[b].test(null,r.nameObject,r);if(a.requirements[b].cancel){if(!c){g=!0;break}}else c&&(g=!1);
b++}return a.match=g?0:1},u=function(b){return b.match=b.lowerName===a?1:0},p=function(b){return b.match=b.lowerName===a||b.raw&&b.raw.lowerName===a||b.cook&&b.cook.lowerName===a?1:0},E=function(a,b){var c,g;return a.match===b.match?(c=a.raw?a.raw.name:a.name,g=b.raw?b.raw.name:b.name,c!==g?c>g?1:c<g?-1:0:a.name===b.name?0:a.raw===b?1:-1):b.match-a.match};return function(x,s,D){q=!!D;a=s.toLowerCase();if(c.test(a))return b=a.split(k)[1],x.filter(C).sort(E);if(g.test(a))return(y=m.byName(a.split(d)[1].toLowerCase()))?
(y=y.requirements,x.filter(l).sort(E)):[];if(h.test(a))return(r=e.byName(a.split(f)[1].toLowerCase()))?x.filter(ta).sort(E):[];if(0===a.indexOf("*"))return a=a.substring(1),x.filter(u).sort(E);if(0===a.indexOf("~"))return a=a.substring(1),x.filter(p).sort(E);t=RegExp("\\b"+a+".*");n=RegExp("\\b"+a.split("").join(".*")+".*");return x.filter(sa).sort(E)}}(),U=function(a,b,c){var k,y,g;for(k=0;k<a.length;k++)if(g=a[k],null!==g)for(y in b[g.id]=1+(b[g.id]||0),g)g.hasOwnProperty(y)&&"perish"!==y&&!isNaN(g[y])?
c[y]=g[y]+(c[y]||0):"perish"===y&&(c[y]=Math.min(c[y]||G,g[y]))},$=function(){var a,b;return function(c,k,y,g){var d,r;c.length=0;a={};b={};U(k,a,b);for(k=0;k<m.length;k++){r=!1;for(d=0;d<m[k].requirements.length;d++)if(m[k].requirements[d].test(null,a,b))m[k].requirements[d].cancel||(r=!0);else if(!g&&m[k].requirements[d].cancel){r=!1;break}else if(g&&!m[k].requirements[d].cancel){r=!1;break}!r||y&&-1!==y.indexOf(m[k])||c.push(m[k])}b.img="";b.name="Combined";return c}}(),ua=function(){var a=[],
b,c;return function(k){a.length=0;b={};c={};U(k,b,c);for(k=0;k<m.length;k++)m[k].test(null,b,c)&&a.push(m[k]);a.sort(function(a,b){return b.priority-a.priority});c.img="";c.name="Combined";a.unshift(c);return a}}(),M=function(){var a=document.createElement("canvas"),b=a.getContext&&a.toDataURL&&a.getContext("2d"),c=document.createElement("canvas"),k=c.getContext&&c.getContext("2d"),d={},g={},h=!!b,r=[],f=function(t){var q=function(q,t){b.clearRect(0,0,64,64);b.drawImage(t,0,0,64,64);k.clearRect(0,
0,32,32);k.drawImage(t,0,0,32,32);try{d[q]=a.toDataURL(),g[q]=c.toDataURL()}catch(f){h=!1}r.filter(function(a){return a.url===q}).forEach(function(a){a.url===q&&(delete a.img.dataset.pending,J&&a.img.removeAttribute("data-pending"),a.img.src=32===a.d?g[q]||q:d[q]||q)});r=r.filter(function(a){return a.url!==q})};return function(a){q(t,a.target)}},e=function(a,b,c){a.dataset.pending=b;J&&a.setAttribute("data-pending",b);r.push({url:b,img:a,d:c})},m=function(a,b){var c=new Image,k;h?d[a]?c.src=32===
b?g[a]:d[a]:(null!==d[a]&&(d[a]=null,k=new Image,k.addEventListener("load",f(a),!1),k.src=a),e(c,a,b)):c.src=a;return c};a.width=64;a.height=64;c.width=32;c.height=32;m.queue=e;return m}(),Q=function(){var a=/\[([^\|]*)\|([^\|\]]*)\|?([^\|\]]*)\]/,b=/([^\|]\]\[[^\|]+\|[^\|\]]+)\|?([^\|\](?:left)]*)(?=\])/g,c=/(\[[^\|]+\|[^\|\]]+)\|?([^\|\]]*)(?=\]\[)(?!\]\[\|)/g,k=function(a,b,c){return b+"|"+(0===c.length?"left":c+" left")},d=function(a,b,c){return b+"|"+(0===c.length?"right":c+" right")},g=/_(\w)/g,
h=function(a,b){return" "+b.toUpperCase()};return function(r){var f=r&&r.replace(b,k).replace(b,k).replace(c,d);r=f&&f.split(a);var e,m,t,q;if(r&&1!==r.length)for(f=document.createDocumentFragment(),f.appendChild(document.createTextNode(r[0])),e=1;e<r.length;e+=4)""===r[e]&&""===r[e+1]?f.appendChild(document.createElement("br")):(m=document.createElement("span"),m.className=""===r[e+2]?"link":"link "+r[e+2],m.dataset.link=r[e],J&&m.setAttribute("data-link",r[e]),r[e+1]&&0===r[e+1].indexOf("img/")?
(m.appendChild(document.createTextNode(r[e+1].split(" ").slice(1).join(" "))),t=r[e+1].split(" ")[0],q=M(t,32),q.title=(t.substr(4,1).toUpperCase()+t.substr(5).replace(g,h)).split(".")[0],m.appendChild(q)):m.appendChild(document.createTextNode(r[e+1]?r[e+1]:r[e])),f.appendChild(m)),f.appendChild(document.createTextNode(r[e+3]));return f}}(),n,l=0,aa=document.getElementById("main"),va=document.getElementById("food"),wa=document.getElementById("recipes"),xa=document.getElementById("navbar"),J=!1;document.documentElement.dataset||
(J=!0,Object.defineProperty(Element.prototype,"dataset",{get:function(){this.ds||(this.ds={},Array.prototype.forEach.call(this.attributes,function(a){0===a.name.indexOf("data-")&&(this.ds[a.name.substring(5)]=a.value)},this));return this.ds}}));document.getElementById("stalehealth").appendChild(document.createTextNode(Math.round(333)/10+"%"));document.getElementById("stalehunger").appendChild(document.createTextNode(Math.round(667)/10+"%"));document.getElementById("spoiledhunger").appendChild(document.createTextNode(Math.round(500)/
10+"%"));document.getElementById("spoiledsanity").appendChild(document.createTextNode(10));document.getElementById("perishground").appendChild(document.createTextNode(Math.round(1500)/10+"%"));document.getElementById("perishwinter").appendChild(document.createTextNode(Math.round(750)/10+"%"));document.getElementById("perishfridge").appendChild(document.createTextNode(Math.round(500)/10+"%"));u=function(a,b){return"[tag:"+a+"|"+(b||a)+"]"};for(n in e)if(e.hasOwnProperty(n)){var d=e[n];d.match=0;d.lowerName=
d.name.toLowerCase();d.id=n;d.nameObject={};d.nameObject[n]=1;d.img="img/"+d.name.replace(/ /g,"_").toLowerCase()+".png";-1!==n.indexOf("_cooked")&&(d.cooked=!0);e[n+"_cooked"]&&(d.cook=e[n+"_cooked"],e[n+"_cooked"].raw=d);d.info=[];h=d.info;d.fruit&&h.push(u("fruit")+(1===d.fruit?"":"\u00d7"+d.fruit));d.veggie&&h.push(u("veggie","vegetable")+(1===d.veggie?"":"\u00d7"+d.veggie));d.meat&&h.push(u("meat")+(1===d.meat?"":"\u00d7"+d.meat));d.egg&&h.push(u("egg")+(1===d.egg?"":"\u00d7"+d.egg));d.fish&&
h.push(u("fish"));d.magic&&h.push(u("magic"));d.decoration&&h.push(u("decoration"));d.inedible&&h.push(u("inedible"));d.monster&&h.push(u("monster","monster food"));d.sweetener&&h.push(u("sweetener"));d.fat&&h.push(u("fat"));d.dairy&&h.push(u("dairy"));d.comment&&h.push(d.comment);e[l++]=d}e.length=l;l=0;for(n in m)m.hasOwnProperty(n)&&(m[n].match=0,m[n].name=m[n].name||n,m[n].id=n,m[n].lowerName=m[n].name.toLowerCase(),m[n].weight=m[n].weight||1,m[n].priority=m[n].priority||0,m[n].img="img/"+m[n].name.replace(/ /g,
"_").toLowerCase()+".png",m[n].requirements&&(m[n].requires=Q(m[n].requirements.join("; "))),m[l++]=m[n]);m.length=l;m.forEach=Array.prototype.forEach;m.filter=Array.prototype.filter;m.sort=Array.prototype.sort;m.byName=function(a){for(var b=this.length;b--;)if(this[b].lowerName===a)return this[b]};var l=function(a,b){return a+"[recipe:"+b.name+"|"+b.img+"]"},V=function(a,b,c){return 1===b?a:a+(c||"s")};for(n in e)e.hasOwnProperty(n)&&isNaN(n)&&isNaN(e[n])&&(d=e[n],h=d.info,d.cooked&&h.push("from [*"+
d.raw.name+"|"+d.raw.img+"]"),d.cook&&h.push("cook: [*"+d.cook.name+"|"+d.cook.img+"]"),d.dry&&(d.dry instanceof Object||(d.dry=e[d.dry]),h.push("dry in "+d.drytime/v+" "+V("day",d.drytime/v)+": [*"+d.dry.name+"|"+d.dry.img+"]")),d.info=h.join("; "),d.uncookable?d.info+="[|]cannot be added to crock pot":(d.recipes=[],m.forEach(function(a){for(var b=!1,c=a.requirements,k=c.length;k--;)if(c[k].test(null,d.nameObject,d))c[k].cancel||b||(b=!0);else if(c[k].cancel){b=!1;break}b&&d.recipes.push(a)}),0<
d.recipes.length&&(d.ingredient=!0,d.info+=d.recipes.reduce(l,"[|][ingredient:"+d.name+"|Recipes] "))),d.info=Q(d.info));e.forEach=Array.prototype.forEach;e.filter=Array.prototype.filter;e.sort=Array.prototype.forEach;e.byName=function(a){for(var b=this.length;b--;)if(this[b].lowerName===a)return this[b]};var N="id health hunger fruit veggie meat egg fish magic decoration inedible monster sweetener fat dairy".split(" "),ya=function(a,b,c){var k=c||[0,0,0,0],d,g=0,e=0;return function(c){for(var f;c--&&
1<a;){b(k);k[0]++;for(f=0;k[f]>=a;)f++,k[f]++;d=4;for(g=0;d--;)k[d]>=a?k[d]=g:k[d]>g&&(g=k[d]);if(4===f)return!1;e++}return!0}};L=F=void 0;e.filter(function(a){return!a.uncookable&&!a.skip&&(a.ideal||!a.cook&&(!a.raw||!a.raw.ideal))}).map(function(a){for(var b={},c=N.length;c--;)a.hasOwnProperty(N[c])&&(b[N[c]]=a[N[c]]);return b});F=m.filter(function(a){return!a.trash}).sort(function(a,b){return b.priority-a.priority});L=F.map(function(a){return a.test});F.map(function(a){return a.test.toString()});
F.map(function(a){return a.priority});var za=function(a,b,c,k){var d=L.length,g=[],e=0,f,h=60,m=function(b){return a[b]},n=ya(a.length,function(a){a=a.map(m);var b,c=null,k={},e={},f=null,r=!1,h=L,x=F;U(a,k,e);for(b=0;b<d&&(null===c||x[b].priority>=c);b++)h[b](null,k,e)&&(null!==f&&(r=!0,f.multiple=!0),f={recipe:x[b],ingredients:a,tags:{health:e.health,hunger:e.hunger},multiple:r},g.push(f),c=x[b].priority)}),t=function(){var a=!1,d=Date.now();for(n(h)?setTimeout(t,0):a=!0;e<g.length&&g[e];e++)b(g[e]);
f!==Date.now()-d&&(f=Date.now()-d+1,h=38/f*h+1|0);c&&c();a&&k&&k()};t()},R;(function(){var a=xa.getElementsByTagName("li"),b={},c={},k,d,g=function(a){R(a.target.dataset.tab)},e;R=function(a){d.className="";d=b[a];k.style.display="none";k=c[a];d.className="selected";k.style.display="block"};for(n=0;n<a.length;n++)e=a[n],e.dataset.tab&&(b[e.dataset.tab]=e,c[e.dataset.tab]=document.getElementById(e.dataset.tab),c[e.dataset.tab].style.display="none",e.addEventListener("selectstart",function(a){a.preventDefault()},
!1),e.addEventListener("click",g,!1));d=b.simulator;k=c.simulator;window.localStorage&&localStorage.foodGuideState&&("["===localStorage.foodGuideState[0]?(a={},a.pickers=JSON.parse(localStorage.foodGuideState),localStorage.foodGuideState=JSON.stringify(a)):a=JSON.parse(localStorage.foodGuideState),a.activeTab&&b[a.activeTab]&&(d=b[a.activeTab],k=c[a.activeTab]));d.className="selected";k.style.display="block";window.addEventListener("beforeunload",function(){var a;window.localStorage&&(localStorage.foodGuideState||
(localStorage.foodGuideState="{}"),a=JSON.parse(localStorage.foodGuideState),a.activeTab=d.dataset.tab,localStorage.foodGuideState=JSON.stringify(a))})})();var Aa=function(a){a.dataset.pending&&M.queue(a,a.dataset.pending,32)},Z=function(a){var b,c,d,e=document.createElement("tr"),g;for(b=1;b<arguments.length;b++)c=document.createElement(a),g=(d=arguments[b])&&d.indexOf?d:d.toString(),d instanceof DocumentFragment?(c.appendChild(d.cloneNode(!0)),Array.prototype.forEach.call(c.getElementsByTagName("img"),
Aa)):0===g.indexOf("img/")?(d=M(g),c.appendChild(d)):c.appendChild(document.createTextNode(g)),e.appendChild(c);return e},S=function(a,b,c,d,e,g,f,h,m,n){var l,t,q,u=!1,C,s,w,v=function(a,b,d){n&&!(w<n)||h&&!h(a)||(b=c(a),f&&f(a,d)&&(b.className="highlighted",C||(C=b),s=b),l.appendChild(b),w++)},p=function(c,d,k){var D,f;if(d||c&&""!==c.target.dataset.sort||q){D=d||c&&c.target.dataset.sort||q;e&&(f=b.shift());"name"===D?b.sort(function(a,b){var c=a.raw?a.raw.name:a.name,d=b.raw?b.raw.name:b.name;
return c!==d?c>d?1:c<d?-1:0:a.name===b.name?0:a.raw===b?1:-1}):b.sort(function(a,b){var c=a[D],d=b[D];return isNaN(c)||isNaN(d)?isNaN(c)&&isNaN(d)?0:isNaN(c)?1:-1:d-c});if(d||c)q===D?u=!u:(q=D,u=!1);u&&b.reverse();e&&b.unshift(f)}c=document.createElement("tr");for(t in a)d=document.createElement("th"),-1===t.indexOf(":")?d.appendChild(document.createTextNode(t)):(d.appendChild(document.createTextNode(t.split(":")[0])),d.title=t.split(":")[1]),a[t]&&(a[t]===q&&(d.style.background=u?"#555":"#ccc",d.style.color=
u?"#ccc":"#555",d.style.borderRadius="4px"),d.style.cursor="pointer",d.dataset.sort=a[t],d.addEventListener("click",p,!1)),c.appendChild(d);d=l;l=document.createElement("table");l.appendChild(c);s=C=null;w=0;b.forEach(v);g&&(l.className="links",Array.prototype.forEach.call(l.getElementsByClassName("link"),function(a){a.addEventListener("click",g,!1)}));d&&d.parentNode.replaceChild(l,d);k&&(C&&C.offsetTop+l.offsetTop+aa.offsetTop+C.offsetHeight>window.scrollY+window.innerHeight?C.scrollIntoView(!0):
s&&s.offsetTop+l.offsetTop+aa.offsetTop<window.scrollY&&s.scrollIntoView(!1))};d?p(null,d):p();l.update=function(a){p(null,null,a)};l.setMaxRows=function(a){n=a;this.update()};return l},z=function(a){return isNaN(a)?"":0<a?"+"+a:a},ba=function(a,b){return a<b?(b-a)/Math.abs(a):a>b?-(a-b)/Math.abs(a):0},ca=function(a,b){return isNaN(a)||a===b?"":" ("+z((100*(a<b?(b-a)/Math.abs(a):a>b?-(a-b)/Math.abs(a):0)).toFixed(0))+"%)"},da=function(a){return Z("td",a.img?a.img:"",a.name,z(a.health),z(a.hunger),
isNaN(a.sanity)?"":z(a.sanity),isNaN(a.perish)?"Never":a.perish/v+" "+V("day",a.perish/v),a.info||"")},X=function(a,b,c){return Z("td",a.img?a.img:"",a.name,z(a.health)+ca(b,a.health),z(a.hunger)+ca(c,a.hunger),isNaN(a.sanity)?"":z(a.sanity),isNaN(a.perish)?"Never":a.perish/v+" "+V("day",a.perish/v),(a.cooktime*fa+0.5|0)+" secs",a.priority||"0",a.requires||"")};(function(){var a,b=[],c=[],d=S({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish",
Info:""},Array.prototype.slice.call(e),da,"name",!1,function(g){g=g.target?"IMG"===g.target.tagName?g.target.parentNode.dataset.link:g.target.dataset.link:g;"recipe:"===g.substring(0,7)||"ingredient:"===g.substring(0,11)?(R("crockpot"),"recipe:"===g.substring(0,7)&&(g="*"+g.substring(7)),c=P(m,g),f.update(!0)):(a!==g?(a=g,b=P(e,g)):(a="",b.length=0),d.update(!0))},function(a){return-1!==b.indexOf(a)}),f=S({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish",
"Cook Time":"cooktime","Priority:One of the highest priority recipes for a combination will be made":"priority","Requires:Dim, struck items cannot be used":""},Array.prototype.slice.call(m),X,"name",!1,function(c){c=c.target?"IMG"===c.target.tagName?c.target.parentNode.dataset.link:c.target.dataset.link:c;R("foodlist");a=c;b=P(e,c);d.update(!0)},function(a){return-1!==c.indexOf(a)});va.appendChild(d);wa.appendChild(f)})();var Ba=function(a,b){return a+"[ingredient:"+e[b.id].name+"|"+e[b.id].img+"]"},
ea=function(a){var b=document.createElement("button");b.appendChild(document.createTextNode("Calculate efficient recipes (may take some time)"));b.className="makablebutton";b.addEventListener("click",function(){var c=[],d=a?a.length:null,f,g,h=[],r,l,n,u,t,q=[],s=[],C,w,v,A=function(a){return-1!==s.indexOf(a.id)},p=function(a){return-1!==this.indexOf(e[a])},E=function(a){-1!==s.indexOf(a.target.dataset.id)&&s.splice(s.indexOf(a.target.dataset.id),1);-1!==q.indexOf(a.target.dataset.id)?(q.splice(q.indexOf(a.target.dataset.id),
1),a.target.className=""):(q.push(a.target.dataset.id),a.target.className="selected");v.update()},x=function(a){-1!==q.indexOf(a.target.dataset.id)&&q.splice(q.indexOf(a.target.dataset.id),1);-1!==s.indexOf(a.target.dataset.id)?(s.splice(s.indexOf(a.target.dataset.id),1),a.target.className=""):(s.push(a.target.dataset.id),a.target.className="excluded");v.update();a.preventDefault()},B=function(a){g&&(g.className="");f===a.target.dataset.recipe?f=g=null:(f=a.target.dataset.recipe,g=a.target,a.target.className=
"selected");v.update()};null===d&&(d=e.length,a=e);for(;d--;)a[d].cook&&-1===c.indexOf(a[d].cook)&&!a[d].cook.uncookable&&c.push(a[d].cook),a[d].uncookable||!a[d].ideal&&a[d].cook&&!a[d].cook.uncookable||-1!==c.indexOf(a[d])||c.push(a[d]);C=[];v=S({"":"",Name:"name",Health:"health","Health+:Health gained compared to ingredients":"healthpls",Hunger:"hunger","Hunger+:Hunger gained compared to ingredients":"hungerpls",Ingredients:""},C,function(a){var b=a.recipe;return Z("td",b.img?b.img:"",b.name,z(b.health),
z(a.healthpls)+" ("+z(100*a.healthpct|0)+"%)",z(b.hunger),z(a.hungerpls)+" ("+z(100*a.hungerpct|0)+"%)",Q(a.ingredients.reduce(Ba,"")+(a.multiple?"*":"")))},"hungerpls",!1,null,null,function(a){return(!f||a.recipe.name===f)&&(!s.length||!a.ingredients.some(A))&&(!q.length||q.every(p,a.ingredients))},0,15);w=document.createElement("div");l=document.createElement("div");l.appendChild(document.createTextNode("Computing combinations.."));d=document.createElement("div");d.appendChild(document.createTextNode("* combination has multiple possible results"));
w.appendChild(l);r=document.createElement("div");r.className="recipeFilter";w.appendChild(r);n=document.createElement("div");n.className="foodFilter";c.forEach(function(a){var b=M(a.img,32);b.dataset.id=a.id;b.addEventListener("click",E,!1);b.addEventListener("contextmenu",x,!1);b.title=a.name;n.appendChild(b)});w.appendChild(n);u=document.createElement("div");t=document.createElement("input");t.type="text";t.placeholder="use custom filter";t.className="customFilterInput";u.appendChild(t);w.appendChild(v);
b.parentNode.replaceChild(w,b);w.appendChild(d);za(c,function(a){var b,c;if(-1===h.indexOf(a.recipe.name)){for(b=0;b<h.length&&!(a.recipe.name<h[b]);b++);h.splice(b,0,a.recipe.name);c=M(m.byName(h[b].toLowerCase()).img);c.dataset.recipe=h[b];c.addEventListener("click",B,!1);c.title=a.recipe.name;b<r.childNodes.length?r.insertBefore(c,r.childNodes[b]):r.appendChild(c)}a.name||(a.name=a.recipe.name,a.health=a.recipe.health,a.ihealth=a.tags.health,a.healthpls=a.recipe.health-a.tags.health,a.hunger=a.recipe.hunger,
a.ihunger=a.tags.hunger,a.hungerpls=a.recipe.hunger-a.tags.hunger,a.healthpct=ba(a.tags.health,a.recipe.health),a.hungerpct=ba(a.tags.hunger,a.recipe.hunger),a.sanity=a.recipe.sanity,a.perish=a.recipe.perish);C.push(a)},function(){l.firstChild.textContent="Found "+C.length+" valid recipes.."},function(){v.setMaxRows(30);l.firstChild.textContent="Found "+C.length+" valid recipes. Showing top 30 for selected recipe using all selected ingredients. Right-click to exclude ingredients."})},!1);return b};
document.getElementById("statistics").appendChild(ea());var Ca=function(a,b){return a.reduce(function(a,d){return Math.max(a,d[b]||0)},-1E5)};window.food=e;window.recipes=m;window.matchingNames=P;var W=function(a,b){var c=!1;null!==b?a.dataset.id=b.id:a.nextSibling&&null!==O(a.nextSibling)?(W(a,O(a.nextSibling)),W(a.nextSibling,null),c=!0):a.dataset.id=null;c||(null!==b?a.firstChild?a.replaceChild(M(b.img),a.firstChild):a.appendChild(M(b.img)):a.firstChild&&a.removeChild(a.firstChild),a.title=b?b.name:
"")},O=function(a){return e[a.dataset.id]||m[a.dataset.id]||null};(function(){for(var a=document.getElementsByClassName("ingredientpicker"),b=a.length;b--;)(function(){var c=document.createElement("span"),d,f=document.createElement("div"),g=document.createElement("ul"),h=a[b],l=b,n,s="recipes"===h.dataset.type?m:e,u=!h.dataset.cookable,t=h.nextSibling,q=t.getElementsByClassName("ingredient"),w,v=[],z,A=[],B=[],p=null,E=!1,x=document.getElementById("results"),F=document.getElementById("discoverfood"),
D=document.getElementById("discover"),G=document.getElementById("makable"),K=document.createElement("span"),I=function(a,b){for(var c=a;c.previousSibling;)if(c=c.previousSibling,b(c))return c;return null},L=function(a,b){for(var c=a;c.nextSibling;)if(c=c.nextSibling,b(c))return c;return null},J=!1,N=function(a){var b=e[a]||m[a]||null;if(w){for(a=0;a<q.length;a++)if(null===O(q[a]))return W(q[a],b),E&&z(),a;return-1}-1===q.indexOf(a)&&(q.push(a),a=document.createElement("span"),a.className="ingredient",
W(a,b),a.addEventListener("click",Q,!1),t.appendChild(a),E&&z());return 1},R=function(a){-1!==N(("IMG"===a.target.tagName?a.target.parentNode:a.target).dataset.id)&&a&&a.preventDefault&&a.preventDefault()},T=function(a){var b=M(a.img,32),c=document.createElement("span");c.appendChild(b);c.appendChild(document.createTextNode(a.name));c.dataset.id=a.id;-1!==v.indexOf(a)&&(c.style.opacity=0.5);c.addEventListener("mousedown",R,!1);this.appendChild(c);this.dataset.length++},U=function(a){-1!==v.indexOf(e[a.dataset.id])?
a.style.opacity||(a.style.opacity=0.5):a.style.opacity&&a.style.removeProperty("opacity")},Q=function(a){var b="IMG"===a.target.tagName?a.target.parentNode:a.target;if(w){if(null!==O(b))return W(b,null),z(),b.dataset.id}else return a=q.indexOf(b.dataset.id),q.splice(a,1),t.removeChild(b),z(),q[a]||null},Y=function(){var a;d.splitTag();a=P(s,d.getSearch(),u);f.removeChild(g);g=document.createElement("div");g.dataset.length=0;a.forEach(T,g);f.appendChild(g);p=null},V=function(a){a="IMG"===a.target.tagName?
a.target.parentNode.dataset.link:a.target.dataset.link;var b=P(s,a,u);1===b.length?N(b[0].id):(h.value=a,Y())},H;"ingredients"===t.id?z=function(){var a,b,c,d;v=Array.prototype.map.call(q,function(a){return O(a)});a=ua(v);b=a[0].health;c=a[0].hunger;d=S({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish","Cook Time":"cooktime","Priority:One of the highest priority recipes for a combination will be made":"priority","Requires:Dim, struck items cannot be used":""},
a,function(a){return X(a,b,c)},"priority",!0,V,function(a,b){return 0<b.length&&a.priority===Ca(b,"priority")});x.firstChild&&x.removeChild(x.firstChild);x.firstChild&&(x.removeChild(x.firstChild),x.removeChild(x.firstChild));x.appendChild(d);null!==v[0]&&($(A,v,a),0<A.length&&(x.appendChild(document.createTextNode("Add more ingredients to make:")),d=S({"":"",Name:"name","Health:(% more than ingredients)":"health","Hunger:(% more than ingredients)":"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish",
"Cook Time":"cooktime","Priority:One of the highest priority recipes for a combination will be made":"priority","Requires:Dim, struck items cannot be used":""},A,function(a){return X(a,b,c)},"priority",!1,V),x.appendChild(d)));g&&g.firstChild&&Array.prototype.forEach.call(g.getElementsByTagName("span"),U)}:"inventory"===t.id&&(z=function(){var a;v=Array.prototype.map.call(t.getElementsByClassName("ingredient"),function(a){return O(a)});F.firstChild&&F.removeChild(F.firstChild);D.firstChild&&D.removeChild(D.firstChild);
G.firstChild&&G.removeChild(G.firstChild);0<v.length&&(a=S({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish",Info:""},v,da,"name"),F.appendChild(a),$(B,v,null,!0),0<B.length&&(a=S({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish","Cook Time":"cooktime","Priority:One of the highest priority recipes for a combination will be made":"priority","Requires:Dim, struck items cannot be used":""},B,
X,"name"),D.appendChild(a),G.appendChild(ea(v))));g&&g.firstChild&&Array.prototype.forEach.call(g.getElementsByTagName("span"),U)});0!==q.length?(w=!0,Array.prototype.forEach.call(q,function(a){W(a,null);a.addEventListener("click",Q,!1)})):(q=[],w=!1);window.localStorage&&localStorage.foodGuideState&&(n=JSON.parse(localStorage.foodGuideState).pickers)&&n[l]&&n[l].forEach(function(a){e[a]&&N(a)});E=!0;c.className="searchselector retracted";c.appendChild(document.createTextNode("name"));d=function(){var a=
document.createElement("div"),b=!1,d=null,f=[{title:"name",prefix:"",placeholder:"Filter ingredients"},{title:"tag",prefix:"tag:",placeholder:"Meat, veggie, fruit, egg, monster..."},{title:"recipe",prefix:"recipe:",placeholder:"Find ingredients used in a recipe"}],g=f[0],e=null,k=function(){b=!1;a.style.height="0px";c.style.borderBottomLeftRadius="3px";a.style.borderTopLeftRadius="3px";null!==e&&(clearTimeout(e),e=null);c.className="searchselector retracted"},l=function(a){g=a;h.placeholder=g.placeholder;
c.firstChild.textContent=g.title},m=function(a){l(f[a.target.dataset.typeIndex]);Y();k()},n=/: */;c.addEventListener("click",function(){b?k():(null===d&&(a.style.height="auto",a.style.left=c.offsetLeft,a.style.top=c.offsetTop+c.offsetHeight,d=a.offsetHeight+"px",a.style.height="0px"),b=!0,a.style.height=d,c.style.borderBottomLeftRadius="0px",a.style.borderTopLeftRadius="0px",a.style.width="auto",a.style.width=Math.max(a.offsetWidth,c.offsetWidth+1)+"px",null!==e&&(clearTimeout(e),e=null),c.className=
"searchselector extended")},!1);c.addEventListener("selectstart",function(a){a.preventDefault()},!1);c.addEventListener("mouseout",function(){null!==e&&clearTimeout(e);e=setTimeout(k,500)},!1);c.addEventListener("mouseover",function(){null!==e&&(clearTimeout(e),e=null)},!1);a.addEventListener("mouseout",function(){null!==e&&clearTimeout(e);e=setTimeout(k,500)},!1);a.addEventListener("mouseover",function(){null!==e&&(clearTimeout(e),e=null)},!1);f.forEach(function(b,c){var d=document.createElement("div");
d.appendChild(document.createTextNode(b.title));d.dataset.typeIndex=c;d.addEventListener("click",m,!1);b.element=d;a.appendChild(d)});h.parentNode.insertBefore(c,h);a.className="searchdropdown";h.parentNode.insertBefore(a,h);return{getTag:function(){return g.title},setSearchType:function(a){l(f[a])},getSearch:function(){return g.prefix+h.value},splitTag:function(){var a;a=h.value.split(n);var b,c;if(2===a.length)for(b=a[0].toLowerCase()+":",c=a[1],a=0;a<f.length;a++)if(b===f[a].prefix){l(f[a]);h.value=
c;break}}}}();f.className="ingredientdropdown";f.appendChild(g);f.addEventListener("mousedown",function(a){a.preventDefault()},!1);(function(){var a=P(s,d.getSearch(),u);f.removeChild(g);g=document.createElement("div");g.dataset.length=0;a.forEach(T,g);f.appendChild(g)})();K.className="clearingredients";K.appendChild(document.createTextNode("clear"));K.addEventListener("click",function(){if(""===h.value&&"name"===d.getTag())for(;O(t.firstChild);)Q({target:t.firstChild});else h.value="",d.setSearchType(0),
Y()},!1);K.addEventListener("mouseover",function(){""===h.value&&"name"===d.getTag()&&(K.firstChild.textContent="clear chosen ingredients")},!1);K.addEventListener("mouseout",function(){"clear"!==K.firstChild.textContent&&(K.firstChild.textContent="clear")},!1);t.parentNode.insertBefore(K,t);t.parentNode.insertBefore(f,t);h.addEventListener("keydown",function(a){var b;-1!==[16,17,37,38,39,40,13].indexOf(a.keyCode)&&(b=p,13===a.keyCode?(null===p&&(p=g.firstChild||null),null!==p&&R({target:p})):null===
p?40===a.keyCode&&(p=g.childNodes[1]||g.firstChild||null,null!==p&&(H=p.offsetLeft+p.offsetWidth/2,a.preventDefault())):(a.preventDefault(),37===a.keyCode?(p=p.previousSibling&&p.previousSibling.offsetTop===p.offsetTop?p.previousSibling:(a=L(p,function(a){return a.offsetTop!==p.offsetTop}))?a.previousSibling:g.lastChild,null!==p&&(H=p.offsetLeft+p.offsetWidth/2)):39===a.keyCode?(p=p.nextSibling&&p.nextSibling.offsetTop===p.offsetTop?p.nextSibling:(a=I(p,function(a){return a.offsetTop!==p.offsetTop}))?
a.nextSibling:g.firstChild,null!==p&&(H=p.offsetLeft+p.offsetWidth/2)):38===a.keyCode?((a=I(p,function(a){return H>=a.offsetLeft-1&&H<=a.offsetLeft+a.offsetWidth+1}))||(a=I(g.lastChild,function(a){return H>=a.offsetLeft-1&&H<=a.offsetLeft+a.offsetWidth+1})),p=a?a:g.firstChild):40===a.keyCode&&((a=L(p,function(a){return H>=a.offsetLeft-1&&H<=a.offsetLeft+a.offsetWidth+1}))||(a=L(g.firstChild,function(a){return H>=a.offsetLeft-1&&H<=a.offsetLeft+a.offsetWidth+1})),p=a?a:g.lastChild)),p!==b&&(null!==
b&&(b.className=""),null!==p&&(p.className="selected")))},!1);h.addEventListener("keyup",function(a){-1===[16,17,37,38,39,40,13].indexOf(a.keyCode)?Y():null!==p&&a.preventDefault()},!1);h.addEventListener("focus",function(){J||(J=!0)},!1);h.addEventListener("blur",function(){J&&(J=!1)},!1);z();window.addEventListener("beforeunload",function(){var a,b;window.localStorage&&(localStorage.foodGuideState||(localStorage.foodGuideState="{}"),a=JSON.parse(localStorage.foodGuideState),a.pickers||(a.pickers=
[]),w?(b=[],b=Array.prototype.map.call(q,function(a){return(a=O(a))?a.id:null}),a.pickers[l]=b):a.pickers[l]=q,localStorage.foodGuideState=JSON.stringify(a))})})()})()})();
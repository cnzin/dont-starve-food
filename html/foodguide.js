(function(){var ua=120*0.3333,f={butter:{name:"Butter",fat:1,dairy:1,health:50,hunger:25,perish:19200,stack:40},butterflywings:{name:"Butterfly Wings",isveggie:!0,decoration:2,health:25,hunger:9.375,perish:2880,stack:40},fish:{name:"Fish",ismeat:!0,meat:0.5,fish:1,health:25,hunger:12.5,perish:1440,stack:40},fish_cooked:{name:"Cooked Fish",ismeat:!0,meat:0.5,fish:1,health:50,hunger:12.5,perish:2880,stack:40},froglegs:{name:"Frog Legs",ismeat:!0,meat:0.5,health:1,hunger:12.5,perish:2880,sanity:-10,
stack:40},froglegs_cooked:{name:"Cooked Frog Legs",ismeat:!0,meat:0.5,health:5,hunger:12.5,perish:5760,sanity:-10,stack:40},honey:{name:"Honey",sweetener:!0,health:10,hunger:12.5,perish:19200,stack:40},honeycomb:{name:"Honeycomb",inedible:!0,sweetener:!0},mandrake:{name:"Mandrake",veggie:1,magic:1,health:75,hunger:75,stack:40},mandrake_cooked:{name:"Cooked Mandrake",uncookable:!0,veggie:1,magic:1,health:100,hunger:150,stack:40},monstermeat:{name:"Monster Meat",ismeat:!0,meat:1,monster:!0,health:-25,
hunger:25,sanity:-15,perish:5760,stack:20},monstermeat_cooked:{name:"Cooked Monster Meat",ismeat:!0,meat:1,monster:!0,health:-5,hunger:25,sanity:-15,perish:8640,stack:20},meat:{name:"Meat",ismeat:!0,meat:1,health:25,hunger:25,sanity:-10,perish:2880,stack:20},meat_cooked:{name:"Cooked Meat",ismeat:!0,meat:1,health:35,hunger:37.5,sanity:5,perish:5760,stack:20},morsel:{name:"Morsel",ismeat:!0,meat:0.5,health:5,hunger:12.5,sanity:-10,perish:2880,stack:40},morsel_cooked:{name:"Cooked Morsel",ismeat:!0,
meat:0.5,health:25,hunger:12.5,perish:5760,sanity:5,stack:40},drumstick:{name:"Drumstick",ismeat:!0,meat:0.5,health:1,hunger:12.5,sanity:-10,perish:2880,stack:20},drumstick_cooked:{name:"Fried Drumstick",ismeat:!0,meat:0.5,health:5,hunger:12.5,perish:5760,stack:20},petals:{name:"Petals",uncookable:!0,health:1,hunger:0,sanity:-2.5,perish:2880,stack:40},seeds:{name:"Seeds",uncookable:!0,health:1,hunger:4.6875,perish:19200,stack:40},seeds_cooked:{name:"Toasted Seeds",uncookable:!0,health:5,hunger:4.6875,
perish:5760,stack:40},spoiled_food:{name:"Rot",uncookable:!0,health:-1,hunger:-10,stack:40},tallbirdegg:{name:"Tallbird Egg",egg:4,health:5,hunger:25},tallbirdegg_cooked:{name:"Fried Tallbird Egg",egg:4,health:0,hunger:37.5,perish:2880},trunk_summer:{name:"Koalefant Trunk",uncookable:!0,ismeat:!0,health:35,hunger:37.5,perish:2880,stack:20},trunk_summer_cooked:{name:"Koalefant Trunk Steak",uncookable:!0,ismeat:!0,health:50,hunger:75,perish:8640,stack:20},twigs:{name:"Twigs",inedible:1},carrot:{name:"Carrot",
isveggie:!0,veggie:1,health:1,hunger:12.5,perish:5760,stack:40},carrot_cooked:{name:"Roasted Carrot",isveggie:!0,veggie:1,health:5,hunger:25,perish:2880,stack:40},corn:{name:"Corn",isveggie:!0,veggie:1,health:5,hunger:25,perish:5760,stack:40},corn_cooked:{name:"Popcorn",isveggie:!0,veggie:1,health:5,hunger:12.5,perish:8640,stack:40},pumpkin:{name:"Pumpkin",isveggie:!0,veggie:1,health:5,hunger:37.5,perish:5760,stack:20},pumpkin_cooked:{name:"Hot Pumpkin",isveggie:!0,veggie:1,health:25,hunger:37.5,
perish:2880,stack:20},eggplant:{name:"Eggplant",isveggie:!0,veggie:1,health:25,hunger:25,perish:5760,stack:20},eggplant_cooked:{name:"Braised Eggplant",isveggie:!0,veggie:1,health:50,hunger:25,perish:2880,stack:20},durian:{name:"Durian",isfruit:!0,monster:1,fruit:1,health:-5,hunger:25,perish:5760,stack:20},durian_cooked:{name:"Extra Smelly Durian",isfruit:!0,monster:1,fruit:1,health:0,hunger:25,perish:2880,stack:20},pomegranate:{name:"Pomegranate",isfruit:!0,fruit:1,health:25,hunger:9.375,perish:2880,
stack:40},pomegranate_cooked:{name:"Sliced Pomegranate",isfruit:!0,fruit:1,health:75,hunger:12.5,perish:1440,stack:40},dragonfruit:{name:"Dragon Fruit",isfruit:!0,fruit:1,health:25,hunger:9.375,perish:2880,stack:40},dragonfruit_cooked:{name:"Prepared Dragon Fruit",isfruit:!0,fruit:1,health:75,hunger:12.5,perish:1440,stack:40},berries:{name:"Berries",isfruit:!0,fruit:0.5,health:1,hunger:9.375,perish:2880,stack:40},berries_cooked:{name:"Roasted Berries",isfruit:!0,fruit:0.5,health:5,hunger:12.5,perish:1440,
stack:40}},va=function(){return this.op+this.qty},wa={"=":function(a){return a===this.qty},">":function(a){return a>this.qty},"<":function(a){return a<this.qty},">=":function(a){return a>=this.qty},"<=":function(a){return a<=this.qty}},X={test:function(a){return!!a},toString:function(){return""}},l=function(a,b){return{op:a,qty:b,test:wa[a],toString:va}},xa=function(a,b,c){return!this.item.test(a,b,c)},ya=function(){return"not "+this.item},q=function(a){return{item:a,test:xa,toString:ya,cancel:!0}},
za=function(a,b){return(b[this.name]||0)+(b[this.name+"_cooked"]||0)},Aa=function(){return"[*"+f[this.name].name+"|"+f[this.name].img+" "+f[this.name].name+"]"+(f[this.name].cook?"[*"+f[this.name].cook.name+"|"+f[this.name].cook.img+"]":"")+(f[this.name].raw?"[*"+f[this.name].raw.name+"|"+f[this.name].raw.img+"]":"")+(this.qty?this.qty:"")},w=function(a,b){return{name:a,qty:b||X,test:za,toString:Aa}},Ba=function(a,b){return b[this.name]},Ca=function(){return"[*"+f[this.name].name+"|"+f[this.name].img+
" "+f[this.name].name+"]"+(this.qty?this.qty:"")},x=function(a,b){return{name:a,qty:b||X,test:Ba,toString:Ca}},Da=function(a,b,c){return c[this.tag]},Ea=function(){return"[tag:"+this.tag+"|"+this.tag+"]"+(this.qty?this.qty:"")},g=function(a,b){return{tag:a,qty:b||X,test:Da,toString:Ea}},Fa={name:"Butter Muffin",test:function(a,b,c){return b.butterflywings&&!c.meat&&c.veggie},requires:"Butterfly Wings, veggie",requirements:[w("butterflywings"),q(g("meat")),g("veggie")],priority:1,weight:1,foodtype:"veggie",
health:25,hunger:37.5,perish:8640,sanity:15,cooktime:2},Ga={name:"Froggle Bunwich",test:function(a,b,c){return(b.froglegs||b.froglegs_cooked)&&c.veggie},requirements:[w("froglegs"),g("veggie")],priority:1,foodtype:"meat",health:25,hunger:37.5,perish:8640,sanity:15,cooktime:2},Ha={name:"Taffy",test:function(a,b,c){return c.sweetener&&3<=c.sweetener&&!c.meat},requirements:[g("sweetener",l(">=",3),q(g("meat")))],priority:10,foodtype:"veggie",health:-5,hunger:25,perishtime:8640,sanity:33,cooktime:2},
Ia={name:"Pumpkin Cookie",test:function(a,b,c){return(b.pumpkin||b.pumpkin_cooked)&&c.sweetener&&2<=c.sweetener},requirements:[w("pumpkin"),g("sweetener",l(">=",2))],priority:10,foodtype:"veggie",health:0,hunger:37.5,perishtime:5760,sanity:33,cooktime:2},Ja={name:"Stuffed Eggplant",test:function(a,b,c){return(b.eggplant||b.eggplant_cooked)&&c.veggie&&1<c.veggie},requirements:[w("eggplant"),g("veggie",l(">",1))],priority:1,foodtype:"veggie",health:5,hunger:37.5,perish:8640,sanity:15,cooktime:2},Ka=
{name:"Fishsticks",test:function(a,b,c){return c.fish&&b.twigs},requirements:[g("fish"),x("twigs")],priority:10,foodtype:"meat",health:50,hunger:37.5,perish:5760,sanity:15,cooktime:2},La={name:"Honey Nuggets",test:function(a,b,c){return b.honey&&c.meat&&1.5>=c.meat},requirements:[x("honey"),g("meat",l("<=",1.5))],priority:2,foodtype:"meat",health:25,hunger:37.5,perish:8640,sanity:15,cooktime:2},Ma={name:"Honey Ham",test:function(a,b,c){return b.honey&&c.meat&&1.5<c.meat},requirements:[x("honey"),
g("meat",l(">",1.5))],priority:2,foodtype:"meat",health:75,hunger:75,perish:8640,sanity:15,cooktime:2},Na={name:"Dragonpie",test:function(a,b,c){return(b.dragonfruit||b.dragonfruit_cooked)&&!c.meat},requirements:[w("dragonfruit"),q(g("meat"))],priority:1,foodtype:"veggie",health:75,hunger:75,perish:8640,sanity:15,cooktime:2},Oa={name:"Kabobs",test:function(a,b,c){return c.meat&&b.twigs},requirements:[g("meat"),x("twigs")],priority:5,foodtype:"meat",health:5,hunger:37.5,perish:8640,sanity:15,cooktime:2},
Pa={name:"Mandrake Soup",test:function(a,b){return b.mandrake},requirements:[x("mandrake")],priority:10,foodtype:"veggie",health:100,hunger:150,perish:2880,sanity:15,cooktime:3},Qa={name:"Bacon and Eggs",test:function(a,b,c){return c.egg&&1<c.egg&&c.meat&&1<c.meat&&!c.veggie},requirements:[g("egg",l(">",1)),g("meat",l(">",1)),q(g("veggie"))],priority:10,foodtype:"meat",health:75,hunger:75,perish:11520,sanity:15,cooktime:2},Ra={name:"Meatballs",test:function(a,b,c){return c.meat},requirements:[g("meat")],
priority:-1,foodtype:"meat",health:25,hunger:62.5,perish:5760,sanity:15,cooktime:0.75},Sa={name:"Meaty Stew",test:function(a,b,c){return c.meat&&3<=c.meat},requirements:[g("meat",l(">=",3))],priority:0,foodtype:"meat",health:25,hunger:150,perish:5760,sanity:15,cooktime:0.75},Ta={name:"Pierogi",test:function(a,b,c){return c.egg&&c.meat&&c.veggie},requirements:[g("egg"),g("meat"),g("veggie")],priority:5,foodtype:"meat",health:50,hunger:37.5,perish:11520,sanity:15,cooktime:1},Ua=x("drumstick",l(">",
1)),Va=g("meat",l(">",1)),ea=g("veggie"),fa=g("fruit"),h={butterflymuffin:Fa,frogglebunwich:Ga,taffy:Ha,pumpkincookie:Ia,stuffedeggplant:Ja,fishsticks:Ka,honeynuggets:La,honeyham:Ma,dragonpie:Na,kabobs:Oa,mandrakesoup:Pa,baconeggs:Qa,meatballs:Ra,bonestew:Sa,perogies:Ta,turkeydinner:{name:"Turkey Dinner",test:function(a,b,c){return b.drumstick&&1<b.drumstick&&c.meat&&1<c.meat&&(c.veggie||c.fruit)},requirements:[Ua,Va,{item1:ea,item2:fa,test:function(a,b,c){return this.item1.test(a,b,c)||this.item2.test(a,
b,c)},toString:function(){return this.item1+" or "+this.item2},cancel:ea.cancel||fa.cancel}],priority:10,foodtype:"meat",health:25,hunger:75,perish:2880,sanity:15,cooktime:3},ratatouille:{name:"Ratatouille",test:function(a,b,c){return!c.meat&&c.veggie},requirements:[q(g("meat")),g("veggie")],priority:0,foodtype:"veggie",health:25,hunger:25,perish:8640,sanity:15,cooktime:1},jammypreserves:{name:"Fist Full of Jam",test:function(a,b,c){return c.fruit&&!c.meat&&!c.veggie},requirements:[g("fruit"),q(g("meat")),
q(g("veggie"))],priority:0,foodtype:"veggie",health:25,hunger:37.5,perish:8640,sanity:15,cooktime:0.5},fruitmedley:{name:"Fruit Medley",test:function(a,b,c){return c.fruit&&3<=c.fruit&&!c.meat&&!c.veggie},requirements:[g("fruit",l(">=",3)),q(g("meat")),q(g("veggie"))],priority:0,foodtype:"veggie",health:75,hunger:25,perish:2880,sanity:15,cooktime:0.5},fishtacos:{name:"Fish Tacos",test:function(a,b,c){return c.fish&&(b.corn||b.corn_cooked)},requirements:[g("fish"),w("corn")],priority:10,foodtype:"meat",
health:75,hunger:37.5,perish:2880,sanity:15,cooktime:0.5},waffles:{name:"Waffles",test:function(a,b,c){return b.butter&&(b.berries||b.berries_cooked)&&c.egg},requirements:[x("butter"),w("berries"),g("egg")],priority:10,foodtype:"veggie",health:75,hunger:37.5,perish:2880,sanity:15,cooktime:0.5},monsterlasagna:{name:"Monster Lasagna",test:function(a,b,c){return c.monster&&2<=c.monster},requirements:[g("monster",l(">=",2))],priority:10,foodtype:"meat",health:-1,hunger:37.5,perish:5760,sanity:-20,cooktime:0.5},
wetgoop:{name:"Wet Goop",test:function(){return!0},requirements:[],priority:-2,health:0,hunger:0,perish:2880,sanity:15,cooktime:0.25}},r,j,ga,Wa=/^tag[: ]/,Xa=/^tag:? */,A,Ya=/^recipe[: ]/,Za=/^recipe:? */,Y,$a=/^ingredient[: ]/,ab=/^ingredient:? */,ha,ia,bb=function(a){a.match=a.uncookable?0:0===a.lowerName.indexOf(j)||a.raw&&0===a.raw.lowerName.indexOf(j)?3:0===ia.test(a.lowerName)?2:ha.test(a.lowerName)?1:0;return a.match},cb=function(a){return a.match=a[ga]+0||0},db=function(a){for(var b=0,c,
n=!0;b<A.length;){c=A[b].test(null,a.nameObject,a);if(A[b].cancel){if(!c){n=!0;break}}else c&&(n=!1);b++}return a.match=n?0:1},eb=function(a){for(var b=0,c,n=!0;b<a.requirements.length;){c=a.requirements[b].test(null,Y.nameObject,Y);if(a.requirements[b].cancel){if(!c){n=!0;break}}else c&&(n=!1);b++}return a.match=n?0:1},fb=function(a){return a.match=a.lowerName===j?1:0},gb=function(a){return a.match=a.lowerName===j||a.raw&&a.raw.lowerName===j||a.cook&&a.cook.lowerName===j?1:0},B=function(a,b){var c,
n;return a.match===b.match?(c=a.raw?a.raw.name:a.name,n=b.raw?b.raw.name:b.name,c!==n?c>n?1:c<n?-1:0:a.name===b.name?0:a.raw===b?1:-1):b.match-a.match};r=function(a,b){j=b.toLowerCase();if(Wa.test(j))return ga=j.split(Xa)[1],a.filter(cb).sort(B);if(Ya.test(j))return(A=h.byName(j.split(Za)[1].toLowerCase()))?(A=A.requirements,a.filter(db).sort(B)):[];if($a.test(j))return(Y=f.byName(j.split(ab)[1].toLowerCase()))?a.filter(eb).sort(B):[];if(0===j.indexOf("*"))return j=j.substring(1),a.filter(fb).sort(B);
if(0===j.indexOf("~"))return j=j.substring(1),a.filter(gb).sort(B);ia=RegExp("\\b"+j+".*");ha=RegExp("\\b"+j.split("").join(".*")+".*");return a.filter(bb).sort(B)};var Z,O,s;Z=function(a,b,c,n){var d,e;a.length=0;var f;O={};s={};for(d=0;d<b.length;d++)if(f=b[d],null!==f)for(e in O[f.id]=1+(O[f.id]||0),f)f.hasOwnProperty(e)&&"perish"!==e?s[e]=f[e]+(s[e]||0):"perish"===e&&(s[e]=Math.min(s[e]||11520,f[e]));for(b=0;b<h.length;b++){e=!1;for(d=0;d<h[b].requirements.length;d++)if(h[b].requirements[d].test(null,
O,s))h[b].requirements[d].cancel||(e=!0);else if(!n&&h[b].requirements[d].cancel){e=!1;break}else if(n&&!h[b].requirements[d].cancel){e=!1;break}e&&(!c||-1===c.indexOf(h[b]))&&a.push(h[b])}s.img="";s.name="Combined";return a};var ka,J=[],P,t;ka=function(a){J.length=0;var b,c,d;P={};t={};for(b=0;b<a.length;b++)if(d=a[b],null!==d)for(c in P[d.id]=1+(P[d.id]||0),d)d.hasOwnProperty(c)&&"perish"!==c?t[c]=d[c]+(t[c]||0):"perish"===c&&(t[c]=Math.min(t[c]||11520,d[c]));for(a=0;a<h.length;a++)h[a].test(null,
P,t)&&J.push(h[a]);J.sort(function(a,b){return b.priority-a.priority});t.img="";t.name="Combined";J.unshift(t);return J};var y=document.createElement("canvas"),$=y.getContext&&y.toDataURL&&y.getContext("2d"),K=document.createElement("canvas"),la=K.getContext&&K.getContext("2d"),C={},aa={},ma=!!$,Q=[],hb=function(a){return function(b){b=b.target;$.clearRect(0,0,64,64);$.drawImage(b,0,0,64,64);la.clearRect(0,0,32,32);la.drawImage(b,0,0,32,32);try{C[a]=y.toDataURL(),aa[a]=K.toDataURL()}catch(c){ma=!1}Q.filter(function(b){return b.url===
a}).forEach(function(b){b.url===a&&(delete b.img.dataset.pending,R&&b.img.removeAttribute("data-pending"),b.img.src=32===b.d?aa[a]||a:C[a]||a)});Q=Q.filter(function(b){return b.url!==a})}},na=function(a,b,c){a.dataset.pending=b;R&&a.setAttribute("data-pending",b);Q.push({url:b,img:a,d:c})},F=function(a,b){var c=new Image,d;ma?C[a]?c.src=32===b?aa[a]:C[a]:(null!==C[a]&&(C[a]=null,d=new Image,d.addEventListener("load",hb(a),!1),d.src=a),na(c,a,b)):c.src=a;return c};y.width=64;y.height=64;K.width=32;
K.height=32;F.queue=na;var ba,ib=/\[([^\|]*)\|([^\|]*)\]/;ba=function(a){var b=a&&a.split(ib),c,d;if(!b||1===b.length)return a;a=document.createDocumentFragment();a.appendChild(document.createTextNode(b[0]));for(c=1;c<b.length;c+=3)""===b[c]&&""===b[c+1]?a.appendChild(document.createElement("br")):(d=document.createElement("span"),d.className="link",d.dataset.link=b[c],R&&d.setAttribute("data-link",b[c]),b[c+1]&&0===b[c+1].indexOf("img/")?(d.appendChild(document.createTextNode(b[c+1].split(" ").slice(1).join(" "))),
d.appendChild(F(b[c+1].split(" ")[0],32))):d.appendChild(document.createTextNode(b[c+1]?b[c+1]:b[c])),a.appendChild(d)),a.appendChild(document.createTextNode(b[c+2]));return a};var e,L=0,S=document.getElementById("main"),jb=document.getElementById("food"),kb=document.getElementById("recipes"),lb=document.getElementById("navbar"),R=!1;document.documentElement.dataset||(R=!0,Object.defineProperty(Element.prototype,"dataset",{get:function(){this.ds||(this.ds={},Array.prototype.forEach.call(this.attributes,
function(a){0===a.name.indexOf("data-")&&(this.ds[a.name.substring(5)]=a.value)},this));return this.ds}}));var k,m=function(a,b){return"[tag:"+a+"|"+(b||a)+"]"};for(e in f)if(f.hasOwnProperty(e)){var d=f[e];d.match=0;d.lowerName=d.name.toLowerCase();d.id=e;d.nameObject={};d.nameObject[e]=1;d.img="img/"+d.name.replace(/ /g,"_").toLowerCase()+".png";-1!==e.indexOf("_cooked")&&(d.cooked=!0);f[e+"_cooked"]&&(d.cook=f[e+"_cooked"],f[e+"_cooked"].raw=d);d.info=[];k=d.info;d.fruit&&k.push(m("fruit")+(1===
d.fruit?"":"\u00d7"+d.fruit));d.veggie&&k.push(m("veggie","vegetable")+(1===d.veggie?"":"\u00d7"+d.veggie));d.meat&&k.push(m("meat")+(1===d.meat?"":"\u00d7"+d.meat));d.egg&&k.push(m("egg")+(1===d.egg?"":"\u00d7"+d.egg));d.fish&&k.push(m("fish"));d.magic&&k.push(m("magic"));d.decoration&&k.push(m("decoration"));d.inedible&&k.push(m("inedible"));d.monster&&k.push(m("monster","monster food"));d.sweetener&&k.push(m("sweetener"));d.fat&&k.push(m("fat"));d.dairy&&k.push(m("dairy"));f[L++]=d}f.length=L;
L=0;for(e in h)h.hasOwnProperty(e)&&(h[e].match=0,h[e].name=h[e].name||e,h[e].id=e,h[e].lowerName=h[e].name.toLowerCase(),h[e].weight=h[e].weight||1,h[e].priority=h[e].priority||0,h[e].img="img/"+h[e].name.replace(/ /g,"_").toLowerCase()+".png",h[e].requirements&&(h[e].requires=ba(h[e].requirements.join("; "))),h[L++]=h[e]);h.length=L;h.forEach=Array.prototype.forEach;h.filter=Array.prototype.filter;h.sort=Array.prototype.sort;h.byName=function(a){for(var b=this.length;b--;)if(this[b].lowerName===
a)return this[b]};var mb=function(a,b){return a+"[recipe:"+b.name+"|"+b.img+"]"};for(e in f)f.hasOwnProperty(e)&&(isNaN(e)&&isNaN(f[e]))&&(d=f[e],k=d.info,d.cooked&&k.push("cooked [*"+d.raw.name+"|"+d.raw.img+"]"),d.cook&&k.push("cook into [*"+d.cook.name+"|"+d.cook.img+"]"),d.info=k.join("; "),d.uncookable?d.info+="[|]cannot be added to crock pot":(d.recipes=[],h.forEach(function(a){for(var b=!1,c=a.requirements,e=c.length;e--;)if(c[e].test(null,d.nameObject,d))!c[e].cancel&&!b&&(b=!0);else if(c[e].cancel){b=
!1;break}b&&d.recipes.push(a)}),0<d.recipes.length&&(d.ingredient=!0,d.info+=d.recipes.reduce(mb,"[|][ingredient:"+d.name+"|Recipes] "))),d.info=ba(d.info));f.forEach=Array.prototype.forEach;f.filter=Array.prototype.filter;f.sort=Array.prototype.forEach;f.byName=function(a){for(var b=this.length;b--;)if(this[b].lowerName===a)return this[b]};var T,oa=lb.getElementsByTagName("li"),M={},N={},u,D,z,nb=function(a){T(a.target.dataset.tab)},v;T=function(a){z.className="";z=M[a];D.style.display="none";D=
N[a];z.className="selected";D.style.display="block"};for(e=0;e<oa.length;e++)v=oa[e],v.dataset.tab&&(M[v.dataset.tab]=v,N[v.dataset.tab]=document.getElementById(v.dataset.tab),N[v.dataset.tab].style.display="none",v.addEventListener("click",nb,!1));z=M.simulator;D=N.simulator;window.localStorage&&localStorage.foodGuideState&&("["===localStorage.foodGuideState[0]?(u={},u.pickers=JSON.parse(localStorage.foodGuideState),localStorage.foodGuideState=JSON.stringify(u)):u=JSON.parse(localStorage.foodGuideState),
u.activeTab&&M[u.activeTab]&&(z=M[u.activeTab],D=N[u.activeTab]));z.className="selected";D.style.display="block";window.addEventListener("beforeunload",function(){var a;window.localStorage&&(localStorage.foodGuideState||(localStorage.foodGuideState="{}"),a=JSON.parse(localStorage.foodGuideState),a.activeTab=z.dataset.tab,localStorage.foodGuideState=JSON.stringify(a))});var ob=function(a){a.dataset.pending&&F.queue(a,a.dataset.pending,32)},pa=function(a){var b,c,d,e=document.createElement("tr"),f;
for(b=1;b<arguments.length;b++)c=document.createElement(a),f=(d=arguments[b])&&d.indexOf?d:d.toString(),d instanceof DocumentFragment?(c.appendChild(d.cloneNode(!0)),Array.prototype.forEach.call(c.getElementsByTagName("img"),ob)):0===f.indexOf("img/")?(d=F(f),c.appendChild(d)):c.appendChild(document.createTextNode(f)),e.appendChild(c);return e},G=function(a,b,c,d,e,f,h){var g,j,k,l=!1,m,p,q=function(a){var b=c(a);h&&h(a)&&(b.className="highlighted",m||(m=b),p=b);g.appendChild(b)},r=function(c,d,h){var n,
ja;if(d||c&&""!==c.target.dataset.sort)n=d||c.target.dataset.sort,e&&(ja=b.shift()),"name"===n?b.sort(function(a,b){var c=a.raw?a.raw.name:a.name,d=b.raw?b.raw.name:b.name;return c!==d?c>d?1:c<d?-1:0:a.name===b.name?0:a.raw===b?1:-1}):b.sort(function(a,b){var c=a[n],d=b[n];return!isNaN(c)&&!isNaN(d)?d-c:isNaN(c)&&isNaN(d)?0:isNaN(c)?1:-1}),k===n?l=!l:(k=n,l=!1),l&&b.reverse(),e&&b.unshift(ja);c=document.createElement("tr");for(j in a)d=document.createElement("th"),d.appendChild(document.createTextNode(j)),
a[j]&&(a[j]===k&&(d.style.background=l?"#555":"#ccc",d.style.color=l?"#ccc":"#555",d.style.borderRadius="4px"),d.style.cursor="pointer",d.dataset.sort=a[j],d.addEventListener("click",r,!1)),c.appendChild(d);d=g;g=document.createElement("table");g.appendChild(c);p=m=null;b.forEach(q);f&&(g.className="links",Array.prototype.forEach.call(g.getElementsByClassName("link"),function(a){a.addEventListener("click",f,!1)}));d&&d.parentNode.replaceChild(g,d);h&&(m&&m.offsetTop+g.offsetTop+S.offsetTop+m.offsetHeight>
window.scrollY+window.innerHeight?m.scrollIntoView(!0):p&&p.offsetTop+g.offsetTop+S.offsetTop<window.scrollY&&p.scrollIntoView(!1))};d?r(null,d):r();g.update=function(a){r(null,null,a)};return g},H=function(a){return isNaN(a)?"":0<a?"+"+a:a},qa=function(a){return pa("td",a.img?a.img:"",a.name,H(a.health),H(a.hunger),isNaN(a.sanity)?"":H(a.sanity),isNaN(a.perish)?"Never":a.perish/480+" days",a.info||"")},U=function(a,b,c){return pa("td",a.img?a.img:"",a.name,H(a.health)+(b&&a.health!==b?" ("+(1E3*
(a.health/b)|0)/10+"%)":""),H(a.hunger)+(c&&a.hunger!==c?" ("+(1E3*(a.hunger/c)|0)/10+"%)":""),isNaN(a.sanity)?"":H(a.sanity),isNaN(a.perish)?"Never":a.perish/480+" days",(a.cooktime*ua+0.5|0)+" secs",a.priority||"0",a.requires||"")},V,W=[],ra=[],ca=G({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish",Info:""},Array.prototype.slice.call(f),qa,"name",!1,function(a){a=!a.target?a:"IMG"===a.target.tagName?a.target.parentNode.dataset.link:a.target.dataset.link;"recipe:"===
a.substring(0,7)||"ingredient:"===a.substring(0,11)?(T("crockpot"),"recipe:"===a.substring(0,7)&&(a="*"+a.substring(7)),ra=r(h,a),sa.update(!0)):(V!==a?(V=a,W=r(f,a)):(V="",W.length=0),ca.update(!0))},function(a){return-1!==W.indexOf(a)}),sa=G({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},Array.prototype.slice.call(h),U,"name",!1,function(a){a=!a.target?a:"IMG"===a.target.tagName?a.target.parentNode.dataset.link:
a.target.dataset.link;T("foodlist");V=a;W=r(f,a);ca.update(!0)},function(a){return-1!==ra.indexOf(a)});jb.appendChild(ca);kb.appendChild(sa);window.food=f;window.recipes=h;window.matchingNames=r;for(var I=function(a,b){var c=!1;null!==b?a.dataset.id=b.id:a.nextSibling&&null!==E(a.nextSibling)?(I(a,E(a.nextSibling)),I(a.nextSibling,null),c=!0):a.dataset.id=null;c||(null!==b?a.firstChild?a.replaceChild(F(b.img),a.firstChild):a.appendChild(F(b.img)):a.firstChild&&a.removeChild(a.firstChild),a.title=
b?b.name:"")},E=function(a){return f[a.dataset.id]||h[a.dataset.id]||null},ta=document.getElementsByClassName("ingredientpicker"),da=ta.length;da--;)(function(){var a=document.createElement("div"),b=document.createElement("ul"),c=ta[da],d=da,e,g="recipes"===c.dataset.type?h:f,j=c.nextSibling,k=j.getElementsByClassName("ingredient"),m,l,q=[],t=[],p=document.getElementById("results"),s=document.getElementById("discoverfood"),u=document.getElementById("discover"),v=document.createElement("span"),w=!1,
x=function(a){var b=f[a]||h[a]||null;if(m){for(a=0;a<k.length;a++)if(null===E(k[a]))return I(k[a],b),l(),a;return-1}-1===k.indexOf(a)&&(k.push(a),a=document.createElement("span"),a.className="ingredient",I(a,b),a.addEventListener("click",B,!1),j.appendChild(a),l());return 1},z=function(d){var e,f=x(("IMG"===d.target.tagName?d.target.parentNode:d.target).dataset.id);-1!==f&&(a.removeChild(b),b=document.createElement("ul"),e=r(g,""),e.forEach(A,b),a.appendChild(b),b.firstChild&&(b.firstChild.className=
"selected"),c.value="",f<k.length-1||!m?c.focus():c.blur(),d&&d.preventDefault&&d.preventDefault(),y())},A=function(a){var b=F(a.img,32),c=document.createElement("li");c.appendChild(b);c.appendChild(document.createTextNode(a.name));c.dataset.id=a.id;c.addEventListener("mousedown",z,!1);this.appendChild(c)},B=function(a){var b="IMG"===a.target.tagName?a.target.parentNode:a.target;if(m){if(null!==E(b))return I(b,null),l(),b.dataset.id;c.focus()}else return a=k.indexOf(b.dataset.id),k.splice(a,1),j.removeChild(b),
l(),k[a]||null},y=function(){0<S.offsetLeft-a.offsetWidth?(a.style.left=-a.offsetWidth+"px",a.style.top=c.offsetTop+"px"):S.offsetLeft+c.offsetLeft+c.offsetWidth+a.offsetWidth>window.innerWidth?(a.style.left=c.offsetLeft+"px",a.style.top=c.offsetTop+c.offsetHeight+"px"):(a.style.left=c.offsetLeft+c.offsetWidth+"px",a.style.top=c.offsetTop+"px")},C=function(){document.createElement("li");var d=r(g,c.value);a.removeChild(b);b=document.createElement("ul");d.forEach(A,b);b.firstChild&&(b.firstChild.className=
"selected");a.appendChild(b);y()},D=function(a){a="IMG"===a.target.tagName?a.target.parentNode.dataset.link:a.target.dataset.link;var b=r(g,a);1===b.length?x(b[0].id):(c.value=a,C(),c.focus())};"ingredients"===j.id?l=function(){var a,b,c,d,e;a=Array.prototype.map.call(k,function(a){return E(a)});b=ka(a);c=b[0].health;d=b[0].hunger;e=G({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},b,function(a){return U(a,
c,d)},"priority",!0,D);p.firstChild&&p.removeChild(p.firstChild);p.firstChild&&(p.removeChild(p.firstChild),p.removeChild(p.firstChild));p.appendChild(e);null!==a[0]&&(Z(q,a,b),0<q.length&&(p.appendChild(document.createTextNode("Add more ingredients to make:")),e=G({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},q,function(a){return U(a,c,d)},"priority",!1,D),p.appendChild(e)))}:"inventory"===j.id&&(l=function(){var a,
b;a=Array.prototype.map.call(j.getElementsByClassName("ingredient"),function(a){return E(a)});s.firstChild&&s.removeChild(s.firstChild);u.firstChild&&u.removeChild(u.firstChild);0<a.length&&(b=G({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish",Info:""},a,qa,"name"),s.appendChild(b),Z(t,a,null,!0),0<t.length&&(a=G({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},t,U,"name"),u.appendChild(a)))});
0!==k.length?(m=!0,Array.prototype.forEach.call(k,function(a){I(a,null);a.addEventListener("click",B,!1)})):(k=[],m=!1);window.localStorage&&localStorage.foodGuideState&&(e=JSON.parse(localStorage.foodGuideState).pickers)&&e[d]&&e[d].forEach(function(a){f[a]&&x(a)});a.className="ingredientdropdown";a.appendChild(b);a.addEventListener("mousedown",function(a){a.preventDefault()},!1);document.createElement("li");e=r(g,c.value);a.removeChild(b);b=document.createElement("ul");e.forEach(A,b);a.appendChild(b);
b.firstChild&&(b.firstChild.className="selected");v.className="clearingredients";v.appendChild(document.createTextNode("clear"));v.addEventListener("click",function(){if(""===c.value)for(;E(j.firstChild);)B({target:j.firstChild});else c.value="",C()},!1);j.parentNode.insertBefore(v,j);c.addEventListener("keydown",function(){},!1);c.addEventListener("keyup",function(a){var c,d,e;if(-1===[16,17,37,38,39,40,13].indexOf(a.keyCode))C();else{d=b.getElementsByTagName("li");for(e=0;e<d.length;e++)if("selected"===
d[e].className){c=d[e];if(38===a.keyCode||40===a.keyCode)d[e].className="";38===a.keyCode?d[0>e-1?d.length-1:e-1].className="selected":40===a.keyCode?d[(e+1)%d.length].className="selected":13===a.keyCode&&c&&(z({target:c}),y());break}!c&&0<d.length&&(38===a.keyCode?d[d.length-1].className="selected":40===a.keyCode?d[0].className="selected":13===a.keyCode&&z({target:d[0]}))}},!1);c.addEventListener("focus",function(){w||(w=!0,j.appendChild(a),y())},!1);c.addEventListener("blur",function(){w&&(w=!1,
j.removeChild(a))},!1);l();window.addEventListener("beforeunload",function(){var a,b;window.localStorage&&(localStorage.foodGuideState||(localStorage.foodGuideState="{}"),a=JSON.parse(localStorage.foodGuideState),a.pickers||(a.pickers=[]),m?(b=[],b=Array.prototype.map.call(k,function(a){return(a=E(a))?a.id:null}),a.pickers[d]=b):a.pickers[d]=k,localStorage.foodGuideState=JSON.stringify(a))})})()})();
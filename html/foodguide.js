(function(){var N,fa,qa=30,s=16*qa,qa=s/16,ga=3*s,m=6*s,l=10*s,v=15*s,G=20*s,ra=40*s,Xa=0.6666*qa,j={butter:{name:"Butter",fat:1,dairy:1,health:40,hunger:25,perish:ra,stack:40},butterflywings:{name:"Butterfly Wings",isveggie:!0,decoration:2,health:20,hunger:9.375,perish:m,stack:40},deerclopseyeball:{name:"Deerclops Eyeball",uncookable:!0,health:60,hunger:75,sanity:-15},bird_egg:{name:"Egg",egg:1,health:0,hunger:9.375,sanity:0,perish:l,stack:40,rot:"rottenegg"},bird_egg_cooked:{name:"Cooked Egg",egg:1,
precook:1,health:0,hunger:12.5,sanity:0,perish:m,stack:40},rottenegg:{name:"Rotten Egg",uncookable:!0,health:-1,hunger:-10,stack:40},fish:{name:"Fish",ismeat:!0,meat:0.5,fish:1,health:1,hunger:12.5,perish:ga,stack:40},fish_cooked:{name:"Cooked Fish",ismeat:!0,meat:0.5,fish:1,precook:1,health:1,hunger:12.5,perish:m,stack:40},froglegs:{name:"Frog Legs",ismeat:!0,meat:0.5,health:1,hunger:12.5,perish:m,sanity:-10,stack:40},froglegs_cooked:{name:"Cooked Frog Legs",ismeat:!0,meat:0.5,precook:1,health:3,
hunger:12.5,perish:l,sanity:-10,stack:40},flowerhat:{name:"Garland",health:3,hunger:0,sanity:10,perish:m,stack:1,uncookable:!0},hambat:{name:"Ham Bat",health:-8,hunger:25,sanity:-15,perish:l,stack:1,uncookable:!0},honey:{name:"Honey",sweetener:!0,health:3,hunger:9.375,perish:ra,stack:40},honeycomb:{name:"Honeycomb",sweetener:!0},mandrake:{name:"Mandrake",veggie:1,magic:1,health:60,hunger:75,stack:40},mandrake_cooked:{name:"Cooked Mandrake",uncookable:!0,veggie:1,magic:1,precook:1,health:100,hunger:150,
stack:40},monstermeat:{name:"Monster Meat",ismeat:!0,meat:1,monster:!0,health:-20,hunger:18.75,sanity:-15,perish:m,stack:20,dry:"monstermeat_dried",drytime:s},monstermeat_cooked:{name:"Cooked Monster Meat",ismeat:!0,meat:1,monster:!0,precook:1,health:-3,hunger:18.75,sanity:-10,perish:v,stack:20},monstermeat_dried:{name:"Monster Jerky",ismeat:!0,meat:1,monster:!0,dried:1,health:-3,hunger:18.75,sanity:-5,perish:G,stack:20},meat:{name:"Meat",ismeat:!0,meat:1,health:1,hunger:25,sanity:-10,perish:m,stack:20,
dry:"meat_dried",drytime:2*s},meat_cooked:{name:"Cooked Meat",ismeat:!0,meat:1,precook:1,health:3,hunger:25,sanity:0,perish:l,stack:20},meat_dried:{name:"Jerky",ismeat:!0,meat:1,dried:1,health:20,hunger:25,sanity:15,perish:G,stack:20},morsel:{name:"Morsel",ismeat:!0,meat:0.5,health:0,hunger:12.5,sanity:-10,perish:m,stack:40,drytime:s,dry:"smallmeat_dried"},morsel_cooked:{name:"Cooked Morsel",ismeat:!0,meat:0.5,precook:1,health:1,hunger:12.5,sanity:0,perish:l,stack:40},smallmeat_dried:{name:"Small Jerky",
ismeat:!0,meat:0.5,dried:1,health:8,hunger:12.5,sanity:10,perish:G,stack:40},drumstick:{name:"Drumstick",ismeat:!0,ideal:!0,meat:0.5,health:0,hunger:12.5,sanity:-10,perish:m,stack:20,drytime:s,dry:"smallmeat_dried"},drumstick_cooked:{name:"Fried Drumstick",ismeat:!0,meat:0.5,precook:1,health:1,hunger:12.5,perish:l,stack:20},red_mushroom:{name:"Red Mushroom",veggie:0.5,health:-20,hunger:12.5,sanity:0,perish:l,stack:40},green_mushroom:{name:"Green Mushroom",veggie:0.5,health:0,hunger:12.5,sanity:-50,
perish:l,stack:40},blue_mushroom:{name:"Blue Mushroom",veggie:0.5,health:20,hunger:12.5,sanity:-15,perish:l,stack:40},petals:{name:"Petals",uncookable:!0,health:1,hunger:0,sanity:-2.5,perish:m,stack:40},petals_evil:{name:"Dark Petals",uncookable:!0,health:0,hunger:0,sanity:-5,perish:m,stack:40},seeds:{name:"Seeds",uncookable:!0,health:0,hunger:4.6875,perish:ra,stack:40},seeds_cooked:{name:"Toasted Seeds",uncookable:!0,health:1,hunger:4.6875,perish:l,stack:40},spoiled_food:{name:"Rot",uncookable:!0,
health:-1,hunger:-10,stack:40},tallbirdegg:{name:"Tallbird Egg",egg:4,health:3,hunger:25},tallbirdegg_cooked:{name:"Fried Tallbird Egg",egg:4,precook:1,health:0,hunger:37.5,perish:m},trunk_summer:{name:"Koalefant Trunk",uncookable:!0,ismeat:!0,health:30,hunger:37.5,perish:m,stack:20},trunk_summer_cooked:{name:"Koalefant Trunk Steak",uncookable:!0,ismeat:!0,health:40,hunger:75,perish:v,stack:20},twigs:{name:"Twigs",inedible:1},carrot:{name:"Carrot",isveggie:!0,veggie:1,health:1,hunger:12.5,perish:l,
sanity:0,stack:40},carrot_cooked:{name:"Roasted Carrot",isveggie:!0,veggie:1,precook:1,health:3,hunger:12.5,perish:m,sanity:0,stack:40},corn:{name:"Corn",ideal:!0,isveggie:!0,veggie:1,health:3,hunger:25,perish:l,sanity:0,stack:40},corn_cooked:{name:"Popcorn",isveggie:!0,veggie:1,precook:1,health:3,hunger:12.5,perish:v,sanity:0,stack:40},pumpkin:{name:"Pumpkin",isveggie:!0,veggie:1,health:3,hunger:37.5,perish:l,sanity:0,stack:20},pumpkin_cooked:{name:"Hot Pumpkin",isveggie:!0,veggie:1,precook:1,health:8,
hunger:37.5,perish:m,sanity:0,stack:20},eggplant:{name:"Eggplant",isveggie:!0,veggie:1,health:8,hunger:25,perish:l,sanity:0,stack:20},eggplant_cooked:{name:"Braised Eggplant",isveggie:!0,veggie:1,precook:1,health:20,hunger:25,perish:m,sanity:0,stack:20},durian:{name:"Durian",isfruit:!0,monster:1,fruit:1,health:-3,hunger:25,perish:l,sanity:-5,stack:20},durian_cooked:{name:"Extra Smelly Durian",isfruit:!0,monster:1,fruit:1,precook:1,health:0,hunger:25,perish:m,sanity:-5,stack:20},pomegranate:{name:"Pomegranate",
isfruit:!0,fruit:1,health:3,hunger:9.375,perish:m,sanity:0,stack:40},pomegranate_cooked:{name:"Sliced Pomegranate",isfruit:!0,fruit:1,precook:1,health:20,hunger:12.5,perish:ga,sanity:0,stack:40},dragonfruit:{name:"Dragon Fruit",isfruit:!0,fruit:1,health:3,hunger:9.375,perish:m,sanity:0,stack:40},dragonfruit_cooked:{name:"Prepared Dragon Fruit",isfruit:!0,fruit:1,precook:1,health:20,hunger:12.5,perish:ga,sanity:0,stack:40},berries:{name:"Berries",isfruit:!0,fruit:0.5,health:0,hunger:9.375,perish:m,
sanity:0,stack:40},berries_cooked:{name:"Roasted Berries",isfruit:!0,fruit:0.5,precook:1,health:1,hunger:12.5,perish:ga,sanity:0,stack:40}},Ya=function(){return this.op+this.qty},Za={"=":function(a){return a===this.qty},">":function(a){return a>this.qty},"<":function(a){return a<this.qty},">=":function(a){return a>=this.qty},"<=":function(a){return a<=this.qty}},sa={test:function(a){return!!a},toString:function(){return""}},u=function(a,b){return{op:a,qty:b,test:Za[a],toString:Ya}},$a=function(a,
b,c){return this.item1.test(a,b,c)||this.item2.test(a,b,c)},ab=function(){return this.item1+" or "+this.item2},Da=function(a,b){return{item1:a,item2:b,test:$a,toString:ab,cancel:a.cancel||b.cancel}},bb=function(a,b,c){return!this.item.test(a,b,c)},cb=function(){return this.item.toString().substring(0,this.item.toString().length-1)+"|strike]"},q=function(a){return{item:a,test:bb,toString:cb,cancel:!0}},db=function(a,b){return(b[this.name]||0)+(b[this.name+"_cooked"]||0)},eb=function(){return"[*"+j[this.name].name+
"|"+j[this.name].img+" "+j[this.name].name+"]"+(j[this.name].cook?"[*"+j[this.name].cook.name+"|"+j[this.name].cook.img+"]":"")+(j[this.name].raw?"[*"+j[this.name].raw.name+"|"+j[this.name].raw.img+"]":"")+(this.qty?this.qty:"")},B=function(a,b){return{name:a,qty:b||sa,test:db,toString:eb}},fb=function(a,b){return b[this.name]},gb=function(){return"[*"+j[this.name].name+"|"+j[this.name].img+" "+j[this.name].name+"]"+(this.qty?this.qty:"")},D=function(a,b){return{name:a,qty:b||sa,test:fb,toString:gb}},
hb=function(a,b,c){return c[this.tag]},ib=function(){return"[tag:"+this.tag+"|"+this.tag+"]"+(this.qty?this.qty:"")},f=function(a,b){return{tag:a,qty:b||sa,test:hb,toString:ib}},g={butterflymuffin:{name:"Butter Muffin",test:function(a,b,c){return b.butterflywings&&!c.meat&&c.veggie},requires:"Butterfly Wings, veggie",requirements:[B("butterflywings"),q(f("meat")),f("veggie")],priority:1,weight:1,foodtype:"veggie",health:20,hunger:37.5,perish:v,sanity:5,cooktime:2},frogglebunwich:{name:"Froggle Bunwich",
test:function(a,b,c){return(b.froglegs||b.froglegs_cooked)&&c.veggie},requirements:[B("froglegs"),f("veggie")],priority:1,foodtype:"meat",health:20,hunger:37.5,perish:v,sanity:5,cooktime:2},taffy:{name:"Taffy",test:function(a,b,c){return c.sweetener&&3<=c.sweetener&&!c.meat},requirements:[f("sweetener",u(">=",3),q(f("meat")))],priority:10,foodtype:"veggie",health:-3,hunger:25,perish:v,sanity:15,cooktime:2},pumpkincookie:{name:"Pumpkin Cookie",test:function(a,b,c){return(b.pumpkin||b.pumpkin_cooked)&&
c.sweetener&&2<=c.sweetener},requirements:[B("pumpkin"),f("sweetener",u(">=",2))],priority:10,foodtype:"veggie",health:0,hunger:37.5,perish:l,sanity:15,cooktime:2},stuffedeggplant:{name:"Stuffed Eggplant",test:function(a,b,c){return(b.eggplant||b.eggplant_cooked)&&c.veggie&&1<c.veggie},requirements:[B("eggplant"),f("veggie",u(">",1))],priority:1,foodtype:"veggie",health:3,hunger:37.5,perish:v,sanity:5,cooktime:2},fishsticks:{name:"Fishsticks",test:function(a,b,c){return c.fish&&b.twigs&&c.inedible&&
1>=c.inedible},requirements:[f("fish"),D("twigs"),f("inedible"),f("inedible",u("<=",1))],priority:10,foodtype:"meat",health:40,hunger:37.5,perish:l,sanity:5,cooktime:2},honeynuggets:{name:"Honey Nuggets",test:function(a,b,c){return b.honey&&c.meat&&1.5>=c.meat&&!c.inedible},requirements:[D("honey"),f("meat",u("<=",1.5)),q(f("inedible"))],priority:2,foodtype:"meat",health:20,hunger:37.5,perish:v,sanity:5,cooktime:2},honeyham:{name:"Honey Ham",test:function(a,b,c){return b.honey&&c.meat&&1.5<c.meat&&
!c.inedible},requirements:[D("honey"),f("meat",u(">",1.5)),q(f("inedible"))],priority:2,foodtype:"meat",health:30,hunger:75,perish:v,sanity:5,cooktime:2},dragonpie:{name:"Dragonpie",test:function(a,b,c){return(b.dragonfruit||b.dragonfruit_cooked)&&!c.meat},requirements:[B("dragonfruit"),q(f("meat"))],priority:1,foodtype:"veggie",health:40,hunger:75,perish:v,sanity:5,cooktime:2},kabobs:{name:"Kabobs",test:function(a,b,c){return c.meat&&b.twigs&&(!c.monster||1>=c.monster)&&c.inedible&&1>=c.inedible},
requirements:[f("meat"),D("twigs"),Da(q(f("monster")),f("monster",u("<=",1))),f("inedible"),f("inedible",u("<=",1))],priority:5,foodtype:"meat",health:3,hunger:37.5,perish:v,sanity:5,cooktime:2},mandrakesoup:{name:"Mandrake Soup",test:function(a,b){return b.mandrake},requirements:[D("mandrake")],priority:10,foodtype:"veggie",health:100,hunger:150,perish:m,sanity:5,cooktime:3},baconeggs:{name:"Bacon and Eggs",test:function(a,b,c){return c.egg&&1<c.egg&&c.meat&&1<c.meat&&!c.veggie},requirements:[f("egg",
u(">",1)),f("meat",u(">",1)),q(f("veggie"))],priority:10,foodtype:"meat",health:20,hunger:75,perish:G,sanity:5,cooktime:2},meatballs:{name:"Meatballs",test:function(a,b,c){return c.meat&&!c.inedible},requirements:[f("meat"),q(f("inedible"))],priority:-1,foodtype:"meat",health:3,hunger:62.5,perish:l,sanity:5,cooktime:0.75},bonestew:{name:"Meaty Stew",test:function(a,b,c){return c.meat&&3<=c.meat&&!c.inedible},requirements:[f("meat",u(">=",3)),q(f("inedible"))],priority:0,foodtype:"meat",health:12,
hunger:150,perish:l,sanity:5,cooktime:0.75},perogies:{name:"Pierogi",test:function(a,b,c){return c.egg&&c.meat&&c.veggie&&!c.inedible},requirements:[f("egg"),f("meat"),f("veggie"),q(f("inedible"))],priority:5,foodtype:"meat",health:40,hunger:37.5,perish:G,sanity:5,cooktime:1},turkeydinner:{name:"Turkey Dinner",test:function(a,b,c){return b.drumstick&&1<b.drumstick&&c.meat&&1<c.meat&&(c.veggie||c.fruit)},requirements:[D("drumstick",u(">",1)),f("meat",u(">",1)),Da(f("veggie"),f("fruit"))],priority:10,
foodtype:"meat",health:20,hunger:75,perish:m,sanity:5,cooktime:3},ratatouille:{name:"Ratatouille",test:function(a,b,c){return!c.meat&&c.veggie&&!c.inedible},requirements:[q(f("meat")),f("veggie"),q(f("inedible"))],priority:0,foodtype:"veggie",health:3,hunger:25,perish:v,sanity:5,cooktime:1},jammypreserves:{name:"Fist Full of Jam",test:function(a,b,c){return c.fruit&&!c.meat&&!c.veggie&&!c.inedible},requirements:[f("fruit"),q(f("meat")),q(f("veggie")),q(f("inedible"))],priority:0,foodtype:"veggie",
health:3,hunger:37.5,perish:v,sanity:5,cooktime:0.5},fruitmedley:{name:"Fruit Medley",test:function(a,b,c){return c.fruit&&3<=c.fruit&&!c.meat&&!c.veggie},requirements:[f("fruit",u(">=",3)),q(f("meat")),q(f("veggie"))],priority:0,foodtype:"veggie",health:20,hunger:25,perish:m,sanity:5,cooktime:0.5},fishtacos:{name:"Fish Tacos",test:function(a,b,c){return c.fish&&(b.corn||b.corn_cooked)},requirements:[f("fish"),B("corn")],priority:10,foodtype:"meat",health:20,hunger:37.5,perish:m,sanity:5,cooktime:0.5},
waffles:{name:"Waffles",test:function(a,b,c){return b.butter&&(b.berries||b.berries_cooked)&&c.egg},requirements:[D("butter"),B("berries"),f("egg")],priority:10,foodtype:"veggie",health:60,hunger:37.5,perish:m,sanity:5,cooktime:0.5},monsterlasagna:{name:"Monster Lasagna",test:function(a,b,c){return c.monster&&2<=c.monster&&!c.inedible},requirements:[f("monster",u(">=",2)),q(f("inedible"))],priority:10,foodtype:"meat",health:-20,hunger:37.5,perish:m,sanity:-20,cooktime:0.5},wetgoop:{name:"Wet Goop",
test:function(){return!0},requirements:[],trash:!0,priority:-2,health:0,hunger:0,perish:m,sanity:0,cooktime:0.25}},O,p,Ea,jb=/^tag[: ]/,kb=/^tag:? */,J,lb=/^recipe[: ]/,mb=/^recipe:? */,ta,nb=/^ingredient[: ]/,ob=/^ingredient:? */,Fa,Ga,Ha=!1,pb=function(a){a.match=!Ha&&a.uncookable?0:0===a.lowerName.indexOf(p)||a.raw&&0===a.raw.lowerName.indexOf(p)?3:0===Ga.test(a.lowerName)?2:Fa.test(a.lowerName)?1:0;return a.match},qb=function(a){return a.match=a[Ea]+0||0},rb=function(a){for(var b=0,c,e=!0;b<J.length;){c=
J[b].test(null,a.nameObject,a);if(J[b].cancel){if(!c){e=!0;break}}else c&&(e=!1);b++}return a.match=e?0:1},sb=function(a){for(var b=0,c,e=!0;b<a.requirements.length;){c=a.requirements[b].test(null,ta.nameObject,ta);if(a.requirements[b].cancel){if(!c){e=!0;break}}else c&&(e=!1);b++}return a.match=e?0:1},tb=function(a){return a.match=a.lowerName===p?1:0},ub=function(a){return a.match=a.lowerName===p||a.raw&&a.raw.lowerName===p||a.cook&&a.cook.lowerName===p?1:0},Q=function(a,b){var c,e;return a.match===
b.match?(c=a.raw?a.raw.name:a.name,e=b.raw?b.raw.name:b.name,c!==e?c>e?1:c<e?-1:0:a.name===b.name?0:a.raw===b?1:-1):b.match-a.match};O=function(a,b,c){Ha=!!c;p=b.toLowerCase();if(jb.test(p))return Ea=p.split(kb)[1],a.filter(qb).sort(Q);if(lb.test(p))return(J=g.byName(p.split(mb)[1].toLowerCase()))?(J=J.requirements,a.filter(rb).sort(Q)):[];if(nb.test(p))return(ta=j.byName(p.split(ob)[1].toLowerCase()))?a.filter(sb).sort(Q):[];if(0===p.indexOf("*"))return p=p.substring(1),a.filter(tb).sort(Q);if(0===
p.indexOf("~"))return p=p.substring(1),a.filter(ub).sort(Q);Ga=RegExp("\\b"+p+".*");Fa=RegExp("\\b"+p.split("").join(".*")+".*");return a.filter(pb).sort(Q)};var ua=function(a,b,c){var e,d,f;for(e=0;e<a.length;e++)if(f=a[e],null!==f)for(d in b[f.id]=1+(b[f.id]||0),f)f.hasOwnProperty(d)&&"perish"!==d&&!isNaN(f[d])?c[d]=f[d]+(c[d]||0):"perish"===d&&(c[d]=Math.min(c[d]||G,f[d]))},va,wa,V;va=function(a,b,c,e){var d,f;a.length=0;wa={};V={};ua(b,wa,V);for(b=0;b<g.length;b++){f=!1;for(d=0;d<g[b].requirements.length;d++)if(g[b].requirements[d].test(null,
wa,V))g[b].requirements[d].cancel||(f=!0);else if(!e&&g[b].requirements[d].cancel){f=!1;break}else if(e&&!g[b].requirements[d].cancel){f=!1;break}f&&(!c||-1===c.indexOf(g[b]))&&a.push(g[b])}V.img="";V.name="Combined";return a};var Ia,W=[],xa,R;Ia=function(a){W.length=0;xa={};R={};ua(a,xa,R);for(a=0;a<g.length;a++)g[a].test(null,xa,R)&&W.push(g[a]);W.sort(function(a,c){return c.priority-a.priority});R.img="";R.name="Combined";W.unshift(R);return W};var K=document.createElement("canvas"),ya=K.getContext&&
K.toDataURL&&K.getContext("2d"),ba=document.createElement("canvas"),Ja=ba.getContext&&ba.getContext("2d"),P={},za={},Ka=!!ya,ha=[],vb=function(a){return function(b){b=b.target;ya.clearRect(0,0,64,64);ya.drawImage(b,0,0,64,64);Ja.clearRect(0,0,32,32);Ja.drawImage(b,0,0,32,32);try{P[a]=K.toDataURL(),za[a]=ba.toDataURL()}catch(c){Ka=!1}ha.filter(function(b){return b.url===a}).forEach(function(b){b.url===a&&(delete b.img.dataset.pending,ia&&b.img.removeAttribute("data-pending"),b.img.src=32===b.d?za[a]||
a:P[a]||a)});ha=ha.filter(function(b){return b.url!==a})}},La=function(a,b,c){a.dataset.pending=b;ia&&a.setAttribute("data-pending",b);ha.push({url:b,img:a,d:c})},T=function(a,b){var c=new Image,e;Ka?P[a]?c.src=32===b?za[a]:P[a]:(null!==P[a]&&(P[a]=null,e=new Image,e.addEventListener("load",vb(a),!1),e.src=a),La(c,a,b)):c.src=a;return c};K.width=64;K.height=64;ba.width=32;ba.height=32;T.queue=La;var ja,wb=/\[([^\|]*)\|([^\|\]]*)\|?([^\|\]]*)\]/,Ma=/([^\|]\]\[[^\|]+\|[^\|\]]+)\|?([^\|\](?:left)]*)(?=\])/g,
xb=/(\[[^\|]+\|[^\|\]]+)\|?([^\|\]]*)(?=\]\[)(?!\]\[\|)/g,Na=function(a,b,c){return b+"|"+(0===c.length?"left":c+" left")},yb=function(a,b,c){return b+"|"+(0===c.length?"right":c+" right")};ja=function(a){var b=a&&a.replace(Ma,Na).replace(Ma,Na).replace(xb,yb);a=b&&b.split(wb);var c,e;if(!a||1===a.length)return b;b=document.createDocumentFragment();b.appendChild(document.createTextNode(a[0]));for(c=1;c<a.length;c+=4)""===a[c]&&""===a[c+1]?b.appendChild(document.createElement("br")):(e=document.createElement("span"),
e.className=""===a[c+2]?"link":"link "+a[c+2],e.dataset.link=a[c],ia&&e.setAttribute("data-link",a[c]),a[c+1]&&0===a[c+1].indexOf("img/")?(e.appendChild(document.createTextNode(a[c+1].split(" ").slice(1).join(" "))),e.appendChild(T(a[c+1].split(" ")[0],32))):e.appendChild(document.createTextNode(a[c+1]?a[c+1]:a[c])),b.appendChild(e)),b.appendChild(document.createTextNode(a[c+3]));return b};var h,ca=0,Oa=document.getElementById("main"),zb=document.getElementById("food"),Ab=document.getElementById("recipes"),
Bb=document.getElementById("navbar"),ia=!1;document.documentElement.dataset||(ia=!0,Object.defineProperty(Element.prototype,"dataset",{get:function(){this.ds||(this.ds={},Array.prototype.forEach.call(this.attributes,function(a){0===a.name.indexOf("data-")&&(this.ds[a.name.substring(5)]=a.value)},this));return this.ds}}));document.getElementById("stalehealth").appendChild(document.createTextNode(Math.round(333)/10+"%"));document.getElementById("stalehunger").appendChild(document.createTextNode(Math.round(667)/
10+"%"));document.getElementById("spoiledhunger").appendChild(document.createTextNode(Math.round(500)/10+"%"));document.getElementById("spoiledsanity").appendChild(document.createTextNode(10));document.getElementById("perishground").appendChild(document.createTextNode(Math.round(1500)/10+"%"));document.getElementById("perishwinter").appendChild(document.createTextNode(Math.round(750)/10+"%"));document.getElementById("perishfridge").appendChild(document.createTextNode(Math.round(500)/10+"%"));var n,
w=function(a,b){return"[tag:"+a+"|"+(b||a)+"]"};for(h in j)if(j.hasOwnProperty(h)){var d=j[h];d.match=0;d.lowerName=d.name.toLowerCase();d.id=h;d.nameObject={};d.nameObject[h]=1;d.img="img/"+d.name.replace(/ /g,"_").toLowerCase()+".png";-1!==h.indexOf("_cooked")&&(d.cooked=!0);j[h+"_cooked"]&&(d.cook=j[h+"_cooked"],j[h+"_cooked"].raw=d);d.info=[];n=d.info;d.fruit&&n.push(w("fruit")+(1===d.fruit?"":"\u00d7"+d.fruit));d.veggie&&n.push(w("veggie","vegetable")+(1===d.veggie?"":"\u00d7"+d.veggie));d.meat&&
n.push(w("meat")+(1===d.meat?"":"\u00d7"+d.meat));d.egg&&n.push(w("egg")+(1===d.egg?"":"\u00d7"+d.egg));d.fish&&n.push(w("fish"));d.magic&&n.push(w("magic"));d.decoration&&n.push(w("decoration"));d.inedible&&n.push(w("inedible"));d.monster&&n.push(w("monster","monster food"));d.sweetener&&n.push(w("sweetener"));d.fat&&n.push(w("fat"));d.dairy&&n.push(w("dairy"));d.comment&&n.push(d.comment);j[ca++]=d}j.length=ca;ca=0;for(h in g)g.hasOwnProperty(h)&&(g[h].match=0,g[h].name=g[h].name||h,g[h].id=h,g[h].lowerName=
g[h].name.toLowerCase(),g[h].weight=g[h].weight||1,g[h].priority=g[h].priority||0,g[h].img="img/"+g[h].name.replace(/ /g,"_").toLowerCase()+".png",g[h].requirements&&(g[h].requires=ja(g[h].requirements.join("; "))),g[ca++]=g[h]);g.length=ca;g.forEach=Array.prototype.forEach;g.filter=Array.prototype.filter;g.sort=Array.prototype.sort;g.byName=function(a){for(var b=this.length;b--;)if(this[b].lowerName===a)return this[b]};var Cb=function(a,b){return a+"[recipe:"+b.name+"|"+b.img+"]"};for(h in j)j.hasOwnProperty(h)&&
(isNaN(h)&&isNaN(j[h]))&&(d=j[h],n=d.info,d.cooked&&n.push("from [*"+d.raw.name+"|"+d.raw.img+"]"),d.cook&&n.push("cook: [*"+d.cook.name+"|"+d.cook.img+"]"),d.dry&&(d.dry instanceof Object||(d.dry=j[d.dry]),n.push("dry in "+d.drytime/s+" "+(1===d.drytime/s?"day":"days")+": [*"+d.dry.name+"|"+d.dry.img+"]")),d.info=n.join("; "),d.uncookable?d.info+="[|]cannot be added to crock pot":(d.recipes=[],g.forEach(function(a){for(var b=!1,c=a.requirements,e=c.length;e--;)if(c[e].test(null,d.nameObject,d))!c[e].cancel&&
!b&&(b=!0);else if(c[e].cancel){b=!1;break}b&&d.recipes.push(a)}),0<d.recipes.length&&(d.ingredient=!0,d.info+=d.recipes.reduce(Cb,"[|][ingredient:"+d.name+"|Recipes] "))),d.info=ja(d.info));j.forEach=Array.prototype.forEach;j.filter=Array.prototype.filter;j.sort=Array.prototype.forEach;j.byName=function(a){for(var b=this.length;b--;)if(this[b].lowerName===a)return this[b]};var ka="id health hunger fruit veggie meat egg fish magic decoration inedible monster sweetener fat dairy".split(" ");fa=N=void 0;
j.filter(function(a){return!a.uncookable&&!a.skip&&(a.ideal||!a.cook&&(!a.raw||!a.raw.ideal))}).map(function(a){for(var b={},c=ka.length;c--;)a.hasOwnProperty(ka[c])&&(b[ka[c]]=a[ka[c]]);return b});N=g.filter(function(a){return!a.trash}).sort(function(a,b){return b.priority-a.priority});fa=N.map(function(a){return a.test});N.map(function(a){return a.test.toString()});N.map(function(a){return a.priority});var la,Pa=Bb.getElementsByTagName("li"),da={},ea={},E,S,L,Db=function(a){la(a.target.dataset.tab)},
F;la=function(a){L.className="";L=da[a];S.style.display="none";S=ea[a];L.className="selected";S.style.display="block"};for(h=0;h<Pa.length;h++)F=Pa[h],F.dataset.tab&&(da[F.dataset.tab]=F,ea[F.dataset.tab]=document.getElementById(F.dataset.tab),ea[F.dataset.tab].style.display="none",F.addEventListener("selectstart",function(a){a.preventDefault()},!1),F.addEventListener("click",Db,!1));L=da.simulator;S=ea.simulator;window.localStorage&&localStorage.foodGuideState&&("["===localStorage.foodGuideState[0]?
(E={},E.pickers=JSON.parse(localStorage.foodGuideState),localStorage.foodGuideState=JSON.stringify(E)):E=JSON.parse(localStorage.foodGuideState),E.activeTab&&da[E.activeTab]&&(L=da[E.activeTab],S=ea[E.activeTab]));L.className="selected";S.style.display="block";window.addEventListener("beforeunload",function(){var a;window.localStorage&&(localStorage.foodGuideState||(localStorage.foodGuideState="{}"),a=JSON.parse(localStorage.foodGuideState),a.activeTab=L.dataset.tab,localStorage.foodGuideState=JSON.stringify(a))});
var Eb=function(a){a.dataset.pending&&T.queue(a,a.dataset.pending,32)},Aa=function(a){var b,c,e,d=document.createElement("tr"),f;for(b=1;b<arguments.length;b++)c=document.createElement(a),f=(e=arguments[b])&&e.indexOf?e:e.toString(),e instanceof DocumentFragment?(c.appendChild(e.cloneNode(!0)),Array.prototype.forEach.call(c.getElementsByTagName("img"),Eb)):0===f.indexOf("img/")?(e=T(f),c.appendChild(e)):c.appendChild(document.createTextNode(f)),d.appendChild(c);return d},X=function(a,b,c,e,d,f,j,
g,h,m){var r,p,t,$=!1,l,n,k,q=function(a){var b;if((!m||k<m)&&(!g||g(a)))b=c(a),j&&j(a)&&(b.className="highlighted",l||(l=b),n=b),r.appendChild(b),k++},y=function(c,e,j){var g,h;if(e||c&&""!==c.target.dataset.sort||t){g=e||c&&c.target.dataset.sort||t;d&&(h=b.shift());"name"===g?b.sort(function(a,b){var c=a.raw?a.raw.name:a.name,e=b.raw?b.raw.name:b.name;return c!==e?c>e?1:c<e?-1:0:a.name===b.name?0:a.raw===b?1:-1}):b.sort(function(a,b){var c=a[g],e=b[g];return!isNaN(c)&&!isNaN(e)?e-c:isNaN(c)&&isNaN(e)?
0:isNaN(c)?1:-1});if(e||c)t===g?$=!$:(t=g,$=!1);$&&b.reverse();d&&b.unshift(h)}c=document.createElement("tr");for(p in a)e=document.createElement("th"),e.appendChild(document.createTextNode(p)),a[p]&&(a[p]===t&&(e.style.background=$?"#555":"#ccc",e.style.color=$?"#ccc":"#555",e.style.borderRadius="4px"),e.style.cursor="pointer",e.dataset.sort=a[p],e.addEventListener("click",y,!1)),c.appendChild(e);e=r;r=document.createElement("table");r.appendChild(c);n=l=null;k=0;b.forEach(q);f&&(r.className="links",
Array.prototype.forEach.call(r.getElementsByClassName("link"),function(a){a.addEventListener("click",f,!1)}));e&&e.parentNode.replaceChild(r,e);j&&(l&&l.offsetTop+r.offsetTop+Oa.offsetTop+l.offsetHeight>window.scrollY+window.innerHeight?l.scrollIntoView(!0):n&&n.offsetTop+r.offsetTop+Oa.offsetTop<window.scrollY&&n.scrollIntoView(!1))};e?y(null,e):y();r.update=function(a){y(null,null,a)};r.setMaxRows=function(a){m=a;this.update()};return r},z=function(a){return isNaN(a)?"":0<a?"+"+a:a},Qa=function(a,
b){return a<b?(b-a)/Math.abs(a):a>b?-(a-b)/Math.abs(a):0},Ra=function(a,b){return!isNaN(a)&&a!==b?" ("+z((100*(a<b?(b-a)/Math.abs(a):a>b?-(a-b)/Math.abs(a):0)).toFixed(0))+"%)":""},Sa=function(a){return Aa("td",a.img?a.img:"",a.name,z(a.health),z(a.hunger),isNaN(a.sanity)?"":z(a.sanity),isNaN(a.perish)?"Never":a.perish/s+" "+(1===a.perish/s?"day":"days"),a.info||"")},na=function(a,b,c){return Aa("td",a.img?a.img:"",a.name,z(a.health)+Ra(b,a.health),z(a.hunger)+Ra(c,a.hunger),isNaN(a.sanity)?"":z(a.sanity),
isNaN(a.perish)?"Never":a.perish/s+" "+(1===a.perish/s?"day":"days"),(a.cooktime*Xa+0.5|0)+" secs",a.priority||"0",a.requires||"")},oa,pa=[],Ta=[],Ba=X({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish",Info:""},Array.prototype.slice.call(j),Sa,"name",!1,function(a){a=!a.target?a:"IMG"===a.target.tagName?a.target.parentNode.dataset.link:a.target.dataset.link;"recipe:"===a.substring(0,7)||"ingredient:"===a.substring(0,11)?(la("crockpot"),"recipe:"===a.substring(0,7)&&
(a="*"+a.substring(7)),Ta=O(g,a),Ua.update(!0)):(oa!==a?(oa=a,pa=O(j,a)):(oa="",pa.length=0),Ba.update(!0))},function(a){return-1!==pa.indexOf(a)}),Ua=X({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},Array.prototype.slice.call(g),na,"name",!1,function(a){a=!a.target?a:"IMG"===a.target.tagName?a.target.parentNode.dataset.link:a.target.dataset.link;la("foodlist");oa=a;pa=O(j,a);Ba.update(!0)},function(a){return-1!==
Ta.indexOf(a)});zb.appendChild(Ba);Ab.appendChild(Ua);var Fb=function(a,b){return a+"[ingredient:"+j[b.id].name+"|"+j[b.id].img+"]"},Va=function(a){var b=document.createElement("button");b.appendChild(document.createTextNode("Calculate efficient recipes (may take some time)"));b.className="makablebutton";b.addEventListener("click",function(){var c=[],e=a?a.length:null,d,f,h=[],m,l,p,r,n=[],t=[],q,s,u,k=function(a){return-1!==t.indexOf(a.id)},v=function(a){return-1!==this.indexOf(j[a])},y=function(a){-1!==
t.indexOf(a.target.dataset.id)&&t.splice(t.indexOf(a.target.dataset.id),1);-1!==n.indexOf(a.target.dataset.id)?(n.splice(n.indexOf(a.target.dataset.id),1),a.target.className=""):(n.push(a.target.dataset.id),a.target.className="selected");u.update()},w=function(a){-1!==n.indexOf(a.target.dataset.id)&&n.splice(n.indexOf(a.target.dataset.id),1);-1!==t.indexOf(a.target.dataset.id)?(t.splice(t.indexOf(a.target.dataset.id),1),a.target.className=""):(t.push(a.target.dataset.id),a.target.className="excluded");
u.update();a.preventDefault()},F=function(a){f&&(f.className="");d===a.target.dataset.recipe?d=f=null:(d=a.target.dataset.recipe,f=a.target,a.target.className="selected");u.update()};null===e&&(e=j.length,a=j);for(;e--;)a[e].cook&&(-1===c.indexOf(a[e].cook)&&!a[e].cook.uncookable)&&c.push(a[e].cook),!a[e].uncookable&&((a[e].ideal||!a[e].cook||a[e].cook.uncookable)&&-1===c.indexOf(a[e]))&&c.push(a[e]);q=[];u=X({"":"",Name:"name",Health:"health","Health+":"healthpls",Hunger:"hunger","Hunger+":"hungerpls",
Ingredients:""},q,function(a){var b=a.recipe;return Aa("td",b.img?b.img:"",b.name,z(b.health),z(a.healthpls)+" ("+z(100*a.healthpct|0)+"%)",z(b.hunger),z(a.hungerpls)+" ("+z(100*a.hungerpct|0)+"%)",ja(a.ingredients.reduce(Fb,"")))},"hungerpls",!1,null,null,function(a){return(!d||a.recipe.name===d)&&(!t.length||!a.ingredients.some(k))&&(!n.length||n.every(v,a.ingredients))},0,15);s=document.createElement("div");l=document.createElement("div");l.appendChild(document.createTextNode("Computing combinations.."));
s.appendChild(l);m=document.createElement("div");m.className="recipeFilter";s.appendChild(m);p=document.createElement("div");p.className="foodFilter";c.forEach(function(a){var b=T(a.img,32);b.dataset.id=a.id;b.addEventListener("click",y,!1);b.addEventListener("contextmenu",w,!1);b.title=a.name;p.appendChild(b)});s.appendChild(p);e=document.createElement("div");r=document.createElement("input");r.type="text";r.placeholder="use custom filter";r.className="customFilterInput";e.appendChild(r);s.appendChild(u);
b.parentNode.replaceChild(s,b);var O=function(){l.firstChild.textContent="Found "+q.length+" valid recipes.."},M=function(){u.setMaxRows(30);l.firstChild.textContent="Found "+q.length+" valid recipes. Showing top 30 for selected recipe using all selected ingredients. Right-click to exclude ingredients."},E=fa.length,I=[],ma=0,B,D=60,L=function(a){return c[a]},G,Z=c.length,H=[0,0,0,0],U,C=0,x=0;G=function(a){for(var b;a--&&1<Z;){b=H.map(L);var c=void 0,e=null,d={},f={};ua(b,d,f);for(c=0;c<E&&(null===
e||N[c].priority>=e);c++)fa[c](null,d,f)&&(I.push({recipe:N[c],ingredients:b,tags:{health:f.health,hunger:f.hunger}}),e=N[c].priority);H[0]++;for(b=0;H[b]>=Z;)b++,H[b]++;U=4;for(C=0;U--;)H[U]>=Z?H[U]=C:H[U]>C&&(C=H[U]);if(4===b)return!1;x++}return!0};var J=function(){var a=!1,b=Date.now();for(G(D)?setTimeout(J,0):a=!0;ma<I.length&&I[ma];ma++){var c=I[ma],e=void 0,d=void 0;if(-1===h.indexOf(c.recipe.name)){for(e=0;e<h.length&&!(c.recipe.name<h[e]);e++);h.splice(e,0,c.recipe.name);d=T(g.byName(h[e].toLowerCase()).img);
d.dataset.recipe=h[e];d.addEventListener("click",F,!1);d.title=c.recipe.name;e<m.childNodes.length?m.insertBefore(d,m.childNodes[e]):m.appendChild(d)}c.name||(c.name=c.recipe.name,c.health=c.recipe.health,c.ihealth=c.tags.health,c.healthpls=c.recipe.health-c.tags.health,c.hunger=c.recipe.hunger,c.ihunger=c.tags.hunger,c.hungerpls=c.recipe.hunger-c.tags.hunger,c.healthpct=Qa(c.tags.health,c.recipe.health),c.hungerpct=Qa(c.tags.hunger,c.recipe.hunger),c.sanity=c.recipe.sanity,c.perish=c.recipe.perish);
q.push(c)}B!==Date.now()-b&&(B=Date.now()-b+1,D=38/B*D+1|0);O&&O();a&&M&&M()};J()},!1);return b};document.getElementById("statistics").appendChild(Va());window.food=j;window.recipes=g;window.matchingNames=O;for(var aa=function(a,b){var c=!1;null!==b?a.dataset.id=b.id:a.nextSibling&&null!==I(a.nextSibling)?(aa(a,I(a.nextSibling)),aa(a.nextSibling,null),c=!0):a.dataset.id=null;c||(null!==b?a.firstChild?a.replaceChild(T(b.img),a.firstChild):a.appendChild(T(b.img)):a.firstChild&&a.removeChild(a.firstChild),
a.title=b?b.name:"")},I=function(a){return j[a.dataset.id]||g[a.dataset.id]||null},Wa=document.getElementsByClassName("ingredientpicker"),Ca=Wa.length;Ca--;)(function(){var a=document.createElement("span"),b,c=document.createElement("div"),e=document.createElement("ul"),d=Wa[Ca],f=Ca,h,m="recipes"===d.dataset.type?g:j,n=!d.dataset.cookable,l=d.nextSibling,r=l.getElementsByClassName("ingredient"),p,t=[],q,s=[],u=[],k=null,v=!1,y=document.getElementById("results"),w=document.getElementById("discoverfood"),
z=document.getElementById("discover"),B=document.getElementById("makable"),M=document.createElement("span"),D=function(a,b){for(var c=a;c.previousSibling;)if(c=c.previousSibling,b(c))return c;return null},F=function(a,c){for(var b=a;b.nextSibling;)if(b=b.nextSibling,c(b))return b;return null},E=!1,G=function(a){var b=j[a]||g[a]||null;if(p){for(a=0;a<r.length;a++)if(null===I(r[a]))return aa(r[a],b),v&&q(),a;return-1}-1===r.indexOf(a)&&(r.push(a),a=document.createElement("span"),a.className="ingredient",
aa(a,b),a.addEventListener("click",Z,!1),l.appendChild(a),v&&q());return 1},J=function(a){-1!==G(("IMG"===a.target.tagName?a.target.parentNode:a.target).dataset.id)&&a&&a.preventDefault&&a.preventDefault()},L=function(a){var b=T(a.img,32),c=document.createElement("span");c.appendChild(b);c.appendChild(document.createTextNode(a.name));c.dataset.id=a.id;-1!==t.indexOf(a)&&(c.style.opacity=0.5);c.addEventListener("mousedown",J,!1);this.appendChild(c);this.dataset.length++},N=function(a){-1!==t.indexOf(j[a.dataset.id])?
a.style.opacity||(a.style.opacity=0.5):a.style.opacity&&a.style.removeProperty("opacity")},Z=function(a){var b="IMG"===a.target.tagName?a.target.parentNode:a.target;if(p){if(null!==I(b))return aa(b,null),q(),b.dataset.id}else return a=r.indexOf(b.dataset.id),r.splice(a,1),l.removeChild(b),q(),r[a]||null},H=function(){var a;b.splitTag();a=O(m,b.getSearch(),n);c.removeChild(e);e=document.createElement("div");e.dataset.length=0;a.forEach(L,e);c.appendChild(e);k=null},U=function(a){a="IMG"===a.target.tagName?
a.target.parentNode.dataset.link:a.target.dataset.link;var b=O(m,a,n);1===b.length?G(b[0].id):(d.value=a,H())},C;"ingredients"===l.id?q=function(){var a,b,c,d;t=Array.prototype.map.call(r,function(a){return I(a)});a=Ia(t);b=a[0].health;c=a[0].hunger;d=X({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},a,function(a){return na(a,b,c)},"priority",!0,U);y.firstChild&&y.removeChild(y.firstChild);y.firstChild&&(y.removeChild(y.firstChild),
y.removeChild(y.firstChild));y.appendChild(d);null!==t[0]&&(va(s,t,a),0<s.length&&(y.appendChild(document.createTextNode("Add more ingredients to make:")),d=X({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},s,function(a){return na(a,b,c)},"priority",!1,U),y.appendChild(d)));e&&e.firstChild&&Array.prototype.forEach.call(e.getElementsByTagName("span"),N)}:"inventory"===l.id&&(q=function(){var a;t=Array.prototype.map.call(l.getElementsByClassName("ingredient"),
function(a){return I(a)});w.firstChild&&w.removeChild(w.firstChild);z.firstChild&&z.removeChild(z.firstChild);B.firstChild&&B.removeChild(B.firstChild);0<t.length&&(a=X({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish",Info:""},t,Sa,"name"),w.appendChild(a),va(u,t,null,!0),0<u.length&&(a=X({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},u,na,"name"),z.appendChild(a),B.appendChild(Va(t))));
e&&e.firstChild&&Array.prototype.forEach.call(e.getElementsByTagName("span"),N)});0!==r.length?(p=!0,Array.prototype.forEach.call(r,function(a){aa(a,null);a.addEventListener("click",Z,!1)})):(r=[],p=!1);window.localStorage&&localStorage.foodGuideState&&(h=JSON.parse(localStorage.foodGuideState).pickers)&&h[f]&&h[f].forEach(function(a){j[a]&&G(a)});v=!0;a.className="searchselector retracted";a.appendChild(document.createTextNode("name"));var x=document.createElement("div"),Q=!1,R=null,Y=[{title:"name",
prefix:"",placeholder:"Filter ingredients"},{title:"tag",prefix:"tag:",placeholder:"Meat, veggie, fruit, egg, monster..."},{title:"recipe",prefix:"recipe:",placeholder:"Find ingredients used in a recipe"}],K=Y[0],A=null,P=function(){Q=!1;x.style.height="0px";a.style.borderBottomLeftRadius="3px";x.style.borderTopLeftRadius="3px";null!==A&&(clearTimeout(A),A=null);a.className="searchselector retracted"},S=function(b){K=b;d.placeholder=K.placeholder;a.firstChild.textContent=K.title},V=function(a){S(Y[a.target.dataset.typeIndex]);
H();P()},W=/: */;a.addEventListener("click",function(){Q?P():(null===R&&(x.style.height="auto",x.style.left=a.offsetLeft,x.style.top=a.offsetTop+a.offsetHeight,R=x.offsetHeight+"px",x.style.height="0px"),Q=!0,x.style.height=R,a.style.borderBottomLeftRadius="0px",x.style.borderTopLeftRadius="0px",x.style.width="auto",x.style.width=Math.max(x.offsetWidth,a.offsetWidth+1)+"px",null!==A&&(clearTimeout(A),A=null),a.className="searchselector extended")},!1);a.addEventListener("selectstart",function(a){a.preventDefault()},
!1);a.addEventListener("mouseout",function(){null!==A&&clearTimeout(A);A=setTimeout(P,500)},!1);a.addEventListener("mouseover",function(){null!==A&&(clearTimeout(A),A=null)},!1);x.addEventListener("mouseout",function(){null!==A&&clearTimeout(A);A=setTimeout(P,500)},!1);x.addEventListener("mouseover",function(){null!==A&&(clearTimeout(A),A=null)},!1);Y.forEach(function(a,b){var c=document.createElement("div");c.appendChild(document.createTextNode(a.title));c.dataset.typeIndex=b;c.addEventListener("click",
V,!1);a.element=c;x.appendChild(c)});d.parentNode.insertBefore(a,d);x.className="searchdropdown";d.parentNode.insertBefore(x,d);b={getTag:function(){return K.title},setSearchType:function(a){S(Y[a])},getSearch:function(){return K.prefix+d.value},splitTag:function(){var a;a=d.value.split(W);var b,c;if(2===a.length){b=a[0].toLowerCase()+":";c=a[1];for(a=0;a<Y.length;a++)if(b===Y[a].prefix){S(Y[a]);d.value=c;break}}}};c.className="ingredientdropdown";c.appendChild(e);c.addEventListener("mousedown",function(a){a.preventDefault()},
!1);h=O(m,b.getSearch(),n);c.removeChild(e);e=document.createElement("div");e.dataset.length=0;h.forEach(L,e);c.appendChild(e);M.className="clearingredients";M.appendChild(document.createTextNode("clear"));M.addEventListener("click",function(){if(""===d.value&&"name"===b.getTag())for(;I(l.firstChild);)Z({target:l.firstChild});else d.value="",b.setSearchType(0),H()},!1);M.addEventListener("mouseover",function(){""===d.value&&"name"===b.getTag()&&(M.firstChild.textContent="clear chosen ingredients")},
!1);M.addEventListener("mouseout",function(){"clear"!==M.firstChild.textContent&&(M.firstChild.textContent="clear")},!1);l.parentNode.insertBefore(M,l);l.parentNode.insertBefore(c,l);d.addEventListener("keydown",function(a){var b;-1!==[16,17,37,38,39,40,13].indexOf(a.keyCode)&&(b=k,13===a.keyCode?(null===k&&(k=e.firstChild||null),null!==k&&J({target:k})):null===k?40===a.keyCode&&(k=e.childNodes[1]||e.firstChild||null,null!==k&&(C=k.offsetLeft+k.offsetWidth/2,a.preventDefault())):(a.preventDefault(),
37===a.keyCode?(k=k.previousSibling&&k.previousSibling.offsetTop===k.offsetTop?k.previousSibling:(a=F(k,function(a){return a.offsetTop!==k.offsetTop}))?a.previousSibling:e.lastChild,null!==k&&(C=k.offsetLeft+k.offsetWidth/2)):39===a.keyCode?(k=k.nextSibling&&k.nextSibling.offsetTop===k.offsetTop?k.nextSibling:(a=D(k,function(a){return a.offsetTop!==k.offsetTop}))?a.nextSibling:e.firstChild,null!==k&&(C=k.offsetLeft+k.offsetWidth/2)):38===a.keyCode?((a=D(k,function(a){return C>=a.offsetLeft-1&&C<=
a.offsetLeft+a.offsetWidth+1}))||(a=D(e.lastChild,function(a){return C>=a.offsetLeft-1&&C<=a.offsetLeft+a.offsetWidth+1})),k=a?a:e.firstChild):40===a.keyCode&&((a=F(k,function(a){return C>=a.offsetLeft-1&&C<=a.offsetLeft+a.offsetWidth+1}))||(a=F(e.firstChild,function(a){return C>=a.offsetLeft-1&&C<=a.offsetLeft+a.offsetWidth+1})),k=a?a:e.lastChild)),k!==b&&(null!==b&&(b.className=""),null!==k&&(k.className="selected")))},!1);d.addEventListener("keyup",function(a){-1===[16,17,37,38,39,40,13].indexOf(a.keyCode)?
H():null!==k&&a.preventDefault()},!1);d.addEventListener("focus",function(){E||(E=!0)},!1);d.addEventListener("blur",function(){E&&(E=!1)},!1);q();window.addEventListener("beforeunload",function(){var a,b;window.localStorage&&(localStorage.foodGuideState||(localStorage.foodGuideState="{}"),a=JSON.parse(localStorage.foodGuideState),a.pickers||(a.pickers=[]),p?(b=[],b=Array.prototype.map.call(r,function(a){return(a=I(a))?a.id:null}),a.pickers[f]=b):a.pickers[f]=r,localStorage.foodGuideState=JSON.stringify(a))})})()})();
(function(){var ba=30,q=16*ba,ba=q/16,S=3*q,j=6*q,k=10*q,s=15*q,z=20*q,ca=40*q,Ba=0.6666*ba,g={butter:{name:"Butter",fat:1,dairy:1,health:40,hunger:25,perish:ca,stack:40},butterflywings:{name:"Butterfly Wings",isveggie:!0,decoration:2,health:20,hunger:9.375,perish:j,stack:40},deerclopseyeball:{name:"Deerclops Eyeball",uncookable:!0,health:60,hunger:75,sanity:-15},bird_egg:{name:"Egg",egg:1,health:0,hunger:9.375,sanity:0,perish:k,stack:40,rot:"rottenegg"},bird_egg_cooked:{name:"Cooked Egg",egg:1,precook:1,
health:0,hunger:12.5,sanity:0,perish:j,stack:40},rottenegg:{name:"Rotten Egg",uncookable:!0,health:-1,hunger:-10,stack:40},fish:{name:"Fish",ismeat:!0,meat:0.5,fish:1,health:20,hunger:12.5,perish:S,stack:40},fish_cooked:{name:"Cooked Fish",ismeat:!0,meat:0.5,fish:1,precook:1,health:40,hunger:12.5,perish:j,stack:40},froglegs:{name:"Frog Legs",ismeat:!0,meat:0.5,health:1,hunger:12.5,perish:j,sanity:-10,stack:40},froglegs_cooked:{name:"Cooked Frog Legs",ismeat:!0,meat:0.5,precook:1,health:3,hunger:12.5,
perish:k,sanity:-10,stack:40},flowerhat:{name:"Garland",health:3,hunger:0,sanity:10,perish:j,stack:1,uncookable:!0},hambat:{name:"Ham Bat",health:-8,hunger:25,sanity:-15,perish:k,stack:1,uncookable:!0},honey:{name:"Honey",sweetener:!0,health:3,hunger:9.375,perish:ca,stack:40},honeycomb:{name:"Honeycomb",sweetener:!0},mandrake:{name:"Mandrake",veggie:1,magic:1,health:60,hunger:75,stack:40},mandrake_cooked:{name:"Cooked Mandrake",uncookable:!0,veggie:1,magic:1,precook:1,health:100,hunger:150,stack:40},
monstermeat:{name:"Monster Meat",ismeat:!0,meat:1,monster:!0,health:-20,hunger:18.75,sanity:-15,perish:j,stack:20,dry:"monstermeat_dried",drytime:q},monstermeat_cooked:{name:"Cooked Monster Meat",ismeat:!0,meat:1,monster:!0,precook:1,health:-3,hunger:18.75,sanity:-10,perish:s,stack:20},monstermeat_dried:{name:"Monster Jerky",ismeat:!0,meat:1,monster:!0,dried:1,health:-3,hunger:18.75,sanity:-5,perish:z,stack:20},meat:{name:"Meat",ismeat:!0,meat:1,health:1,hunger:25,sanity:-10,perish:j,stack:20,dry:"meat_dried",
drytime:2*q},meat_cooked:{name:"Cooked Meat",ismeat:!0,meat:1,precook:1,health:3,hunger:25,sanity:0,perish:k,stack:20},meat_dried:{name:"Jerky",ismeat:!0,meat:1,dried:1,health:20,hunger:25,sanity:15,perish:z,stack:20},morsel:{name:"Morsel",ismeat:!0,meat:0.5,health:0,hunger:12.5,sanity:-10,perish:j,stack:40,drytime:q,dry:"smallmeat_dried"},morsel_cooked:{name:"Cooked Morsel",ismeat:!0,meat:0.5,precook:1,health:1,hunger:12.5,sanity:0,perish:k,stack:40},smallmeat_dried:{name:"Small Jerky",ismeat:!0,
meat:0.5,dried:1,health:8,hunger:12.5,sanity:10,perish:z,stack:40},drumstick:{name:"Drumstick",ismeat:!0,meat:0.5,health:0,hunger:12.5,sanity:-10,perish:j,stack:20,drytime:q,dry:"smallmeat_dried"},drumstick_cooked:{name:"Fried Drumstick",ismeat:!0,meat:0.5,precook:1,health:1,hunger:12.5,perish:k,stack:20},red_mushroom:{name:"Red Mushroom",veggie:0.5,health:-20,hunger:12.5,sanity:0,perish:k,stack:40},green_mushroom:{name:"Green Mushroom",veggie:0.5,health:0,hunger:12.5,sanity:-50,perish:k,stack:40},
blue_mushroom:{name:"Blue Mushroom",veggie:0.5,health:20,hunger:12.5,sanity:-15,perish:k,stack:40},petals:{name:"Petals",uncookable:!0,health:1,hunger:0,sanity:-2.5,perish:j,stack:40},petals_evil:{name:"Evil Petals",uncookable:!0,health:0,hunger:0,sanity:-5,perish:j,stack:40},seeds:{name:"Seeds",uncookable:!0,health:0,hunger:4.6875,perish:ca,stack:40},seeds_cooked:{name:"Toasted Seeds",uncookable:!0,health:1,hunger:4.6875,perish:k,stack:40},spoiled_food:{name:"Rot",uncookable:!0,health:-1,hunger:-10,
stack:40},tallbirdegg:{name:"Tallbird Egg",egg:4,health:3,hunger:25},tallbirdegg_cooked:{name:"Fried Tallbird Egg",egg:4,precook:1,health:0,hunger:37.5,perish:j},trunk_summer:{name:"Koalefant Trunk",uncookable:!0,ismeat:!0,health:30,hunger:37.5,perish:j,stack:20},trunk_summer_cooked:{name:"Koalefant Trunk Steak",uncookable:!0,ismeat:!0,health:40,hunger:75,perish:s,stack:20},twigs:{name:"Twigs",inedible:1},carrot:{name:"Carrot",isveggie:!0,veggie:1,health:1,hunger:12.5,perish:k,sanity:0,stack:40},
carrot_cooked:{name:"Roasted Carrot",isveggie:!0,veggie:1,precook:1,health:3,hunger:12.5,perish:j,sanity:0,stack:40},corn:{name:"Corn",isveggie:!0,veggie:1,health:3,hunger:25,perish:k,sanity:0,stack:40},corn_cooked:{name:"Popcorn",isveggie:!0,veggie:1,precook:1,health:3,hunger:12.5,perish:s,sanity:0,stack:40},pumpkin:{name:"Pumpkin",isveggie:!0,veggie:1,health:3,hunger:37.5,perish:k,sanity:0,stack:20},pumpkin_cooked:{name:"Hot Pumpkin",isveggie:!0,veggie:1,precook:1,health:8,hunger:37.5,perish:j,
sanity:0,stack:20},eggplant:{name:"Eggplant",isveggie:!0,veggie:1,health:8,hunger:25,perish:k,sanity:0,stack:20},eggplant_cooked:{name:"Braised Eggplant",isveggie:!0,veggie:1,precook:1,health:20,hunger:25,perish:j,sanity:0,stack:20},durian:{name:"Durian",isfruit:!0,monster:1,fruit:1,health:-3,hunger:25,perish:k,sanity:-5,stack:20},durian_cooked:{name:"Extra Smelly Durian",isfruit:!0,monster:1,fruit:1,precook:1,health:0,hunger:25,perish:j,sanity:-5,stack:20},pomegranate:{name:"Pomegranate",isfruit:!0,
fruit:1,health:3,hunger:9.375,perish:j,sanity:0,stack:40},pomegranate_cooked:{name:"Sliced Pomegranate",isfruit:!0,fruit:1,precook:1,health:20,hunger:12.5,perish:S,sanity:0,stack:40},dragonfruit:{name:"Dragon Fruit",isfruit:!0,fruit:1,health:3,hunger:9.375,perish:j,sanity:0,stack:40},dragonfruit_cooked:{name:"Prepared Dragon Fruit",isfruit:!0,fruit:1,precook:1,health:20,hunger:12.5,perish:S,sanity:0,stack:40},berries:{name:"Berries",isfruit:!0,fruit:0.5,health:0,hunger:9.375,perish:j,sanity:0,stack:40},
berries_cooked:{name:"Roasted Berries",isfruit:!0,fruit:0.5,precook:1,health:1,hunger:12.5,perish:S,sanity:0,stack:40}},Ca=function(){return this.op+this.qty},Da={"=":function(a){return a===this.qty},">":function(a){return a>this.qty},"<":function(a){return a<this.qty},">=":function(a){return a>=this.qty},"<=":function(a){return a<=this.qty}},da={test:function(a){return!!a},toString:function(){return""}},n=function(a,b){return{op:a,qty:b,test:Da[a],toString:Ca}},Ea=function(a,b,c){return this.item1.test(a,
b,c)||this.item2.test(a,b,c)},Fa=function(){return this.item1+" or "+this.item2},la=function(a,b){return{item1:a,item2:b,test:Ea,toString:Fa,cancel:a.cancel||b.cancel}},Ga=function(a,b,c){return!this.item.test(a,b,c)},Ha=function(){return"not "+this.item},l=function(a){return{item:a,test:Ga,toString:Ha,cancel:!0}},Ia=function(a,b){return(b[this.name]||0)+(b[this.name+"_cooked"]||0)},Ja=function(){return"[*"+g[this.name].name+"|"+g[this.name].img+" "+g[this.name].name+"]"+(g[this.name].cook?"[*"+g[this.name].cook.name+
"|"+g[this.name].cook.img+"]":"")+(g[this.name].raw?"[*"+g[this.name].raw.name+"|"+g[this.name].raw.img+"]":"")+(this.qty?this.qty:"")},A=function(a,b){return{name:a,qty:b||da,test:Ia,toString:Ja}},Ka=function(a,b){return b[this.name]},La=function(){return"[*"+g[this.name].name+"|"+g[this.name].img+" "+g[this.name].name+"]"+(this.qty?this.qty:"")},w=function(a,b){return{name:a,qty:b||da,test:Ka,toString:La}},Ma=function(a,b,c){return c[this.tag]},Na=function(){return"[tag:"+this.tag+"|"+this.tag+
"]"+(this.qty?this.qty:"")},e=function(a,b){return{tag:a,qty:b||da,test:Ma,toString:Na}},h={butterflymuffin:{name:"Butter Muffin",test:function(a,b,c){return b.butterflywings&&!c.meat&&c.veggie},requires:"Butterfly Wings, veggie",requirements:[A("butterflywings"),l(e("meat")),e("veggie")],priority:1,weight:1,foodtype:"veggie",health:20,hunger:37.5,perish:s,sanity:5,cooktime:2},frogglebunwich:{name:"Froggle Bunwich",test:function(a,b,c){return(b.froglegs||b.froglegs_cooked)&&c.veggie},requirements:[A("froglegs"),
e("veggie")],priority:1,foodtype:"meat",health:20,hunger:37.5,perish:s,sanity:5,cooktime:2},taffy:{name:"Taffy",test:function(a,b,c){return c.sweetener&&3<=c.sweetener&&!c.meat},requirements:[e("sweetener",n(">=",3),l(e("meat")))],priority:10,foodtype:"veggie",health:-3,hunger:25,perish:s,sanity:15,cooktime:2},pumpkincookie:{name:"Pumpkin Cookie",test:function(a,b,c){return(b.pumpkin||b.pumpkin_cooked)&&c.sweetener&&2<=c.sweetener},requirements:[A("pumpkin"),e("sweetener",n(">=",2))],priority:10,
foodtype:"veggie",health:0,hunger:37.5,perish:k,sanity:15,cooktime:2},stuffedeggplant:{name:"Stuffed Eggplant",test:function(a,b,c){return(b.eggplant||b.eggplant_cooked)&&c.veggie&&1<c.veggie},requirements:[A("eggplant"),e("veggie",n(">",1))],priority:1,foodtype:"veggie",health:3,hunger:37.5,perish:s,sanity:5,cooktime:2},fishsticks:{name:"Fishsticks",test:function(a,b,c){return c.fish&&b.twigs&&c.inedible&&1>=c.inedible},requirements:[e("fish"),w("twigs"),e("inedible"),e("inedible",n("<=",1))],priority:10,
foodtype:"meat",health:40,hunger:37.5,perish:k,sanity:5,cooktime:2},honeynuggets:{name:"Honey Nuggets",test:function(a,b,c){return b.honey&&c.meat&&1.5>=c.meat&&!c.inedible},requirements:[w("honey"),e("meat",n("<=",1.5)),l(e("inedible"))],priority:2,foodtype:"meat",health:20,hunger:37.5,perish:s,sanity:5,cooktime:2},honeyham:{name:"Honey Ham",test:function(a,b,c){return b.honey&&c.meat&&1.5<c.meat&&!c.inedible},requirements:[w("honey"),e("meat",n(">",1.5)),l(e("inedible"))],priority:2,foodtype:"meat",
health:30,hunger:75,perish:s,sanity:5,cooktime:2},dragonpie:{name:"Dragonpie",test:function(a,b,c){return(b.dragonfruit||b.dragonfruit_cooked)&&!c.meat},requirements:[A("dragonfruit"),l(e("meat"))],priority:1,foodtype:"veggie",health:40,hunger:75,perish:s,sanity:5,cooktime:2},kabobs:{name:"Kabobs",test:function(a,b,c){return c.meat&&b.twigs&&(!c.monster||1>=c.monster)&&c.inedible&&1>=c.inedible},requirements:[e("meat"),w("twigs"),la(l(e("monster")),e("monster",n("<=",1))),e("inedible"),e("inedible",
n("<=",1))],priority:5,foodtype:"meat",health:3,hunger:37.5,perish:s,sanity:5,cooktime:2},mandrakesoup:{name:"Mandrake Soup",test:function(a,b){return b.mandrake},requirements:[w("mandrake")],priority:10,foodtype:"veggie",health:100,hunger:150,perish:j,sanity:5,cooktime:3},baconeggs:{name:"Bacon and Eggs",test:function(a,b,c){return c.egg&&1<c.egg&&c.meat&&1<c.meat&&!c.veggie},requirements:[e("egg",n(">",1)),e("meat",n(">",1)),l(e("veggie"))],priority:10,foodtype:"meat",health:20,hunger:75,perish:z,
sanity:5,cooktime:2},meatballs:{name:"Meatballs",test:function(a,b,c){return c.meat&&!c.inedible},requirements:[e("meat"),l(e("inedible"))],priority:-1,foodtype:"meat",health:3,hunger:62.5,perish:k,sanity:5,cooktime:0.75},bonestew:{name:"Meaty Stew",test:function(a,b,c){return c.meat&&3<=c.meat&&!c.inedible},requirements:[e("meat",n(">=",3)),l(e("inedible"))],priority:0,foodtype:"meat",health:12,hunger:150,perish:k,sanity:5,cooktime:0.75},perogies:{name:"Pierogi",test:function(a,b,c){return c.egg&&
c.meat&&c.veggie&&!c.inedible},requirements:[e("egg"),e("meat"),e("veggie"),l(e("inedible"))],priority:5,foodtype:"meat",health:40,hunger:37.5,perish:z,sanity:5,cooktime:1},turkeydinner:{name:"Turkey Dinner",test:function(a,b,c){return b.drumstick&&1<b.drumstick&&c.meat&&1<c.meat&&(c.veggie||c.fruit)},requirements:[w("drumstick",n(">",1)),e("meat",n(">",1)),la(e("veggie"),e("fruit"))],priority:10,foodtype:"meat",health:20,hunger:75,perish:j,sanity:5,cooktime:3},ratatouille:{name:"Ratatouille",test:function(a,
b,c){return!c.meat&&c.veggie&&!c.inedible},requirements:[l(e("meat")),e("veggie"),l(e("inedible"))],priority:0,foodtype:"veggie",health:3,hunger:25,perish:s,sanity:5,cooktime:1},jammypreserves:{name:"Fist Full of Jam",test:function(a,b,c){return c.fruit&&!c.meat&&!c.veggie&&!c.inedible},requirements:[e("fruit"),l(e("meat")),l(e("veggie")),l(e("inedible"))],priority:0,foodtype:"veggie",health:3,hunger:37.5,perish:s,sanity:5,cooktime:0.5},fruitmedley:{name:"Fruit Medley",test:function(a,b,c){return c.fruit&&
3<=c.fruit&&!c.meat&&!c.veggie},requirements:[e("fruit",n(">=",3)),l(e("meat")),l(e("veggie"))],priority:0,foodtype:"veggie",health:20,hunger:25,perish:j,sanity:5,cooktime:0.5},fishtacos:{name:"Fish Tacos",test:function(a,b,c){return c.fish&&(b.corn||b.corn_cooked)},requirements:[e("fish"),A("corn")],priority:10,foodtype:"meat",health:20,hunger:37.5,perish:j,sanity:5,cooktime:0.5},waffles:{name:"Waffles",test:function(a,b,c){return b.butter&&(b.berries||b.berries_cooked)&&c.egg},requirements:[w("butter"),
A("berries"),e("egg")],priority:10,foodtype:"veggie",health:60,hunger:37.5,perish:j,sanity:5,cooktime:0.5},monsterlasagna:{name:"Monster Lasagna",test:function(a,b,c){return c.monster&&2<=c.monster&&!c.inedible},requirements:[e("monster",n(">=",2)),l(e("inedible"))],priority:10,foodtype:"meat",health:-20,hunger:37.5,perish:j,sanity:-20,cooktime:0.5},wetgoop:{name:"Wet Goop",test:function(){return!0},requirements:[],priority:-2,health:0,hunger:0,perish:j,sanity:0,cooktime:0.25}},ma=[],D,m,na,Oa=/^tag[: ]/,
Pa=/^tag:? */,G,Qa=/^recipe[: ]/,Ra=/^recipe:? */,ea,Sa=/^ingredient[: ]/,Ta=/^ingredient:? */,oa,pa,Ua=function(a){a.match=a.uncookable?0:0===a.lowerName.indexOf(m)||a.raw&&0===a.raw.lowerName.indexOf(m)?3:0===pa.test(a.lowerName)?2:oa.test(a.lowerName)?1:0;return a.match},Va=function(a){return a.match=a[na]+0||0},Wa=function(a){for(var b=0,c,r=!0;b<G.length;){c=G[b].test(null,a.nameObject,a);if(G[b].cancel){if(!c){r=!0;break}}else c&&(r=!1);b++}return a.match=r?0:1},Xa=function(a){for(var b=0,c,
r=!0;b<a.requirements.length;){c=a.requirements[b].test(null,ea.nameObject,ea);if(a.requirements[b].cancel){if(!c){r=!0;break}}else c&&(r=!1);b++}return a.match=r?0:1},Ya=function(a){return a.match=a.lowerName===m?1:0},Za=function(a){return a.match=a.lowerName===m||a.raw&&a.raw.lowerName===m||a.cook&&a.cook.lowerName===m?1:0},H=function(a,b){var c,r;return a.match===b.match?(c=a.raw?a.raw.name:a.name,r=b.raw?b.raw.name:b.name,c!==r?c>r?1:c<r?-1:0:a.name===b.name?0:a.raw===b?1:-1):b.match-a.match};
D=function(a,b){m=b.toLowerCase();if(Oa.test(m))return na=m.split(Pa)[1],a.filter(Va).sort(H);if(Qa.test(m))return(G=h.byName(m.split(Ra)[1].toLowerCase()))?(G=G.requirements,a.filter(Wa).sort(H)):[];if(Sa.test(m))return(ea=g.byName(m.split(Ta)[1].toLowerCase()))?a.filter(Xa).sort(H):[];if(0===m.indexOf("*"))return m=m.substring(1),a.filter(Ya).sort(H);if(0===m.indexOf("~"))return m=m.substring(1),a.filter(Za).sort(H);pa=RegExp("\\b"+m+".*");oa=RegExp("\\b"+m.split("").join(".*")+".*");return a.filter(Ua).sort(H)};
var fa,T,v;fa=function(a,b,c,r){var d,e;a.length=0;var f;T={};v={};for(d=0;d<b.length;d++)if(f=b[d],null!==f)for(e in T[f.id]=1+(T[f.id]||0),f)f.hasOwnProperty(e)&&"perish"!==e?v[e]=f[e]+(v[e]||0):"perish"===e&&(v[e]=Math.min(v[e]||z,f[e]));for(b=0;b<h.length;b++){e=!1;for(d=0;d<h[b].requirements.length;d++)if(h[b].requirements[d].test(null,T,v))h[b].requirements[d].cancel||(e=!0);else if(!r&&h[b].requirements[d].cancel){e=!1;break}else if(r&&!h[b].requirements[d].cancel){e=!1;break}e&&(!c||-1===
c.indexOf(h[b]))&&a.push(h[b])}v.img="";v.name="Combined";return a};var qa,O=[],U,u;qa=function(a){O.length=0;var b,c,d;U={};u={};for(b=0;b<a.length;b++)if(d=a[b],null!==d)for(c in U[d.id]=1+(U[d.id]||0),d)d.hasOwnProperty(c)&&"perish"!==c?u[c]=d[c]+(u[c]||0):"perish"===c&&(u[c]=Math.min(u[c]||z,d[c]));for(a=0;a<h.length;a++)h[a].test(null,U,u)&&O.push(h[a]);O.sort(function(a,b){return b.priority-a.priority});u.img="";u.name="Combined";O.unshift(u);return O};var I=document.createElement("canvas"),
ga=I.getContext&&I.toDataURL&&I.getContext("2d"),P=document.createElement("canvas"),ra=P.getContext&&P.getContext("2d"),J={},ha={},sa=!!ga,V=[],$a=function(a){return function(b){b=b.target;ga.clearRect(0,0,64,64);ga.drawImage(b,0,0,64,64);ra.clearRect(0,0,32,32);ra.drawImage(b,0,0,32,32);try{J[a]=I.toDataURL(),ha[a]=P.toDataURL()}catch(c){sa=!1}V.filter(function(b){return b.url===a}).forEach(function(b){b.url===a&&(delete b.img.dataset.pending,W&&b.img.removeAttribute("data-pending"),b.img.src=32===
b.d?ha[a]||a:J[a]||a)});V=V.filter(function(b){return b.url!==a})}},ta=function(a,b,c){a.dataset.pending=b;W&&a.setAttribute("data-pending",b);V.push({url:b,img:a,d:c})},F=function(a,b){var c=new Image,d;sa?J[a]?c.src=32===b?ha[a]:J[a]:(null!==J[a]&&(J[a]=null,d=new Image,d.addEventListener("load",$a(a),!1),d.src=a),ta(c,a,b)):c.src=a;return c};I.width=64;I.height=64;P.width=32;P.height=32;F.queue=ta;var ia,ab=/\[([^\|]*)\|([^\|]*)\]/;ia=function(a){var b=a&&a.split(ab),c,d;if(!b||1===b.length)return a;
a=document.createDocumentFragment();a.appendChild(document.createTextNode(b[0]));for(c=1;c<b.length;c+=3)""===b[c]&&""===b[c+1]?a.appendChild(document.createElement("br")):(d=document.createElement("span"),d.className="link",d.dataset.link=b[c],W&&d.setAttribute("data-link",b[c]),b[c+1]&&0===b[c+1].indexOf("img/")?(d.appendChild(document.createTextNode(b[c+1].split(" ").slice(1).join(" "))),d.appendChild(F(b[c+1].split(" ")[0],32))):d.appendChild(document.createTextNode(b[c+1]?b[c+1]:b[c])),a.appendChild(d)),
a.appendChild(document.createTextNode(b[c+2]));return a};var f,K=0,X=document.getElementById("main"),bb=document.getElementById("food"),cb=document.getElementById("recipes"),db=document.getElementById("navbar"),W=!1;document.documentElement.dataset||(W=!0,Object.defineProperty(Element.prototype,"dataset",{get:function(){this.ds||(this.ds={},Array.prototype.forEach.call(this.attributes,function(a){0===a.name.indexOf("data-")&&(this.ds[a.name.substring(5)]=a.value)},this));return this.ds}}));document.getElementById("spoiledsanity").appendChild(document.createTextNode(10));
var p,t=function(a,b){return"[tag:"+a+"|"+(b||a)+"]"};for(f in g)if(g.hasOwnProperty(f)){var d=g[f];d.match=0;d.lowerName=d.name.toLowerCase();d.id=f;d.nameObject={};d.nameObject[f]=1;d.img="img/"+d.name.replace(/ /g,"_").toLowerCase()+".png";-1!==f.indexOf("_cooked")&&(d.cooked=!0);g[f+"_cooked"]&&(d.cook=g[f+"_cooked"],g[f+"_cooked"].raw=d);d.info=[];p=d.info;d.fruit&&p.push(t("fruit")+(1===d.fruit?"":"\u00d7"+d.fruit));d.veggie&&p.push(t("veggie","vegetable")+(1===d.veggie?"":"\u00d7"+d.veggie));
d.meat&&p.push(t("meat")+(1===d.meat?"":"\u00d7"+d.meat));d.egg&&p.push(t("egg")+(1===d.egg?"":"\u00d7"+d.egg));d.fish&&p.push(t("fish"));d.magic&&p.push(t("magic"));d.decoration&&p.push(t("decoration"));d.inedible&&p.push(t("inedible"));d.monster&&p.push(t("monster","monster food"));d.sweetener&&p.push(t("sweetener"));d.fat&&p.push(t("fat"));d.dairy&&p.push(t("dairy"));g[K++]=d}g.length=K;K=0;for(f in h)h.hasOwnProperty(f)&&(h[f].match=0,h[f].name=h[f].name||f,h[f].id=f,h[f].lowerName=h[f].name.toLowerCase(),
h[f].weight=h[f].weight||1,h[f].priority=h[f].priority||0,h[f].img="img/"+h[f].name.replace(/ /g,"_").toLowerCase()+".png",h[f].requirements&&(h[f].requires=ia(h[f].requirements.join("; "))),h[K++]=h[f],ma[K]=h[f].test.toString());JSON.stringify(ma);h.length=K;h.forEach=Array.prototype.forEach;h.filter=Array.prototype.filter;h.sort=Array.prototype.sort;h.byName=function(a){for(var b=this.length;b--;)if(this[b].lowerName===a)return this[b]};var eb=function(a,b){return a+"[recipe:"+b.name+"|"+b.img+
"]"};for(f in g)g.hasOwnProperty(f)&&(isNaN(f)&&isNaN(g[f]))&&(d=g[f],p=d.info,d.cooked&&p.push("from [*"+d.raw.name+"|"+d.raw.img+"]"),d.cook&&p.push("cook: [*"+d.cook.name+"|"+d.cook.img+"]"),d.dry&&(d.dry instanceof Object||(d.dry=g[d.dry]),p.push("dry: [*"+d.dry.name+"|"+d.dry.img+"]")),d.info=p.join("; "),d.uncookable?d.info+="[|]cannot be added to crock pot":(d.recipes=[],h.forEach(function(a){for(var b=!1,c=a.requirements,e=c.length;e--;)if(c[e].test(null,d.nameObject,d))!c[e].cancel&&!b&&
(b=!0);else if(c[e].cancel){b=!1;break}b&&d.recipes.push(a)}),0<d.recipes.length&&(d.ingredient=!0,d.info+=d.recipes.reduce(eb,"[|][ingredient:"+d.name+"|Recipes] "))),d.info=ia(d.info));g.forEach=Array.prototype.forEach;g.filter=Array.prototype.filter;g.sort=Array.prototype.forEach;g.byName=function(a){for(var b=this.length;b--;)if(this[b].lowerName===a)return this[b]};var Y,ua=db.getElementsByTagName("li"),Q={},R={},x,L,B,fb=function(a){Y(a.target.dataset.tab)},y;Y=function(a){B.className="";B=
Q[a];L.style.display="none";L=R[a];B.className="selected";L.style.display="block"};for(f=0;f<ua.length;f++)y=ua[f],y.dataset.tab&&(Q[y.dataset.tab]=y,R[y.dataset.tab]=document.getElementById(y.dataset.tab),R[y.dataset.tab].style.display="none",y.addEventListener("click",fb,!1));B=Q.simulator;L=R.simulator;window.localStorage&&localStorage.foodGuideState&&("["===localStorage.foodGuideState[0]?(x={},x.pickers=JSON.parse(localStorage.foodGuideState),localStorage.foodGuideState=JSON.stringify(x)):x=JSON.parse(localStorage.foodGuideState),
x.activeTab&&Q[x.activeTab]&&(B=Q[x.activeTab],L=R[x.activeTab]));B.className="selected";L.style.display="block";window.addEventListener("beforeunload",function(){var a;window.localStorage&&(localStorage.foodGuideState||(localStorage.foodGuideState="{}"),a=JSON.parse(localStorage.foodGuideState),a.activeTab=B.dataset.tab,localStorage.foodGuideState=JSON.stringify(a))});var gb=function(a){a.dataset.pending&&F.queue(a,a.dataset.pending,32)},va=function(a){var b,c,d,e=document.createElement("tr"),f;
for(b=1;b<arguments.length;b++)c=document.createElement(a),f=(d=arguments[b])&&d.indexOf?d:d.toString(),d instanceof DocumentFragment?(c.appendChild(d.cloneNode(!0)),Array.prototype.forEach.call(c.getElementsByTagName("img"),gb)):0===f.indexOf("img/")?(d=F(f),c.appendChild(d)):c.appendChild(document.createTextNode(f)),e.appendChild(c);return e},M=function(a,b,c,d,e,f,h){var g,j,m,k=!1,l,p,n=function(a){var b=c(a);h&&h(a)&&(b.className="highlighted",l||(l=b),p=b);g.appendChild(b)},q=function(c,d,h){var r,
s;if(d||c&&""!==c.target.dataset.sort)r=d||c.target.dataset.sort,e&&(s=b.shift()),"name"===r?b.sort(function(a,b){var c=a.raw?a.raw.name:a.name,d=b.raw?b.raw.name:b.name;return c!==d?c>d?1:c<d?-1:0:a.name===b.name?0:a.raw===b?1:-1}):b.sort(function(a,b){var c=a[r],d=b[r];return!isNaN(c)&&!isNaN(d)?d-c:isNaN(c)&&isNaN(d)?0:isNaN(c)?1:-1}),m===r?k=!k:(m=r,k=!1),k&&b.reverse(),e&&b.unshift(s);c=document.createElement("tr");for(j in a)d=document.createElement("th"),d.appendChild(document.createTextNode(j)),
a[j]&&(a[j]===m&&(d.style.background=k?"#555":"#ccc",d.style.color=k?"#ccc":"#555",d.style.borderRadius="4px"),d.style.cursor="pointer",d.dataset.sort=a[j],d.addEventListener("click",q,!1)),c.appendChild(d);d=g;g=document.createElement("table");g.appendChild(c);p=l=null;b.forEach(n);f&&(g.className="links",Array.prototype.forEach.call(g.getElementsByClassName("link"),function(a){a.addEventListener("click",f,!1)}));d&&d.parentNode.replaceChild(g,d);h&&(l&&l.offsetTop+g.offsetTop+X.offsetTop+l.offsetHeight>
window.scrollY+window.innerHeight?l.scrollIntoView(!0):p&&p.offsetTop+g.offsetTop+X.offsetTop<window.scrollY&&p.scrollIntoView(!1))};d?q(null,d):q();g.update=function(a){q(null,null,a)};return g},C=function(a){return isNaN(a)?"":0<a?"+"+a:a},wa=function(a,b){return!isNaN(a)&&a!==b?" ("+C((100*(a<b?(b-a)/a:a>b?-(a-b)/a:0)).toFixed(0))+"%)":""},xa=function(a){return va("td",a.img?a.img:"",a.name,C(a.health),C(a.hunger),isNaN(a.sanity)?"":C(a.sanity),isNaN(a.perish)?"Never":a.perish/q+" days",a.info||
"")},Z=function(a,b,c){return va("td",a.img?a.img:"",a.name,C(a.health)+wa(b,a.health),C(a.hunger)+wa(c,a.hunger),isNaN(a.sanity)?"":C(a.sanity),isNaN(a.perish)?"Never":a.perish/q+" days",(a.cooktime*Ba+0.5|0)+" secs",a.priority||"0",a.requires||"")},$,aa=[],ya=[],ja=M({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish",Info:""},Array.prototype.slice.call(g),xa,"name",!1,function(a){a=!a.target?a:"IMG"===a.target.tagName?a.target.parentNode.dataset.link:a.target.dataset.link;
"recipe:"===a.substring(0,7)||"ingredient:"===a.substring(0,11)?(Y("crockpot"),"recipe:"===a.substring(0,7)&&(a="*"+a.substring(7)),ya=D(h,a),za.update(!0)):($!==a?($=a,aa=D(g,a)):($="",aa.length=0),ja.update(!0))},function(a){return-1!==aa.indexOf(a)}),za=M({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},Array.prototype.slice.call(h),Z,"name",!1,function(a){a=!a.target?a:"IMG"===a.target.tagName?a.target.parentNode.dataset.link:
a.target.dataset.link;Y("foodlist");$=a;aa=D(g,a);ja.update(!0)},function(a){return-1!==ya.indexOf(a)});bb.appendChild(ja);cb.appendChild(za);window.food=g;window.recipes=h;window.matchingNames=D;for(var N=function(a,b){var c=!1;null!==b?a.dataset.id=b.id:a.nextSibling&&null!==E(a.nextSibling)?(N(a,E(a.nextSibling)),N(a.nextSibling,null),c=!0):a.dataset.id=null;c||(null!==b?a.firstChild?a.replaceChild(F(b.img),a.firstChild):a.appendChild(F(b.img)):a.firstChild&&a.removeChild(a.firstChild),a.title=
b?b.name:"")},E=function(a){return g[a.dataset.id]||h[a.dataset.id]||null},Aa=document.getElementsByClassName("ingredientpicker"),ka=Aa.length;ka--;)(function(){var a=document.createElement("div"),b=document.createElement("ul"),c=Aa[ka],d=ka,e,f="recipes"===c.dataset.type?h:g,j=c.nextSibling,k=j.getElementsByClassName("ingredient"),l,m,p=[],q=[],n=document.getElementById("results"),s=document.getElementById("discoverfood"),t=document.getElementById("discover"),u=document.createElement("span"),v=!1,
x=function(a){var b=g[a]||h[a]||null;if(l){for(a=0;a<k.length;a++)if(null===E(k[a]))return N(k[a],b),m(),a;return-1}-1===k.indexOf(a)&&(k.push(a),a=document.createElement("span"),a.className="ingredient",N(a,b),a.addEventListener("click",A,!1),j.appendChild(a),m());return 1},y=function(d){var e,g=x(("IMG"===d.target.tagName?d.target.parentNode:d.target).dataset.id);-1!==g&&(a.removeChild(b),b=document.createElement("ul"),e=D(f,""),e.forEach(z,b),a.appendChild(b),b.firstChild&&(b.firstChild.className=
"selected"),c.value="",g<k.length-1||!l?c.focus():c.blur(),d&&d.preventDefault&&d.preventDefault(),w())},z=function(a){var b=F(a.img,32),c=document.createElement("li");c.appendChild(b);c.appendChild(document.createTextNode(a.name));c.dataset.id=a.id;c.addEventListener("mousedown",y,!1);this.appendChild(c)},A=function(a){var b="IMG"===a.target.tagName?a.target.parentNode:a.target;if(l){if(null!==E(b))return N(b,null),m(),b.dataset.id;c.focus()}else return a=k.indexOf(b.dataset.id),k.splice(a,1),j.removeChild(b),
m(),k[a]||null},w=function(){0<X.offsetLeft-a.offsetWidth?(a.style.left=-a.offsetWidth+"px",a.style.top=c.offsetTop+"px"):X.offsetLeft+c.offsetLeft+c.offsetWidth+a.offsetWidth>window.innerWidth?(a.style.left=c.offsetLeft+"px",a.style.top=c.offsetTop+c.offsetHeight+"px"):(a.style.left=c.offsetLeft+c.offsetWidth+"px",a.style.top=c.offsetTop+"px")},B=function(){document.createElement("li");var d=D(f,c.value);a.removeChild(b);b=document.createElement("ul");d.forEach(z,b);b.firstChild&&(b.firstChild.className=
"selected");a.appendChild(b);w()},C=function(a){a="IMG"===a.target.tagName?a.target.parentNode.dataset.link:a.target.dataset.link;var b=D(f,a);1===b.length?x(b[0].id):(c.value=a,B(),c.focus())};"ingredients"===j.id?m=function(){var a,b,c,d,e;a=Array.prototype.map.call(k,function(a){return E(a)});b=qa(a);c=b[0].health;d=b[0].hunger;e=M({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},b,function(a){return Z(a,
c,d)},"priority",!0,C);n.firstChild&&n.removeChild(n.firstChild);n.firstChild&&(n.removeChild(n.firstChild),n.removeChild(n.firstChild));n.appendChild(e);null!==a[0]&&(fa(p,a,b),0<p.length&&(n.appendChild(document.createTextNode("Add more ingredients to make:")),e=M({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},p,function(a){return Z(a,c,d)},"priority",!1,C),n.appendChild(e)))}:"inventory"===j.id&&(m=function(){var a,
b;a=Array.prototype.map.call(j.getElementsByClassName("ingredient"),function(a){return E(a)});s.firstChild&&s.removeChild(s.firstChild);t.firstChild&&t.removeChild(t.firstChild);0<a.length&&(b=M({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish",Info:""},a,xa,"name"),s.appendChild(b),fa(q,a,null,!0),0<q.length&&(a=M({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity",Perish:"perish","Cook Time":"cooktime",Priority:"priority",Requires:""},q,Z,"name"),
t.appendChild(a)))});0!==k.length?(l=!0,Array.prototype.forEach.call(k,function(a){N(a,null);a.addEventListener("click",A,!1)})):(k=[],l=!1);window.localStorage&&localStorage.foodGuideState&&(e=JSON.parse(localStorage.foodGuideState).pickers)&&e[d]&&e[d].forEach(function(a){g[a]&&x(a)});a.className="ingredientdropdown";a.appendChild(b);a.addEventListener("mousedown",function(a){a.preventDefault()},!1);document.createElement("li");e=D(f,c.value);a.removeChild(b);b=document.createElement("ul");e.forEach(z,
b);a.appendChild(b);b.firstChild&&(b.firstChild.className="selected");u.className="clearingredients";u.appendChild(document.createTextNode("clear"));u.addEventListener("click",function(){if(""===c.value)for(;E(j.firstChild);)A({target:j.firstChild});else c.value="",B()},!1);j.parentNode.insertBefore(u,j);c.addEventListener("keydown",function(){},!1);c.addEventListener("keyup",function(a){var c,d,e;if(-1===[16,17,37,38,39,40,13].indexOf(a.keyCode))B();else{d=b.getElementsByTagName("li");for(e=0;e<
d.length;e++)if("selected"===d[e].className){c=d[e];if(38===a.keyCode||40===a.keyCode)d[e].className="";38===a.keyCode?d[0>e-1?d.length-1:e-1].className="selected":40===a.keyCode?d[(e+1)%d.length].className="selected":13===a.keyCode&&c&&(y({target:c}),w());break}!c&&0<d.length&&(38===a.keyCode?d[d.length-1].className="selected":40===a.keyCode?d[0].className="selected":13===a.keyCode&&y({target:d[0]}))}},!1);c.addEventListener("focus",function(){v||(v=!0,j.appendChild(a),w())},!1);c.addEventListener("blur",
function(){v&&(v=!1,j.removeChild(a))},!1);m();window.addEventListener("beforeunload",function(){var a,b;window.localStorage&&(localStorage.foodGuideState||(localStorage.foodGuideState="{}"),a=JSON.parse(localStorage.foodGuideState),a.pickers||(a.pickers=[]),l?(b=[],b=Array.prototype.map.call(k,function(a){return(a=E(a))?a.id:null}),a.pickers[d]=b):a.pickers[d]=k,localStorage.foodGuideState=JSON.stringify(a))})})()})();
(function(){var D,K,t=480,u=3*t,h=6*t,l=10*t,r=15*t,F=20*t,G=40*t,v=2*t,fa=t/16*0.6666,e={butter:{name:"Butter",fat:1,dairy:1,health:40,hunger:25,perish:G,stack:40},butterflywings:{name:"Butterfly Wings",isveggie:!0,decoration:2,health:8,hunger:9.375,perish:h,stack:40},deerclopseyeball:{name:"Deerclops Eyeball",uncookable:!0,health:60,hunger:75,sanity:-15},bird_egg:{name:"Egg",egg:1,health:0,hunger:9.375,sanity:0,perish:l,stack:40,rot:"rottenegg"},bird_egg_cooked:{name:"Cooked Egg",egg:1,precook:1,
health:0,hunger:12.5,sanity:0,perish:h,stack:40},rottenegg:{name:"Rotten Egg",uncookable:!0,health:-1,hunger:-10,stack:40},cutlichen:{name:"Lichen",isveggie:!0,veggie:1,health:3,hunger:12.5,sanity:-5,perish:2*t},eel:{name:"Eel",ismeat:!0,meat:0.5,fish:1,health:3,hunger:9.375,perish:u,stack:40,dry:"smallmeat_dried",drytime:t},eel_cooked:{name:"Cooked Eel",ismeat:!0,health:8,hunger:12.5,perish:h,stack:40},fish:{name:"Fish",ismeat:!0,meat:0.5,fish:1,health:1,hunger:12.5,perish:u,stack:40},fish_cooked:{name:"Cooked Fish",
ismeat:!0,meat:0.5,fish:1,precook:1,health:1,hunger:12.5,perish:h,stack:40},froglegs:{name:"Frog Legs",ismeat:!0,meat:0.5,health:0,hunger:12.5,perish:h,sanity:-10,stack:40},froglegs_cooked:{name:"Cooked Frog Legs",ismeat:!0,meat:0.5,precook:1,health:1,hunger:12.5,perish:l,sanity:0,stack:40},foliage:{name:"Foliage",uncookable:!0,health:1,hunger:0,perish:h,stack:40},honey:{name:"Honey",sweetener:!0,health:3,hunger:9.375,perish:G,stack:40},honeycomb:{name:"Honeycomb",sweetener:!0},lightbulb:{name:"Light Bulb",
health:1,hunger:0,perish:h,stack:40,uncookable:!0},mandrake:{name:"Mandrake",veggie:1,magic:1,health:60,hunger:75,stack:40},mandrake_cooked:{name:"Cooked Mandrake",uncookable:!0,veggie:1,magic:1,precook:1,health:100,hunger:150,stack:40},plantmeat:{name:"Leafy Meat",uncookable:!0,health:0,hunger:12.5,sanity:-10,perish:h,stack:40},plantmeat_cooked:{name:"Cooked Leafy Meat",uncookable:!0,health:1,hunger:18.75,sanity:0,perish:l,stack:40},monstermeat:{name:"Monster Meat",ismeat:!0,meat:1,monster:!0,health:-20,
hunger:18.75,sanity:-15,perish:h,stack:20,dry:"monstermeat_dried",drytime:t},monstermeat_cooked:{name:"Cooked Monster Meat",ismeat:!0,meat:1,monster:!0,precook:1,health:-3,hunger:18.75,sanity:-10,perish:r,stack:20},monstermeat_dried:{name:"Monster Jerky",ismeat:!0,meat:1,monster:!0,dried:1,health:-3,hunger:18.75,sanity:-5,perish:F,stack:20},meat:{name:"Meat",ismeat:!0,meat:1,health:1,hunger:25,sanity:-10,perish:h,stack:20,dry:"meat_dried",drytime:v},meat_cooked:{name:"Cooked Meat",ismeat:!0,meat:1,
precook:1,health:3,hunger:25,sanity:0,perish:l,stack:20},meat_dried:{name:"Jerky",ismeat:!0,meat:1,dried:1,health:20,hunger:25,sanity:15,perish:F,stack:20},morsel:{name:"Morsel",ismeat:!0,meat:0.5,health:0,hunger:12.5,sanity:-10,perish:h,stack:40,drytime:t,dry:"smallmeat_dried"},morsel_cooked:{name:"Cooked Morsel",ismeat:!0,meat:0.5,precook:1,health:1,hunger:12.5,sanity:0,perish:l,stack:40},smallmeat_dried:{name:"Small Jerky",ismeat:!0,meat:0.5,dried:1,health:8,hunger:12.5,sanity:10,perish:F,stack:40},
drumstick:{name:"Drumstick",ismeat:!0,ideal:!0,meat:0.5,health:0,hunger:12.5,sanity:-10,perish:h,stack:20,drytime:t,dry:"smallmeat_dried"},drumstick_cooked:{name:"Fried Drumstick",ismeat:!0,meat:0.5,precook:1,health:1,hunger:12.5,perish:l,stack:20},batwing:{name:"Batilisk Wing",ismeat:!0,health:3,hunger:12.5,sanity:-10,perish:h,stack:40,drytime:v,dry:"smallmeat_dried",uncookable:!0},batwing_cooked:{name:"Cooked Batilisk Wing",ismeat:!0,health:8,hunger:18.75,sanity:0,perish:l,uncookable:!0},minotaurhorn:{name:"Guardian's Horn",
uncookable:!0,ismeat:!0,health:60,hunger:75,sanity:-15},red_mushroom:{name:"Red Cap",veggie:0.5,ideal:!0,health:-20,hunger:12.5,sanity:0,perish:l,stack:40},red_mushroom_cooked:{name:"Cooked Red Cap",veggie:0.5,health:1,hunger:0,sanity:-10,perish:l,stack:40},green_mushroom:{name:"Green Cap",veggie:0.5,ideal:!0,health:0,hunger:12.5,sanity:-50,perish:l,stack:40},green_mushroom_cooked:{name:"Cooked Green Cap",veggie:0.5,health:-1,hunger:0,sanity:15,perish:l,stack:40},blue_mushroom:{name:"Blue Cap",veggie:0.5,
ideal:!0,health:20,hunger:12.5,sanity:-15,perish:l,stack:40},blue_mushroom_cooked:{name:"Cooked Blue Cap",veggie:0.5,health:-3,hunger:0,sanity:10,perish:l,stack:40},petals:{name:"Petals",uncookable:!0,health:1,hunger:0,sanity:-2.5,perish:h,stack:40},petals_evil:{name:"Dark Petals",uncookable:!0,health:0,hunger:0,sanity:-5,perish:h,stack:40},seeds:{name:"Seeds",uncookable:!0,health:0,hunger:4.6875,perish:G,stack:40},seeds_cooked:{name:"Toasted Seeds",uncookable:!0,health:1,hunger:4.6875,perish:l,stack:40},
spoiled_food:{name:"Rot",uncookable:!0,health:-1,hunger:-10,stack:40},tallbirdegg:{name:"Tallbird Egg",egg:4,health:3,hunger:25},tallbirdegg_cooked:{name:"Fried Tallbird Egg",egg:4,precook:1,health:0,hunger:37.5,perish:h},trunk_summer:{name:"Koalefant Trunk",uncookable:!0,ismeat:!0,health:30,hunger:37.5,sanity:0,perish:h,stack:20},trunk_summer_cooked:{name:"Koalefant Trunk Steak",uncookable:!0,ismeat:!0,health:40,hunger:75,sanity:0,perish:r,stack:20},twigs:{name:"Twigs",inedible:1},cavebanana:{name:"Cave Banana",
isfruit:!0,fruit:1,health:1,hunger:12.5,sanity:0,perish:l},cavebanana_cooked:{name:"Cooked Banana",isfruit:!0,fruit:1,precook:1,health:3,hunger:12.5,sanity:0,perish:h},carrot:{name:"Carrot",isveggie:!0,veggie:1,health:1,hunger:12.5,perish:l,sanity:0,stack:40},carrot_cooked:{name:"Roasted Carrot",isveggie:!0,veggie:1,precook:1,health:3,hunger:12.5,perish:h,sanity:0,stack:40},corn:{name:"Corn",ideal:!0,isveggie:!0,veggie:1,health:3,hunger:25,perish:l,sanity:0,stack:40},corn_cooked:{name:"Popcorn",isveggie:!0,
veggie:1,precook:1,health:3,hunger:12.5,perish:r,sanity:0,stack:40},pumpkin:{name:"Pumpkin",isveggie:!0,veggie:1,health:3,hunger:37.5,perish:l,sanity:0,stack:20},pumpkin_cooked:{name:"Hot Pumpkin",isveggie:!0,veggie:1,precook:1,health:8,hunger:37.5,perish:h,sanity:0,stack:20},eggplant:{name:"Eggplant",isveggie:!0,veggie:1,health:8,hunger:25,perish:l,sanity:0,stack:20},eggplant_cooked:{name:"Braised Eggplant",isveggie:!0,veggie:1,precook:1,health:20,hunger:25,perish:h,sanity:0,stack:20},durian:{name:"Durian",
isfruit:!0,monster:1,fruit:1,health:-3,hunger:25,perish:l,sanity:-5,stack:20},durian_cooked:{name:"Extra Smelly Durian",isfruit:!0,monster:1,fruit:1,precook:1,health:0,hunger:25,perish:h,sanity:-5,stack:20},pomegranate:{name:"Pomegranate",isfruit:!0,fruit:1,health:3,hunger:9.375,perish:h,sanity:0,stack:40},pomegranate_cooked:{name:"Sliced Pomegranate",isfruit:!0,fruit:1,precook:1,health:20,hunger:12.5,perish:u,sanity:0,stack:40},dragonfruit:{name:"Dragon Fruit",isfruit:!0,fruit:1,health:3,hunger:9.375,
perish:h,sanity:0,stack:40},dragonfruit_cooked:{name:"Prepared Dragon Fruit",isfruit:!0,fruit:1,precook:1,health:20,hunger:12.5,perish:u,sanity:0,stack:40},berries:{name:"Berries",isfruit:!0,fruit:0.5,health:0,hunger:9.375,perish:h,sanity:0,stack:40},berries_cooked:{name:"Roasted Berries",isfruit:!0,fruit:0.5,precook:1,health:1,hunger:12.5,perish:u,sanity:0,stack:40},wormlight:{name:"Glow Berry",uncookable:!0,health:11,hunger:18.75,sanity:-10,perish:l}},ga=function(){return this.op+this.qty},ha={"=":function(a){return a===
this.qty},">":function(a){return a>this.qty},"<":function(a){return a<this.qty},">=":function(a){return a>=this.qty},"<=":function(a){return a<=this.qty}},S={test:function(a){return!!a},toString:function(){return""}},u=function(a,b){return{op:a,qty:b,test:ha[a],toString:ga}},ia=function(a,b,c){return this.item1.test(a,b,c)||this.item2.test(a,b,c)},ja=function(){return this.item1+" or "+this.item2},G=function(a,b){return{item1:a,item2:b,test:ia,toString:ja,cancel:a.cancel||b.cancel}},ka=function(a,
b,c){return!this.item.test(a,b,c)},la=function(){return this.item.toString().substring(0,this.item.toString().length-1)+"|strike]"},v=function(a){return{item:a,test:ka,toString:la,cancel:!0}},ma=function(a,b,c){return(b[this.name]||0)+(b[this.name+"_cooked"]||0)},na=function(){return"[*"+e[this.name].name+"|"+e[this.name].img+" "+e[this.name].name+"]"+(e[this.name].cook?"[*"+e[this.name].cook.name+"|"+e[this.name].cook.img+"]":"")+(e[this.name].raw?"[*"+e[this.name].raw.name+"|"+e[this.name].raw.img+
"]":"")+(this.qty?this.qty:"")},C=function(a,b){return{name:a,qty:b||S,test:ma,toString:na}},oa=function(a,b,c){return b[this.name]},pa=function(){return"[*"+e[this.name].name+"|"+e[this.name].img+" "+e[this.name].name+"]"+(this.qty?this.qty:"")},A=function(a,b){return{name:a,qty:b||S,test:oa,toString:pa}},qa=function(a,b,c){return c[this.tag]},ra=function(){return"[tag:"+this.tag+"|"+this.tag+"]"+(this.qty?this.qty:"")},g=function(a,b){return{tag:a,qty:b||S,test:qa,toString:ra}},m={butterflymuffin:{name:"Butter Muffin",
test:function(a,b,c){return b.butterflywings&&!c.meat&&c.veggie},requires:"Butterfly Wings, veggie",requirements:[C("butterflywings"),v(g("meat")),g("veggie")],priority:1,weight:1,foodtype:"veggie",health:20,hunger:37.5,perish:r,sanity:5,cooktime:2},frogglebunwich:{name:"Froggle Bunwich",test:function(a,b,c){return(b.froglegs||b.froglegs_cooked)&&c.veggie},requirements:[C("froglegs"),g("veggie")],priority:1,foodtype:"meat",health:20,hunger:37.5,perish:r,sanity:5,cooktime:2},taffy:{name:"Taffy",test:function(a,
b,c){return c.sweetener&&3<=c.sweetener&&!c.meat},requirements:[g("sweetener",u(">=",3)),v(g("meat"))],priority:10,foodtype:"veggie",health:-3,hunger:25,perish:r,sanity:15,cooktime:2},pumpkincookie:{name:"Pumpkin Cookie",test:function(a,b,c){return(b.pumpkin||b.pumpkin_cooked)&&c.sweetener&&2<=c.sweetener},requirements:[C("pumpkin"),g("sweetener",u(">=",2))],priority:10,foodtype:"veggie",health:0,hunger:37.5,perish:l,sanity:15,cooktime:2},stuffedeggplant:{name:"Stuffed Eggplant",test:function(a,b,
c){return(b.eggplant||b.eggplant_cooked)&&c.veggie&&1<c.veggie},requirements:[C("eggplant"),g("veggie",u(">",1))],priority:1,foodtype:"veggie",health:3,hunger:37.5,perish:r,sanity:5,cooktime:2},fishsticks:{name:"Fishsticks",test:function(a,b,c){return c.fish&&b.twigs&&c.inedible&&1>=c.inedible},requirements:[g("fish"),A("twigs"),g("inedible"),g("inedible",u("<=",1))],priority:10,foodtype:"meat",health:40,hunger:37.5,perish:l,sanity:5,cooktime:2},honeynuggets:{name:"Honey Nuggets",test:function(a,
b,c){return b.honey&&c.meat&&1.5>=c.meat&&!c.inedible},requirements:[A("honey"),g("meat",u("<=",1.5)),v(g("inedible"))],priority:2,foodtype:"meat",health:20,hunger:37.5,perish:r,sanity:5,cooktime:2},honeyham:{name:"Honey Ham",test:function(a,b,c){return b.honey&&c.meat&&1.5<c.meat&&!c.inedible},requirements:[A("honey"),g("meat",u(">",1.5)),v(g("inedible"))],priority:2,foodtype:"meat",health:30,hunger:75,perish:r,sanity:5,cooktime:2},dragonpie:{name:"Dragonpie",test:function(a,b,c){return(b.dragonfruit||
b.dragonfruit_cooked)&&!c.meat},requirements:[C("dragonfruit"),v(g("meat"))],priority:1,foodtype:"veggie",health:40,hunger:75,perish:r,sanity:5,cooktime:2},kabobs:{name:"Kabobs",test:function(a,b,c){return c.meat&&b.twigs&&(!c.monster||1>=c.monster)&&c.inedible&&1>=c.inedible},requirements:[g("meat"),A("twigs"),G(v(g("monster")),g("monster",u("<=",1))),g("inedible"),g("inedible",u("<=",1))],priority:5,foodtype:"meat",health:3,hunger:37.5,perish:r,sanity:5,cooktime:2},mandrakesoup:{name:"Mandrake Soup",
test:function(a,b,c){return b.mandrake},requirements:[A("mandrake")],priority:10,foodtype:"veggie",health:100,hunger:150,perish:h,sanity:5,cooktime:3},baconeggs:{name:"Bacon and Eggs",test:function(a,b,c){return c.egg&&1<c.egg&&c.meat&&1<c.meat&&!c.veggie},requirements:[g("egg",u(">",1)),g("meat",u(">",1)),v(g("veggie"))],priority:10,foodtype:"meat",health:20,hunger:75,perish:F,sanity:5,cooktime:2},meatballs:{name:"Meatballs",test:function(a,b,c){return c.meat&&!c.inedible},requirements:[g("meat"),
v(g("inedible"))],priority:-1,foodtype:"meat",health:3,hunger:62.5,perish:l,sanity:5,cooktime:0.75},bonestew:{name:"Meaty Stew",test:function(a,b,c){return c.meat&&3<=c.meat&&!c.inedible},requirements:[g("meat",u(">=",3)),v(g("inedible"))],priority:0,foodtype:"meat",health:12,hunger:150,perish:l,sanity:5,cooktime:0.75},perogies:{name:"Pierogi",test:function(a,b,c){return c.egg&&c.meat&&c.veggie&&!c.inedible},requirements:[g("egg"),g("meat"),g("veggie"),v(g("inedible"))],priority:5,foodtype:"meat",
health:40,hunger:37.5,perish:F,sanity:5,cooktime:1},turkeydinner:{name:"Turkey Dinner",test:function(a,b,c){return b.drumstick&&1<b.drumstick&&c.meat&&1<c.meat&&(c.veggie||c.fruit)},requirements:[A("drumstick",u(">",1)),g("meat",u(">",1)),G(g("veggie"),g("fruit"))],priority:10,foodtype:"meat",health:20,hunger:75,perish:h,sanity:5,cooktime:3},ratatouille:{name:"Ratatouille",test:function(a,b,c){return!c.meat&&c.veggie&&!c.inedible},requirements:[v(g("meat")),g("veggie"),v(g("inedible"))],priority:0,
foodtype:"veggie",health:3,hunger:25,perish:r,sanity:5,cooktime:1},jammypreserves:{name:"Fist Full of Jam",test:function(a,b,c){return c.fruit&&!c.meat&&!c.veggie&&!c.inedible},requirements:[g("fruit"),v(g("meat")),v(g("veggie")),v(g("inedible"))],priority:0,foodtype:"veggie",health:3,hunger:37.5,perish:r,sanity:5,cooktime:0.5},fruitmedley:{name:"Fruit Medley",test:function(a,b,c){return c.fruit&&3<=c.fruit&&!c.meat&&!c.veggie},requirements:[g("fruit",u(">=",3)),v(g("meat")),v(g("veggie"))],priority:0,
foodtype:"veggie",health:20,hunger:25,perish:h,sanity:5,cooktime:0.5},fishtacos:{name:"Fish Tacos",test:function(a,b,c){return c.fish&&(b.corn||b.corn_cooked)},requirements:[g("fish"),C("corn")],priority:10,foodtype:"meat",health:20,hunger:37.5,perish:h,sanity:5,cooktime:0.5},waffles:{name:"Waffles",test:function(a,b,c){return b.butter&&(b.berries||b.berries_cooked)&&c.egg},requirements:[A("butter"),C("berries"),g("egg")],priority:10,foodtype:"veggie",health:60,hunger:37.5,perish:h,sanity:5,cooktime:0.5},
monsterlasagna:{name:"Monster Lasagna",test:function(a,b,c){return c.monster&&2<=c.monster&&!c.inedible},requirements:[g("monster",u(">=",2)),v(g("inedible"))],priority:10,foodtype:"meat",health:-20,hunger:37.5,perish:h,sanity:-20,cooktime:0.5},powcake:{name:"Powdercake",test:function(a,b,c){return b.twigs&&b.honey&&(b.corn||b.corn_cooked)},requirements:[A("twigs"),A("honey"),C("corn")],priority:10,foodtype:"veggie",health:-3,hunger:0,perishtime:9E6,sanity:0,cooktime:0.5},unagi:{name:"Unagi",test:function(a,
b,c){return b.cutlichen&&(b.eel||b.eel_cooked)},requirements:[A("cutlichen"),C("eel")],priority:20,foodtype:"veggie",health:20,hunger:18.75,perishtime:l,sanity:5,cooktime:0.5},wetgoop:{name:"Wet Goop",test:function(a,b,c){return!0},requirements:[],trash:!0,priority:-2,health:0,hunger:0,perish:h,sanity:0,cooktime:0.25}},P=function(){var a,b,c=/^tag[: ]/,k=/^tag:? */,x,f=/^recipe[: ]/,d=/^recipe:? */,w,h=/^ingredient[: ]/,g=/^ingredient:? */,Z,p,s=!1,sa=function(b){!s&&b.uncookable?b.match=0:0===b.lowerName.indexOf(a)||
b.raw&&0===b.raw.lowerName.indexOf(a)?b.match=3:0===p.test(b.lowerName)?b.match=2:Z.test(b.lowerName)?b.match=1:b.match=0;return b.match},B=function(a){return a.match=a[b]+0||0},n=function(a){for(var b=0,c,f=!0;b<x.length;){c=x[b].test(null,a.nameObject,a);if(x[b].cancel){if(!c){f=!0;break}}else c&&(f=!1);b++}return a.match=f?0:1},l=function(a){for(var b=0,c,f=!0;b<a.requirements.length;){c=a.requirements[b].test(null,w.nameObject,w);if(a.requirements[b].cancel){if(!c){f=!0;break}}else c&&(f=!1);
b++}return a.match=f?0:1},r=function(b){return b.match=b.lowerName===a?1:0},q=function(b){return b.match=b.lowerName===a||b.raw&&b.raw.lowerName===a||b.cook&&b.cook.lowerName===a?1:0},E=function(a,b){var c,f;return a.match===b.match?(c=a.raw?a.raw.name:a.name,f=b.raw?b.raw.name:b.name,c!==f?c>f?1:c<f?-1:0:a.name===b.name?0:a.raw===b?1:-1):b.match-a.match};return function(z,ta,ua){s=!!ua;a=ta.toLowerCase();if(c.test(a))return b=a.split(k)[1],z.filter(B).sort(E);if(f.test(a))return(x=m.byName(a.split(d)[1].toLowerCase()))?
(x=x.requirements,z.filter(n).sort(E)):[];if(h.test(a))return(w=e.byName(a.split(g)[1].toLowerCase()))?z.filter(l).sort(E):[];if(0===a.indexOf("*"))return a=a.substring(1),z.filter(r).sort(E);if(0===a.indexOf("~"))return a=a.substring(1),z.filter(q).sort(E);p=RegExp("\\b"+a+".*");Z=RegExp("\\b"+a.split("").join(".*")+".*");return z.filter(sa).sort(E)}}(),T=function(a,b,c){var k,x,f;for(k=0;k<a.length;k++)if(f=a[k],null!==f)for(x in b[f.id]=1+(b[f.id]||0),f)f.hasOwnProperty(x)&&"perish"!==x&&!isNaN(f[x])?
c[x]=f[x]+(c[x]||0):"perish"===x&&(c[x]=Math.min(c[x]||F,f[x]))},$=function(){var a,b;return function(c,k,x,f){var d,w;c.length=0;a={};b={};T(k,a,b);for(k=0;k<m.length;k++){w=!1;for(d=0;d<m[k].requirements.length;d++)if(m[k].requirements[d].test(null,a,b))m[k].requirements[d].cancel||(w=!0);else if(!f&&m[k].requirements[d].cancel){w=!1;break}else if(f&&!m[k].requirements[d].cancel){w=!1;break}!w||x&&-1!==x.indexOf(m[k])||c.push(m[k])}b.img="";b.name="Combined";return c}}(),va=function(){var a=[],
b,c;return function(k){a.length=0;b={};c={};T(k,b,c);for(k=0;k<m.length;k++)m[k].test(null,b,c)&&a.push(m[k]);a.sort(function(a,b){return b.priority-a.priority});c.img="";c.name="Combined";a.unshift(c);return a}}(),M=function(){var a=document.createElement("canvas"),b=a.getContext&&a.toDataURL&&a.getContext("2d"),c=document.createElement("canvas"),k=c.getContext&&c.getContext("2d"),d={},f={},h=!!b,w=[],g=function(p){var s=function(p,s){b.clearRect(0,0,64,64);b.drawImage(s,0,0,64,64);k.clearRect(0,
0,32,32);k.drawImage(s,0,0,32,32);try{d[p]=a.toDataURL(),f[p]=c.toDataURL()}catch(g){h=!1}w.filter(function(a){return a.url===p}).forEach(function(a){a.url===p&&(delete a.img.dataset.pending,L&&a.img.removeAttribute("data-pending"),a.img.src=32===a.d?f[p]||p:d[p]||p)});w=w.filter(function(a){return a.url!==p})};return function(a){s(p,a.target)}},e=function(a,b,c){a.dataset.pending=b;L&&a.setAttribute("data-pending",b);w.push({url:b,img:a,d:c})},m=function(a,b){var c=new Image,k;h?d[a]?c.src=32===
b?f[a]:d[a]:(null!==d[a]&&(d[a]=null,k=new Image,k.addEventListener("load",g(a),!1),k.src=a),e(c,a,b)):c.src=a;return c};a.width=64;a.height=64;c.width=32;c.height=32;m.queue=e;return m}(),U=function(){var a=/\[([^\|]*)\|([^\|\]]*)\|?([^\|\]]*)\]/,b=/([^\|]\]\[[^\|]+\|[^\|\]]+)\|?([^\|\](?:left)]*)(?=\])/g,c=/(\[[^\|]+\|[^\|\]]+)\|?([^\|\]]*)(?=\]\[)(?!\]\[\|)/g,k=function(a,b,c){return b+"|"+(0===c.length?"left":c+" left")},d=function(a,b,c){return b+"|"+(0===c.length?"right":c+" right")},f=/_(\w)/g,
h=function(a,b){return" "+b.toUpperCase()};return function(w){var g=w&&w.replace(b,k).replace(b,k).replace(c,d);w=g&&g.split(a);var e,m,p,s;if(w&&1!==w.length)for(g=document.createDocumentFragment(),g.appendChild(document.createTextNode(w[0])),e=1;e<w.length;e+=4)""===w[e]&&""===w[e+1]?g.appendChild(document.createElement("br")):(m=document.createElement("span"),m.className=""===w[e+2]?"link":"link "+w[e+2],m.dataset.link=w[e],L&&m.setAttribute("data-link",w[e]),w[e+1]&&0===w[e+1].indexOf("img/")?
(m.appendChild(document.createTextNode(w[e+1].split(" ").slice(1).join(" "))),p=w[e+1].split(" ")[0],s=M(p,32),s.title=(p.substr(4,1).toUpperCase()+p.substr(5).replace(f,h)).split(".")[0],m.appendChild(s)):m.appendChild(document.createTextNode(w[e+1]?w[e+1]:w[e])),g.appendChild(m)),g.appendChild(document.createTextNode(w[e+3]));return g}}(),n,l=0,aa=document.getElementById("main"),wa=document.getElementById("food"),xa=document.getElementById("recipes"),ya=document.getElementById("navbar"),L=!1;document.documentElement.dataset||
(L=!0,Object.defineProperty(Element.prototype,"dataset",{get:function(){this.ds||(this.ds={},Array.prototype.forEach.call(this.attributes,function(a){0===a.name.indexOf("data-")&&(this.ds[a.name.substring(5)]=a.value)},this));return this.ds}}));document.getElementById("stalehealth").appendChild(document.createTextNode(Math.round(333)/10+"%"));document.getElementById("stalehunger").appendChild(document.createTextNode(Math.round(667)/10+"%"));document.getElementById("spoiledhunger").appendChild(document.createTextNode(Math.round(500)/
10+"%"));document.getElementById("spoiledsanity").appendChild(document.createTextNode(10));document.getElementById("perishground").appendChild(document.createTextNode(Math.round(1500)/10+"%"));document.getElementById("perishwinter").appendChild(document.createTextNode(Math.round(750)/10+"%"));document.getElementById("perishfridge").appendChild(document.createTextNode(Math.round(500)/10+"%"));r=function(a,b){return"[tag:"+a+"|"+(b||a)+"]"};for(n in e)if(e.hasOwnProperty(n)){var d=e[n];d.match=0;d.lowerName=
d.name.toLowerCase();d.id=n;d.nameObject={};d.nameObject[n]=1;d.img="img/"+d.name.replace(/ /g,"_").toLowerCase()+".png";-1!==n.indexOf("_cooked")&&(d.cooked=!0);e[n+"_cooked"]&&(d.cook=e[n+"_cooked"],e[n+"_cooked"].raw=d);d.info=[];h=d.info;d.fruit&&h.push(r("fruit")+(1===d.fruit?"":"\u00d7"+d.fruit));d.veggie&&h.push(r("veggie","vegetable")+(1===d.veggie?"":"\u00d7"+d.veggie));d.meat&&h.push(r("meat")+(1===d.meat?"":"\u00d7"+d.meat));d.egg&&h.push(r("egg")+(1===d.egg?"":"\u00d7"+d.egg));d.fish&&
h.push(r("fish"));d.magic&&h.push(r("magic"));d.decoration&&h.push(r("decoration"));d.inedible&&h.push(r("inedible"));d.monster&&h.push(r("monster","monster food"));d.sweetener&&h.push(r("sweetener"));d.fat&&h.push(r("fat"));d.dairy&&h.push(r("dairy"));d.comment&&h.push(d.comment);e[l++]=d}e.length=l;l=0;for(n in m)m.hasOwnProperty(n)&&(m[n].match=0,m[n].name=m[n].name||n,m[n].id=n,m[n].lowerName=m[n].name.toLowerCase(),m[n].weight=m[n].weight||1,m[n].priority=m[n].priority||0,m[n].img="img/"+m[n].name.replace(/ /g,
"_").toLowerCase()+".png",m[n].requirements&&(m[n].requires=U(m[n].requirements.join("; "))),m[l++]=m[n]);m.length=l;m.forEach=Array.prototype.forEach;m.filter=Array.prototype.filter;m.sort=Array.prototype.sort;m.byName=function(a){for(var b=this.length;b--;)if(this[b].lowerName===a)return this[b]};var l=function(a,b){return a+"[recipe:"+b.name+"|"+b.img+"]"},Q=function(a,b,c){return 1===b?a:a+(c||"s")};for(n in e)e.hasOwnProperty(n)&&isNaN(n)&&isNaN(e[n])&&(d=e[n],h=d.info,d.cooked&&h.push("from [*"+
d.raw.name+"|"+d.raw.img+"]"),d.cook&&h.push("cook: [*"+d.cook.name+"|"+d.cook.img+"]"),d.dry&&(d.dry instanceof Object||(d.dry=e[d.dry]),h.push("dry in "+d.drytime/t+" "+Q("day",d.drytime/t)+": [*"+d.dry.name+"|"+d.dry.img+"]")),d.info=h.join("; "),d.uncookable?d.info+="[|]cannot be added to crock pot":(d.recipes=[],m.forEach(function(a){for(var b=!1,c=a.requirements,k=c.length;k--;)if(c[k].test(null,d.nameObject,d))c[k].cancel||b||(b=!0);else if(c[k].cancel){b=!1;break}b&&d.recipes.push(a)}),0<
d.recipes.length&&(d.ingredient=!0,d.info+=d.recipes.reduce(l,"[|][ingredient:"+d.name+"|Recipes] "))),d.info=U(d.info));e.forEach=Array.prototype.forEach;e.filter=Array.prototype.filter;e.sort=Array.prototype.forEach;e.byName=function(a){for(var b=this.length;b--;)if(this[b].lowerName===a)return this[b]};var I="id health hunger fruit veggie meat egg fish magic decoration inedible monster sweetener fat dairy".split(" "),za=function(a,b,c){var k=c||[0,0,0,0],d,f=0,e=0;return function(c){for(var g;c--&&
1<a;){b(k);k[0]++;for(g=0;k[g]>=a;)g++,k[g]++;d=4;for(f=0;d--;)k[d]>=a?k[d]=f:k[d]>f&&(f=k[d]);if(4===g)return!1;e++}return!0}};K=D=void 0;e.filter(function(a){return!a.uncookable&&!a.skip&&(a.ideal||!a.cook&&(!a.raw||!a.raw.ideal))}).map(function(a){for(var b={},c=I.length;c--;)a.hasOwnProperty(I[c])&&(b[I[c]]=a[I[c]]);return b});D=m.filter(function(a){return!a.trash}).sort(function(a,b){return b.priority-a.priority});K=D.map(function(a){return a.test});D.map(function(a){return a.test.toString()});
D.map(function(a){return a.priority});var Aa=function(a,b,c,k){var d=K.length,f=[],e=0,g,h=60,m=function(b){return a[b]},n=za(a.length,function(a){a=a.map(m);var b,c=null,k={},e={};T(a,k,e);for(b=0;b<d&&(null===c||D[b].priority>=c);b++)K[b](null,k,e)&&(f.push({recipe:D[b],ingredients:a,tags:{health:e.health,hunger:e.hunger}}),c=D[b].priority)}),p=function(){var a=!1,d=Date.now();for(n(h)?setTimeout(p,0):a=!0;e<f.length&&f[e];e++)b(f[e]);g!==Date.now()-d&&(g=Date.now()-d+1,h=38/g*h+1|0);c&&c();a&&
k&&k()};p()},N;(function(){var a=ya.getElementsByTagName("li"),b={},c={},k,d,f=function(a){N(a.target.dataset.tab)},e;N=function(a){d.className="";d=b[a];k.style.display="none";k=c[a];d.className="selected";k.style.display="block"};for(n=0;n<a.length;n++)e=a[n],e.dataset.tab&&(b[e.dataset.tab]=e,c[e.dataset.tab]=document.getElementById(e.dataset.tab),c[e.dataset.tab].style.display="none",e.addEventListener("selectstart",function(a){a.preventDefault()},!1),e.addEventListener("click",f,!1));d=b.simulator;
k=c.simulator;window.localStorage&&localStorage.foodGuideState&&("["===localStorage.foodGuideState[0]?(a={},a.pickers=JSON.parse(localStorage.foodGuideState),localStorage.foodGuideState=JSON.stringify(a)):a=JSON.parse(localStorage.foodGuideState),a.activeTab&&b[a.activeTab]&&(d=b[a.activeTab],k=c[a.activeTab]));d.className="selected";k.style.display="block";window.addEventListener("beforeunload",function(){var a;window.localStorage&&(localStorage.foodGuideState||(localStorage.foodGuideState="{}"),
a=JSON.parse(localStorage.foodGuideState),a.activeTab=d.dataset.tab,localStorage.foodGuideState=JSON.stringify(a))})})();var Ba=function(a){a.dataset.pending&&M.queue(a,a.dataset.pending,32)},V=function(a){var b,c,d,e=document.createElement("tr"),f;for(b=1;b<arguments.length;b++)c=document.createElement(a),f=(d=arguments[b])&&d.indexOf?d:d.toString(),d instanceof DocumentFragment?(c.appendChild(d.cloneNode(!0)),Array.prototype.forEach.call(c.getElementsByTagName("img"),Ba)):0===f.indexOf("img/")?
(d=M(f),c.appendChild(d)):c.appendChild(document.createTextNode(f)),e.appendChild(c);return e},R=function(a,b,c,d,e,f,g,h,m,n){var l,p,s,r=!1,B,u,v,t=function(a,b,d){n&&!(v<n)||h&&!h(a)||(b=c(a),g&&g(a,d)&&(b.className="highlighted",B||(B=b),u=b),l.appendChild(b),v++)},q=function(c,d,k){var g,h;if(d||c&&""!==c.target.dataset.sort||s){g=d||c&&c.target.dataset.sort||s;e&&(h=b.shift());"name"===g?b.sort(function(a,b){var c=a.raw?a.raw.name:a.name,d=b.raw?b.raw.name:b.name;return c!==d?c>d?1:c<d?-1:0:
a.name===b.name?0:a.raw===b?1:-1}):b.sort(function(a,b){var c=a[g],d=b[g];return isNaN(c)||isNaN(d)?isNaN(c)&&isNaN(d)?0:isNaN(c)?1:-1:d-c});if(d||c)s===g?r=!r:(s=g,r=!1);r&&b.reverse();e&&b.unshift(h)}c=document.createElement("tr");for(p in a)d=document.createElement("th"),-1===p.indexOf(":")?d.appendChild(document.createTextNode(p)):(d.appendChild(document.createTextNode(p.split(":")[0])),d.title=p.split(":")[1]),a[p]&&(a[p]===s&&(d.style.background=r?"#555":"#ccc",d.style.color=r?"#ccc":"#555",
d.style.borderRadius="4px"),d.style.cursor="pointer",d.dataset.sort=a[p],d.addEventListener("click",q,!1)),c.appendChild(d);d=l;l=document.createElement("table");l.appendChild(c);u=B=null;v=0;b.forEach(t);f&&(l.className="links",Array.prototype.forEach.call(l.getElementsByClassName("link"),function(a){a.addEventListener("click",f,!1)}));d&&d.parentNode.replaceChild(l,d);k&&(B&&B.offsetTop+l.offsetTop+aa.offsetTop+B.offsetHeight>window.scrollY+window.innerHeight?B.scrollIntoView(!0):u&&u.offsetTop+
l.offsetTop+aa.offsetTop<window.scrollY&&u.scrollIntoView(!1))};d?q(null,d):q();l.update=function(a){q(null,null,a)};l.setMaxRows=function(a){n=a;this.update()};return l},y=function(a){return isNaN(a)?"":0<a?"+"+a:a},ba=function(a,b){return a<b?(b-a)/Math.abs(a):a>b?-(a-b)/Math.abs(a):0},ca=function(a,b){return isNaN(a)||a===b?"":" ("+y((100*(a<b?(b-a)/Math.abs(a):a>b?-(a-b)/Math.abs(a):0)).toFixed(0))+"%)"},da=function(a){return V("td",a.img?a.img:"",a.name,y(a.health),y(a.hunger),isNaN(a.sanity)?
"":y(a.sanity),isNaN(a.perish)?"Never":a.perish/t+" "+Q("day",a.perish/t),a.info||"")},X=function(a,b,c){return V("td",a.img?a.img:"",a.name,y(a.health)+ca(b,a.health),y(a.hunger)+ca(c,a.hunger),isNaN(a.sanity)?"":y(a.sanity),isNaN(a.perish)?"Never":a.perish/t+" "+Q("day",a.perish/t),(a.cooktime*fa+0.5|0)+" secs",a.priority||"0",a.requires||"")};(function(){var a,b=[],c=[],d=R({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish",Info:""},Array.prototype.slice.call(e),
da,"name",!1,function(f){f=f.target?"IMG"===f.target.tagName?f.target.parentNode.dataset.link:f.target.dataset.link:f;"recipe:"===f.substring(0,7)||"ingredient:"===f.substring(0,11)?(N("crockpot"),"recipe:"===f.substring(0,7)&&(f="*"+f.substring(7)),c=P(m,f),g.update(!0)):(a!==f?(a=f,b=P(e,f)):(a="",b.length=0),d.update(!0))},function(a){return-1!==b.indexOf(a)}),g=R({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish","Cook Time":"cooktime","Priority:One of the highest priority recipes for a combination will be made":"priority",
"Requires:Dim, struck items cannot be used":""},Array.prototype.slice.call(m),X,"name",!1,function(c){c=c.target?"IMG"===c.target.tagName?c.target.parentNode.dataset.link:c.target.dataset.link:c;N("foodlist");a=c;b=P(e,c);d.update(!0)},function(a){return-1!==c.indexOf(a)});wa.appendChild(d);xa.appendChild(g)})();var Ca=function(a,b){return a+"[ingredient:"+e[b.id].name+"|"+e[b.id].img+"]"},ea=function(a){var b=document.createElement("button");b.appendChild(document.createTextNode("Calculate efficient recipes (may take some time)"));
b.className="makablebutton";b.addEventListener("click",function(){var c=[],d=a?a.length:null,g,f,h=[],l,n,r,u,p=[],s=[],v,B,t,A=function(a){return-1!==s.indexOf(a.id)},C=function(a){return-1!==this.indexOf(e[a])},q=function(a){-1!==s.indexOf(a.target.dataset.id)&&s.splice(s.indexOf(a.target.dataset.id),1);-1!==p.indexOf(a.target.dataset.id)?(p.splice(p.indexOf(a.target.dataset.id),1),a.target.className=""):(p.push(a.target.dataset.id),a.target.className="selected");t.update()},E=function(a){-1!==
p.indexOf(a.target.dataset.id)&&p.splice(p.indexOf(a.target.dataset.id),1);-1!==s.indexOf(a.target.dataset.id)?(s.splice(s.indexOf(a.target.dataset.id),1),a.target.className=""):(s.push(a.target.dataset.id),a.target.className="excluded");t.update();a.preventDefault()},z=function(a){f&&(f.className="");g===a.target.dataset.recipe?g=f=null:(g=a.target.dataset.recipe,f=a.target,a.target.className="selected");t.update()};null===d&&(d=e.length,a=e);for(;d--;)a[d].cook&&-1===c.indexOf(a[d].cook)&&!a[d].cook.uncookable&&
c.push(a[d].cook),a[d].uncookable||!a[d].ideal&&a[d].cook&&!a[d].cook.uncookable||-1!==c.indexOf(a[d])||c.push(a[d]);v=[];t=R({"":"",Name:"name",Health:"health","Health+:Health gained compared to ingredients":"healthpls",Hunger:"hunger","Hunger+:Hunger gained compared to ingredients":"hungerpls",Ingredients:""},v,function(a){var b=a.recipe;return V("td",b.img?b.img:"",b.name,y(b.health),y(a.healthpls)+" ("+y(100*a.healthpct|0)+"%)",y(b.hunger),y(a.hungerpls)+" ("+y(100*a.hungerpct|0)+"%)",U(a.ingredients.reduce(Ca,
"")))},"hungerpls",!1,null,null,function(a){return(!g||a.recipe.name===g)&&(!s.length||!a.ingredients.some(A))&&(!p.length||p.every(C,a.ingredients))},0,15);B=document.createElement("div");n=document.createElement("div");n.appendChild(document.createTextNode("Computing combinations.."));B.appendChild(n);l=document.createElement("div");l.className="recipeFilter";B.appendChild(l);r=document.createElement("div");r.className="foodFilter";c.forEach(function(a){var b=M(a.img,32);b.dataset.id=a.id;b.addEventListener("click",
q,!1);b.addEventListener("contextmenu",E,!1);b.title=a.name;r.appendChild(b)});B.appendChild(r);d=document.createElement("div");u=document.createElement("input");u.type="text";u.placeholder="use custom filter";u.className="customFilterInput";d.appendChild(u);B.appendChild(t);b.parentNode.replaceChild(B,b);Aa(c,function(a){var b,c;if(-1===h.indexOf(a.recipe.name)){for(b=0;b<h.length&&!(a.recipe.name<h[b]);b++);h.splice(b,0,a.recipe.name);c=M(m.byName(h[b].toLowerCase()).img);c.dataset.recipe=h[b];
c.addEventListener("click",z,!1);c.title=a.recipe.name;b<l.childNodes.length?l.insertBefore(c,l.childNodes[b]):l.appendChild(c)}a.name||(a.name=a.recipe.name,a.health=a.recipe.health,a.ihealth=a.tags.health,a.healthpls=a.recipe.health-a.tags.health,a.hunger=a.recipe.hunger,a.ihunger=a.tags.hunger,a.hungerpls=a.recipe.hunger-a.tags.hunger,a.healthpct=ba(a.tags.health,a.recipe.health),a.hungerpct=ba(a.tags.hunger,a.recipe.hunger),a.sanity=a.recipe.sanity,a.perish=a.recipe.perish);v.push(a)},function(){n.firstChild.textContent=
"Found "+v.length+" valid recipes.."},function(){t.setMaxRows(30);n.firstChild.textContent="Found "+v.length+" valid recipes. Showing top 30 for selected recipe using all selected ingredients. Right-click to exclude ingredients."})},!1);return b};document.getElementById("statistics").appendChild(ea());var Da=function(a,b){return a.reduce(function(a,d){return Math.max(a,d[b]||0)},-1E5)};window.food=e;window.recipes=m;window.matchingNames=P;var W=function(a,b){var c=!1;null!==b?a.dataset.id=b.id:a.nextSibling&&
null!==O(a.nextSibling)?(W(a,O(a.nextSibling)),W(a.nextSibling,null),c=!0):a.dataset.id=null;c||(null!==b?a.firstChild?a.replaceChild(M(b.img),a.firstChild):a.appendChild(M(b.img)):a.firstChild&&a.removeChild(a.firstChild),a.title=b?b.name:"")},O=function(a){return e[a.dataset.id]||m[a.dataset.id]||null};(function(){for(var a=document.getElementsByClassName("ingredientpicker"),b=a.length;b--;)(function(){var c=document.createElement("span"),d,g=document.createElement("div"),f=document.createElement("ul"),
h=a[b],l=b,n,r="recipes"===h.dataset.type?m:e,u=!h.dataset.cookable,p=h.nextSibling,s=p.getElementsByClassName("ingredient"),v,t=[],y,A=[],C=[],q=null,E=!1,z=document.getElementById("results"),D=document.getElementById("discoverfood"),F=document.getElementById("discover"),G=document.getElementById("makable"),J=document.createElement("span"),K=function(a,b){for(var c=a;c.previousSibling;)if(c=c.previousSibling,b(c))return c;return null},L=function(a,b){for(var c=a;c.nextSibling;)if(c=c.nextSibling,
b(c))return c;return null},I=!1,N=function(a){var b=e[a]||m[a]||null;if(v){for(a=0;a<s.length;a++)if(null===O(s[a]))return W(s[a],b),E&&y(),a;return-1}-1===s.indexOf(a)&&(s.push(a),a=document.createElement("span"),a.className="ingredient",W(a,b),a.addEventListener("click",Q,!1),p.appendChild(a),E&&y());return 1},S=function(a){-1!==N(("IMG"===a.target.tagName?a.target.parentNode:a.target).dataset.id)&&a&&a.preventDefault&&a.preventDefault()},T=function(a){var b=M(a.img,32),c=document.createElement("span");
c.appendChild(b);c.appendChild(document.createTextNode(a.name));c.dataset.id=a.id;-1!==t.indexOf(a)&&(c.style.opacity=0.5);c.addEventListener("mousedown",S,!1);this.appendChild(c);this.dataset.length++},U=function(a){-1!==t.indexOf(e[a.dataset.id])?a.style.opacity||(a.style.opacity=0.5):a.style.opacity&&a.style.removeProperty("opacity")},Q=function(a){var b="IMG"===a.target.tagName?a.target.parentNode:a.target;if(v){if(null!==O(b))return W(b,null),y(),b.dataset.id}else return a=s.indexOf(b.dataset.id),
s.splice(a,1),p.removeChild(b),y(),s[a]||null},Y=function(){var a;d.splitTag();a=P(r,d.getSearch(),u);g.removeChild(f);f=document.createElement("div");f.dataset.length=0;a.forEach(T,f);g.appendChild(f);q=null},V=function(a){a="IMG"===a.target.tagName?a.target.parentNode.dataset.link:a.target.dataset.link;var b=P(r,a,u);1===b.length?N(b[0].id):(h.value=a,Y())},H;"ingredients"===p.id?y=function(){var a,b,c,d;t=Array.prototype.map.call(s,function(a){return O(a)});a=va(t);b=a[0].health;c=a[0].hunger;
d=R({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish","Cook Time":"cooktime","Priority:One of the highest priority recipes for a combination will be made":"priority","Requires:Dim, struck items cannot be used":""},a,function(a){return X(a,b,c)},"priority",!0,V,function(a,b){return 0<b.length&&a.priority===Da(b,"priority")});z.firstChild&&z.removeChild(z.firstChild);z.firstChild&&(z.removeChild(z.firstChild),z.removeChild(z.firstChild));z.appendChild(d);
null!==t[0]&&($(A,t,a),0<A.length&&(z.appendChild(document.createTextNode("Add more ingredients to make:")),d=R({"":"",Name:"name","Health:(% more than ingredients)":"health","Hunger:(% more than ingredients)":"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish","Cook Time":"cooktime","Priority:One of the highest priority recipes for a combination will be made":"priority","Requires:Dim, struck items cannot be used":""},A,function(a){return X(a,b,c)},"priority",!1,V),z.appendChild(d)));f&&
f.firstChild&&Array.prototype.forEach.call(f.getElementsByTagName("span"),U)}:"inventory"===p.id&&(y=function(){var a;t=Array.prototype.map.call(p.getElementsByClassName("ingredient"),function(a){return O(a)});D.firstChild&&D.removeChild(D.firstChild);F.firstChild&&F.removeChild(F.firstChild);G.firstChild&&G.removeChild(G.firstChild);0<t.length&&(a=R({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish",Info:""},t,da,"name"),D.appendChild(a),$(C,
t,null,!0),0<C.length&&(a=R({"":"",Name:"name",Health:"health",Hunger:"hunger",Sanity:"sanity","Perish:Time to turn to rot":"perish","Cook Time":"cooktime","Priority:One of the highest priority recipes for a combination will be made":"priority","Requires:Dim, struck items cannot be used":""},C,X,"name"),F.appendChild(a),G.appendChild(ea(t))));f&&f.firstChild&&Array.prototype.forEach.call(f.getElementsByTagName("span"),U)});0!==s.length?(v=!0,Array.prototype.forEach.call(s,function(a){W(a,null);a.addEventListener("click",
Q,!1)})):(s=[],v=!1);window.localStorage&&localStorage.foodGuideState&&(n=JSON.parse(localStorage.foodGuideState).pickers)&&n[l]&&n[l].forEach(function(a){e[a]&&N(a)});E=!0;c.className="searchselector retracted";c.appendChild(document.createTextNode("name"));d=function(){var a=document.createElement("div"),b=!1,d=null,f=[{title:"name",prefix:"",placeholder:"Filter ingredients"},{title:"tag",prefix:"tag:",placeholder:"Meat, veggie, fruit, egg, monster..."},{title:"recipe",prefix:"recipe:",placeholder:"Find ingredients used in a recipe"}],
g=f[0],e=null,k=function(){b=!1;a.style.height="0px";c.style.borderBottomLeftRadius="3px";a.style.borderTopLeftRadius="3px";null!==e&&(clearTimeout(e),e=null);c.className="searchselector retracted"},l=function(a){g=a;h.placeholder=g.placeholder;c.firstChild.textContent=g.title},m=function(a){l(f[a.target.dataset.typeIndex]);Y();k()},n=/: */;c.addEventListener("click",function(){b?k():(null===d&&(a.style.height="auto",a.style.left=c.offsetLeft,a.style.top=c.offsetTop+c.offsetHeight,d=a.offsetHeight+
"px",a.style.height="0px"),b=!0,a.style.height=d,c.style.borderBottomLeftRadius="0px",a.style.borderTopLeftRadius="0px",a.style.width="auto",a.style.width=Math.max(a.offsetWidth,c.offsetWidth+1)+"px",null!==e&&(clearTimeout(e),e=null),c.className="searchselector extended")},!1);c.addEventListener("selectstart",function(a){a.preventDefault()},!1);c.addEventListener("mouseout",function(){null!==e&&clearTimeout(e);e=setTimeout(k,500)},!1);c.addEventListener("mouseover",function(){null!==e&&(clearTimeout(e),
e=null)},!1);a.addEventListener("mouseout",function(){null!==e&&clearTimeout(e);e=setTimeout(k,500)},!1);a.addEventListener("mouseover",function(){null!==e&&(clearTimeout(e),e=null)},!1);f.forEach(function(b,c){var d=document.createElement("div");d.appendChild(document.createTextNode(b.title));d.dataset.typeIndex=c;d.addEventListener("click",m,!1);b.element=d;a.appendChild(d)});h.parentNode.insertBefore(c,h);a.className="searchdropdown";h.parentNode.insertBefore(a,h);return{getTag:function(){return g.title},
setSearchType:function(a){l(f[a])},getSearch:function(){return g.prefix+h.value},splitTag:function(){var a;a=h.value.split(n);var b,c;if(2===a.length)for(b=a[0].toLowerCase()+":",c=a[1],a=0;a<f.length;a++)if(b===f[a].prefix){l(f[a]);h.value=c;break}}}}();g.className="ingredientdropdown";g.appendChild(f);g.addEventListener("mousedown",function(a){a.preventDefault()},!1);(function(){var a=P(r,d.getSearch(),u);g.removeChild(f);f=document.createElement("div");f.dataset.length=0;a.forEach(T,f);g.appendChild(f)})();
J.className="clearingredients";J.appendChild(document.createTextNode("clear"));J.addEventListener("click",function(){if(""===h.value&&"name"===d.getTag())for(;O(p.firstChild);)Q({target:p.firstChild});else h.value="",d.setSearchType(0),Y()},!1);J.addEventListener("mouseover",function(){""===h.value&&"name"===d.getTag()&&(J.firstChild.textContent="clear chosen ingredients")},!1);J.addEventListener("mouseout",function(){"clear"!==J.firstChild.textContent&&(J.firstChild.textContent="clear")},!1);p.parentNode.insertBefore(J,
p);p.parentNode.insertBefore(g,p);h.addEventListener("keydown",function(a){var b;-1!==[16,17,37,38,39,40,13].indexOf(a.keyCode)&&(b=q,13===a.keyCode?(null===q&&(q=f.firstChild||null),null!==q&&S({target:q})):null===q?40===a.keyCode&&(q=f.childNodes[1]||f.firstChild||null,null!==q&&(H=q.offsetLeft+q.offsetWidth/2,a.preventDefault())):(a.preventDefault(),37===a.keyCode?(q=q.previousSibling&&q.previousSibling.offsetTop===q.offsetTop?q.previousSibling:(a=L(q,function(a){return a.offsetTop!==q.offsetTop}))?
a.previousSibling:f.lastChild,null!==q&&(H=q.offsetLeft+q.offsetWidth/2)):39===a.keyCode?(q=q.nextSibling&&q.nextSibling.offsetTop===q.offsetTop?q.nextSibling:(a=K(q,function(a){return a.offsetTop!==q.offsetTop}))?a.nextSibling:f.firstChild,null!==q&&(H=q.offsetLeft+q.offsetWidth/2)):38===a.keyCode?((a=K(q,function(a){return H>=a.offsetLeft-1&&H<=a.offsetLeft+a.offsetWidth+1}))||(a=K(f.lastChild,function(a){return H>=a.offsetLeft-1&&H<=a.offsetLeft+a.offsetWidth+1})),q=a?a:f.firstChild):40===a.keyCode&&
((a=L(q,function(a){return H>=a.offsetLeft-1&&H<=a.offsetLeft+a.offsetWidth+1}))||(a=L(f.firstChild,function(a){return H>=a.offsetLeft-1&&H<=a.offsetLeft+a.offsetWidth+1})),q=a?a:f.lastChild)),q!==b&&(null!==b&&(b.className=""),null!==q&&(q.className="selected")))},!1);h.addEventListener("keyup",function(a){-1===[16,17,37,38,39,40,13].indexOf(a.keyCode)?Y():null!==q&&a.preventDefault()},!1);h.addEventListener("focus",function(){I||(I=!0)},!1);h.addEventListener("blur",function(){I&&(I=!1)},!1);y();
window.addEventListener("beforeunload",function(){var a,b;window.localStorage&&(localStorage.foodGuideState||(localStorage.foodGuideState="{}"),a=JSON.parse(localStorage.foodGuideState),a.pickers||(a.pickers=[]),v?(b=[],b=Array.prototype.map.call(s,function(a){return(a=O(a))?a.id:null}),a.pickers[l]=b):a.pickers[l]=s,localStorage.foodGuideState=JSON.stringify(a))})})()})()})();